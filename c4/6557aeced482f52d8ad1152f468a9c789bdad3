X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=5.0 tests=HTML_MESSAGE,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE autolearn=ham autolearn_force=no
	version=3.4.4
Received: (qmail 20361 invoked from network); 2 Oct 2020 00:24:51 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 2 Oct 2020 00:24:51 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 06EB49CF3F; Fri,  2 Oct 2020 10:24:49 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 494E99CF29;
	Fri,  2 Oct 2020 10:24:01 +1000 (AEST)
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 2AF5D9CF29; Fri,  2 Oct 2020 10:23:57 +1000 (AEST)
Received: from mail-pf1-f169.google.com (mail-pf1-f169.google.com
 [209.85.210.169])
 by minnie.tuhs.org (Postfix) with ESMTPS id 88C729CF28
 for <tuhs@minnie.tuhs.org>; Fri,  2 Oct 2020 10:23:56 +1000 (AEST)
Received: by mail-pf1-f169.google.com with SMTP id d9so208732pfd.3
 for <tuhs@minnie.tuhs.org>; Thu, 01 Oct 2020 17:23:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=eGfA0aEqmiHa1cW0jvA/cyFaVRGM44huha0y4Zj2RCk=;
 b=OHl8sUpk3luIw7eAWNzmUcs24rH15zWQcWadOtkSh4qzzkhn2oJuoSC/JjJk7zD//C
 TkY4QPus8FMhV22bRYtkunH+/mBfbQdFT5VriVsejF4MnWjyab3shT0qm02UiGlid0bt
 zjtKtsI3cJXHUCDzipr5WjW/opOSJC3iHHGzaEg6prqKqNnkM+ZAGSnkyDVPgK3S2F3a
 RtpBUvtg1JahpCS+oWeo+COhmZ+3U+VRTBih+G65mfw0SOQWAEwUsOhs1nLsN60GB26+
 bFY55LVohKYZjx5u/P2BvIFgOMwCtlz5QUW1xQCRuj92DU+VfrKbaqgIZuGIo5WteK2u
 quPQ==
X-Gm-Message-State: AOAM530PBBRXxjsbPQda7M/YCjjFAoG+JZz/A2hBd8BFJsRIJU8tV9R3
 Z2X5bMrN8dX//jQ5UvNyOPkhx+nJPqhnxMwKV06hXDugmhQ=
X-Google-Smtp-Source: ABdhPJwXy4Cj1Ho6FFwytvZzjmlcGaPh/a+uIDjuRMRkrkedXSqvUyS3PkJqRzE8t8BzbIEZXhUenlXFnlZ8vAFuhZs=
X-Received: by 2002:a63:2204:: with SMTP id i4mr8216593pgi.107.1601598235864; 
 Thu, 01 Oct 2020 17:23:55 -0700 (PDT)
MIME-Version: 1.0
References: <20201001125118.DDBBC18C0EB@mercury.lcs.mit.edu>
In-Reply-To: <20201001125118.DDBBC18C0EB@mercury.lcs.mit.edu>
From: Paul Riley <paul@rileyriot.com>
Date: Fri, 2 Oct 2020 08:23:43 +0800
Message-ID: <CAD05_j0QxT1xn7w-9DT7u5WTOWmeib+HQviVg0mTueNKy+RBvw@mail.gmail.com>
To: Noel Chiappa <jnc@mercury.lcs.mit.edu>
Content-Type: multipart/alternative; boundary="000000000000ebf5b305b0a5259e"
Subject: Re: [TUHS] Fwd: Choice of Unix for 11/03 and 11/23+ Systems
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Cc: tuhs <tuhs@minnie.tuhs.org>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

--000000000000ebf5b305b0a5259e
Content-Type: text/plain; charset="UTF-8"

Seems like you're firmly in the footsteps of the creators now... :-)

*Paul Riley*

Mo: +86 186 8227 8332
Email: paul@rileyriot.com



On Thu, 1 Oct 2020 at 20:52, Noel Chiappa <jnc@mercury.lcs.mit.edu> wrote:

>     > From: Paul Riley
>
>     > So mounting Mini-Unix on a running V6 system I guess allows you to
> run
>     > Mini-Unix user mode binaries stuff
>
> Ah, no. They are all link-loaded to run at TOPSYS (060000), so won't run on
> V6 native.
>
>     > Or do you plan to recompile on a stable system?
>
> Well, I need to find out what the problem is, first.
>
>
> Still, notable progress: using my 'mount the Mini-Unix RK pack on a V6
> system'
> hack (which woked fine; the native V6 'icheck' and 'dcheck' work on that
> pack), I was able to sucessfully compile a few tweaked system modules (to
> get
> my usual line-editing chars, and turn off that irritating lower-case mode),
> and then build an OS load which could sucessfully boot. So good progress
> there. A couple of things I learned:
>
> - MiniUnix tools use the 'new' archive format, so the V6 vanilla 'ar'
> doen't
> grok MiniUnix archives (e.g. lib1/lib2). I have a 'nar', which I found on
> the
> 'Shoppa disks', which can deal with them. (We don't have source for it, but
> I'll bet the MIT PWB1 system has that; I'll get to that eventuallly.
> There's also
> an 'ar.c' on the MiniUnix disk; between the two, we'll be able to
> reconstitute
> source for 'nar'.)
>
> - Also, the vanilla V6 linker, 'ld', _also_ doesn't understand new
> archives;
> so the shell file to build a new system, 'shld':
>
>   ld -a -x low.o conf.o lib1 lib2
>
> blows out because it doesn't grok the libraries. Also, the '-a' flag, which
> says 'link starting at 0, not TOPSYS', doesn't exist in the V6 'ld'.
>
> I got around all that by unpacking lib1 (using 'nar', above) - it only
> contains
> two files - and then listing the files to link directly:
>
>   ld -x low.o conf.o syso emulo dev/kl.o dev/devstart.o dev/rk.o
>
> The vanilla V6 linker of course produces an output linked at 0 without
> the -a flag.
>
>
> At some point, I'll produce a 'MiniUnix ld' on vanilla V6, so I can build
> MiniUnix versions of applications there; the first will be the shell, so I
> don't have to keep typing 'chdir' instead of 'cd'! :-)
>
> Then on to trying to find out why MiniUnix crashes whenever I try and do
> anything significant.
>
>        Noel
>

--000000000000ebf5b305b0a5259e
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Seems like you&#39;re firmly in the footsteps of the creat=
ors now... :-)<div><br clear=3D"all"><div><div dir=3D"ltr" class=3D"gmail_s=
ignature" data-smartmail=3D"gmail_signature"><div dir=3D"ltr"><div><div dir=
=3D"ltr"><div><div dir=3D"ltr"><div><div dir=3D"ltr"><div><div dir=3D"ltr">=
<div><div dir=3D"ltr"><div><b>Paul Riley</b></div><div><br></div><div>Mo: +=
86 186 8227 8332</div><div>Email: <a href=3D"mailto:paul@rileyriot.com" tar=
get=3D"_blank">paul@rileyriot.com</a></div><div><br></div></div></div></div=
></div></div></div></div></div></div></div></div></div></div><br></div></di=
v><br><div class=3D"gmail_quote"><div dir=3D"ltr" class=3D"gmail_attr">On T=
hu, 1 Oct 2020 at 20:52, Noel Chiappa &lt;<a href=3D"mailto:jnc@mercury.lcs=
.mit.edu">jnc@mercury.lcs.mit.edu</a>&gt; wrote:<br></div><blockquote class=
=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rg=
b(204,204,204);padding-left:1ex">=C2=A0 =C2=A0 &gt; From: Paul Riley<br>
<br>
=C2=A0 =C2=A0 &gt; So mounting Mini-Unix on a running V6 system I guess all=
ows you to run<br>
=C2=A0 =C2=A0 &gt; Mini-Unix user mode binaries stuff<br>
<br>
Ah, no. They are all link-loaded to run at TOPSYS (060000), so won&#39;t ru=
n on<br>
V6 native. <br>
<br>
=C2=A0 =C2=A0 &gt; Or do you plan to recompile on a stable system?<br>
<br>
Well, I need to find out what the problem is, first.<br>
<br>
<br>
Still, notable progress: using my &#39;mount the Mini-Unix RK pack on a V6 =
system&#39;<br>
hack (which woked fine; the native V6 &#39;icheck&#39; and &#39;dcheck&#39;=
 work on that<br>
pack), I was able to sucessfully compile a few tweaked system modules (to g=
et<br>
my usual line-editing chars, and turn off that irritating lower-case mode),=
<br>
and then build an OS load which could sucessfully boot. So good progress<br=
>
there. A couple of things I learned:<br>
<br>
- MiniUnix tools use the &#39;new&#39; archive format, so the V6 vanilla &#=
39;ar&#39; doen&#39;t<br>
grok MiniUnix archives (e.g. lib1/lib2). I have a &#39;nar&#39;, which I fo=
und on the<br>
&#39;Shoppa disks&#39;, which can deal with them. (We don&#39;t have source=
 for it, but<br>
I&#39;ll bet the MIT PWB1 system has that; I&#39;ll get to that eventuallly=
. There&#39;s also<br>
an &#39;ar.c&#39; on the MiniUnix disk; between the two, we&#39;ll be able =
to reconstitute<br>
source for &#39;nar&#39;.)<br>
<br>
- Also, the vanilla V6 linker, &#39;ld&#39;, _also_ doesn&#39;t understand =
new archives;<br>
so the shell file to build a new system, &#39;shld&#39;:<br>
<br>
=C2=A0 ld -a -x low.o conf.o lib1 lib2<br>
<br>
blows out because it doesn&#39;t grok the libraries. Also, the &#39;-a&#39;=
 flag, which<br>
says &#39;link starting at 0, not TOPSYS&#39;, doesn&#39;t exist in the V6 =
&#39;ld&#39;.<br>
<br>
I got around all that by unpacking lib1 (using &#39;nar&#39;, above) - it o=
nly contains<br>
two files - and then listing the files to link directly:<br>
<br>
=C2=A0 ld -x low.o conf.o syso emulo dev/kl.o dev/devstart.o dev/rk.o<br>
<br>
The vanilla V6 linker of course produces an output linked at 0 without<br>
the -a flag.<br>
<br>
<br>
At some point, I&#39;ll produce a &#39;MiniUnix ld&#39; on vanilla V6, so I=
 can build<br>
MiniUnix versions of applications there; the first will be the shell, so I<=
br>
don&#39;t have to keep typing &#39;chdir&#39; instead of &#39;cd&#39;! :-)<=
br>
<br>
Then on to trying to find out why MiniUnix crashes whenever I try and do<br=
>
anything significant.<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0Noel<br>
</blockquote></div>

--000000000000ebf5b305b0a5259e--
