From tuhs-bounces@minnie.tuhs.org Sun Jun 24 10:14:43 2018
Return-Path: tuhs-bounces@minnie.tuhs.org
X-Spam-Checker-Version: SpamAssassin 3.4.1 (2015-04-28) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.6 required=5.0 tests=FROM_EXCESS_BASE64,
	HEADER_FROM_DIFFERENT_DOMAINS,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE
	autolearn=ham autolearn_force=no version=3.4.1
Received: from minnie.tuhs.org (minnie.tuhs.org [45.79.103.53])
	by inbox.vuxu.org (OpenSMTPD) with ESMTP id 8027f595
	for <ml@inbox.vuxu.org>;
	Sun, 24 Jun 2018 10:14:43 +0000 (UTC)
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 0D9BBA1876; Sun, 24 Jun 2018 20:14:42 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 708A19EE0C;
	Sun, 24 Jun 2018 20:14:05 +1000 (AEST)
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 05BFF9EDE9; Sun, 24 Jun 2018 20:14:02 +1000 (AEST)
X-Greylist: delayed 551 seconds by postgrey-1.35 at minnie.tuhs.org;
 Sun, 24 Jun 2018 20:14:00 AEST
Received: from pio-pvt-msa3.bahnhof.se (pio-pvt-msa3.bahnhof.se [79.136.2.42])
 by minnie.tuhs.org (Postfix) with ESMTPS id 3D5B29EDE9
 for <tuhs@minnie.tuhs.org>; Sun, 24 Jun 2018 20:14:00 +1000 (AEST)
Received: from localhost (localhost [127.0.0.1])
 by pio-pvt-msa3.bahnhof.se (Postfix) with ESMTP id 9F3D23F8FF
 for <tuhs@minnie.tuhs.org>; Sun, 24 Jun 2018 12:04:47 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
Received: from pio-pvt-msa3.bahnhof.se ([127.0.0.1])
 by localhost (pio-pvt-msa3.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id t0xZg9zcjeLQ for <tuhs@minnie.tuhs.org>;
 Sun, 24 Jun 2018 12:04:41 +0200 (CEST)
Received: from h-174-65.A328.priv.bahnhof.se (h-174-65.A328.priv.bahnhof.se
 [81.170.174.65]) (Authenticated sender: mc179410)
 by pio-pvt-msa3.bahnhof.se (Postfix) with ESMTPA id 054303F8E4
 for <tuhs@minnie.tuhs.org>; Sun, 24 Jun 2018 12:04:40 +0200 (CEST)
Received: from h-174-65.A328.priv.bahnhof.se (localhost [127.0.0.1])
 by h-174-65.A328.priv.bahnhof.se (Postfix) with ESMTPS id BC5EB1DE8
 for <tuhs@minnie.tuhs.org>; Sun, 24 Jun 2018 12:04:39 +0200 (CEST)
Date: Sun, 24 Jun 2018 10:04:38 +0000
From: Michael =?utf-8?B?S2rDtnJsaW5n?= <michael@kjorling.se>
To: tuhs@minnie.tuhs.org
Message-ID: <20180624100438.GY10129@h-174-65.A328.priv.bahnhof.se>
References: <DE56C21F-CF7D-4B44-BC43-0C27CBD6DD7A@tfeb.org>
 <20180622145402.GT21272@mcvoy.com>
 <20180622151751.BEK9i%steffen@sdaoden.eu>
 <b6ef82de-739a-ed8e-0e91-3abfa2fb5f07@spamtrap.tnetconsulting.net>
 <20180622192505.mfig_%steffen@sdaoden.eu>
 <89e5ae21-ccc0-5c84-837b-120a1a7d9e26@spamtrap.tnetconsulting.net>
 <20180623144959.M9byU%steffen@sdaoden.eu>
 <ce6f617c-cf8e-63c6-8186-27e09c78020c@spamtrap.tnetconsulting.net>
 <20180623223851.LcBjy%steffen@sdaoden.eu>
 <09ee8833-c8c0-8911-751c-906b737209b7@spamtrap.tnetconsulting.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <09ee8833-c8c0-8911-751c-906b737209b7@spamtrap.tnetconsulting.net>
Subject: Re: [TUHS] off-topic list
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.20
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

On 23 Jun 2018 18:18 -0600, from tuhs@minnie.tuhs.org (Grant Taylor via TUHS):
>> Now you use several programs which all ship with all the knowledge.
> 
> I suppose if you count greping for a line in a text file as
> knowledge of the format, okay.
> 
> egrep "^Subject: " message.txt
> 
> There's nothing special about that.  It's a text file with a line
> that looks like this:
> 
> Subject: Re: [TUHS] off-topic list

The problem, of course (and I hope this is keeping this Unixy enough),
with that approach is that it won't handle headers split across
multiple lines (I'm looking at you, Received:, but you aren't alone),
and that it'll match lines in the body of the message as well (such as
the "Subject: " line in the body of your message), unless the body
happens to be e.g. Base64 encoded which instead complicates searching
for non-header material.

For sure neither is insurmountable even with standard tools, but it
does require a bit more complexity than a simple egrep to properly
parse even a single message, let alone a combination of multiple ones
(as seen in mbox mailboxes, for example). At that point having
specific tools, such as formail, that understand the specific file
format does start to make sense...

There isn't really much conceptual difference between writing, say,
    formail -X Subject: < message.txt
and
    egrep "^Subject: " message.txt
but the way the former handles certain edge cases is definitely better
than that of the latter.

Make everything as simple as possible, but not simpler. (That goes for
web pages, too, by the way.)


> But I do wish that TUHS stripped DKIM and associated headers of
> messages going into the mailing list.  By doing that, there would be
> no data to compare to that wouldn't match.
> 
> I think it would be even better if TUHS would DKIM sign messages as
> they leave the mailing list's mail server.

I believe the correct way would indeed be to validate, strip and
possibly re-sign. That way, everyone would (should) be making correct
claims about a message's origin.

FWIW, SPF presents a similar problem with message forwarding without
address rewriting... so it's definitely not just DKIM.

-- 
Michael Kjörling • https://michael.kjorling.se • michael@kjorling.se
  “The most dangerous thought that you can have as a creative person
              is to think you know what you’re doing.” (Bret Victor)
