X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
	DKIM_VALID_AU,HTML_FONT_LOW_CONTRAST,HTML_MESSAGE,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE autolearn=ham autolearn_force=no version=3.4.4
Received: (qmail 30434 invoked from network); 25 Apr 2021 17:12:42 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 25 Apr 2021 17:12:42 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 4AFBB9C094; Mon, 26 Apr 2021 03:12:40 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id DE9B09BD87;
	Mon, 26 Apr 2021 03:11:58 +1000 (AEST)
Authentication-Results: minnie.tuhs.org;
	dkim=pass (1024-bit key; unprotected) header.d=ccc.com header.i=@ccc.com header.b="OQMApdGk";
	dkim-atps=neutral
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id D808A9BD87; Mon, 26 Apr 2021 03:11:55 +1000 (AEST)
Received: from mail-qv1-f49.google.com (mail-qv1-f49.google.com
 [209.85.219.49])
 by minnie.tuhs.org (Postfix) with ESMTPS id 67BA79BD71
 for <tuhs@minnie.tuhs.org>; Mon, 26 Apr 2021 03:11:52 +1000 (AEST)
Received: by mail-qv1-f49.google.com with SMTP id ef17so20511825qvb.0
 for <tuhs@minnie.tuhs.org>; Sun, 25 Apr 2021 10:11:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ccc.com; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc; bh=ekXOkTO5V/LDy6CXS7If5Ga9EAzd4aC7wK6DvtNJy0w=;
 b=OQMApdGk2hxPO7svVgQW073RQQFr1bfsS1qj254pATuSrrfagDcipqB0n4tdRFUp42
 ZOZu2pkEAy7bvWQQo7ZN+TWuwbjU4ll/bnkSb+8HhjkypWWkhdGFJX0iDgMHiKCd7k0l
 G499eTxUdS3nPzORM5q5zRJca255608uYp5YA=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=ekXOkTO5V/LDy6CXS7If5Ga9EAzd4aC7wK6DvtNJy0w=;
 b=RlNZvkrwDJYQGs8Ps7Yo7SqBsszB+YyNEV46IgKoVF0D3bRNVqzWqfhWWDS4puxT4F
 nCmgIV8eD/NIwZ8+GnSTGVFolUuSYDEEQWUIQ650iv/xofayVkZPc1xUGPrzZTYR8laC
 n7tWxPn0BFWkIYEoKSHZOfw6dPS1Mwfw8/0SC6CDzI+qEno5qoB6py/6gTA/xlfxqUHG
 m0O1y2YAFZ5BPDSCuwiGm0rGGCYZU4XpXGBEh+NJCG8p88N9VtotK1ovvc7+ENShpCSl
 6K5wSpX7/Eg5wVqdDzpo0TglzKEU/b3BPzWdgLYnxHh7K3TSBdieghKMvrwCCO1fZmU7
 6G0w==
X-Gm-Message-State: AOAM533/l60ky/UhQuIybNroH4rGaQ4Ylz2z1JpcSoXtBRB9NzPIaxbu
 qmyV/TkfZ2NICTRt0q640xzyOk4Zw9OH13tRIS8gYQo0wUc=
X-Google-Smtp-Source: ABdhPJw+HfzlYQwFx6xCTv+vQ0tlt1T+owKrlL8xrNoM7GWu5bURq1alk34U+YMGOQSyQw2Uh0vl1OpTPzEJmaVPTD8=
X-Received: by 2002:a0c:b303:: with SMTP id s3mr13962419qve.22.1619370711359; 
 Sun, 25 Apr 2021 10:11:51 -0700 (PDT)
MIME-Version: 1.0
References: <15D66A4F-D935-4313-93C8-CBB66039E0BD@planet.nl>
 <202104251249.13PCnaFV031741@freefriends.org>
 <DED88568-FB47-44B6-8EA2-FBBEA8805ED5@planet.nl>
In-Reply-To: <DED88568-FB47-44B6-8EA2-FBBEA8805ED5@planet.nl>
From: Clem Cole <clemc@ccc.com>
Date: Sun, 25 Apr 2021 13:11:25 -0400
Message-ID: <CAC20D2OBd7cpH-B94zxwXqzNBR-cmP4G_bH2LzbPGasXOCyFCQ@mail.gmail.com>
To: Paul Ruizendaal <pnr@planet.nl>
Content-Type: multipart/alternative; boundary="00000000000002b85205c0cf20c7"
Subject: Re: [TUHS] pcc in 8th edition
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Cc: TUHS main list <tuhs@minnie.tuhs.org>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

--00000000000002b85205c0cf20c7
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

yes  i'll mail under separate cover a scan
=E1=90=A7

On Sun, Apr 25, 2021 at 11:47 AM Paul Ruizendaal <pnr@planet.nl> wrote:

> By now found some more clues, in particular this link:
> http://computer-programming-forum.com/47-c-language/fab825b2dce1aa59.htm
>
> Apparently I am talking about PCC and PCC2 in the below question.
>
> The first post mentions 4 papers. They can be found online, apart from th=
e
> USENIX one:
> "Four Generations of Portable C Compiler" by D.M. Kristol (1986 Summer
> USENIX Conference Proceedings)
>
> Anybody have that?
>
> The second post mentions official documentation:
>
> "In porting QCC, a useful text is the "Portable C Compiler -
> Version 2 (PCC2) Internals".  It includes documentation of
> stin file formats, PCC2 tree forms, debugging flags, and
> compiler #defines.  The manual is expensive so it's worth it
> most if you buy it before you figure it all out doing a
> port.  Since the manual is based on PCC2 (and hasn't been
> updated), it's a good starting point, but doesn't have the
> latest information.=E2=80=9D
>
> Anybody have that? (It is not on bitsavers)
>
> Paul
>
> > On 25 Apr 2021, at 14:49, arnold@skeeve.com wrote:
> >
> > Not an answer to your questions, but you may want to take a look
> > at the PCC Revived project.  It lives in CVS, but I have a git mirror a=
t
> > git://github.com/arnoldrobbins/pcc-revived
> >
> > HTH,
> >
> > Arnold
> >
> > Paul Ruizendaal <pnr@planet.nl> wrote:
> >
> >> For clarity and ease of reference:
> >>
> >> - The =E2=80=9CTour of paper=E2=80=9D is for instance here:
> http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512 <
> http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512>
> >>
> >> - A machine description for the VAX that matches with that paper is fo=
r
> instance in the SysIII source:
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pc=
c/table.c
> <
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pc=
c/table.c
> >
> >>
> >> - The new style description in 8th edition is here:
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin=
 <
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin=
>
> >>
> >> - The program that translates the =E2=80=9Cstin=E2=80=9D file to a =E2=
=80=9Ctable.c=E2=80=9D file is
> here:
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/s=
ty.y
> <
> https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/s=
ty.y
> >
> >>
> >>
> >> =3D=3D=3D=3D
> >>
> >> Sometimes one thing leads to another.
> >>
> >> Following the recent mention of some retro-brew 68K single board
> systems, I decided to build a CB030 board (in progress). I figure it is a
> rough proxy for a 1980 VAX and would allow for some experimentation with
> the 32V / SysIII / 8th edition code.
> >>
> >> My first thought was to use the M68K compiler that is included with th=
e
> Blit sources (see THUS Archive for this), as I had used that before to
> explore some of the Blit source. That compiler is LP32, not ILP32 - which
> may be a source of trouble. Just changing the SZINT parameter yielded som=
e
> issues, so I started looking at the PCC source.
> >>
> >> This source does not have a =E2=80=9Ctable.c=E2=80=9D in the well know=
n format as
> described in the =E2=80=9CA tour of the portable C compiler=E2=80=9D pape=
r. Instead it uses
> a file =E2=80=9Cstin=E2=80=9D which appears to be in a more compact forma=
t and is
> translated into a =E2=80=9Ctable.c=E2=80=9D file by a new pre-processor (=
"sty.y=E2=80=9D). Then
> looking at the VAX compilers for 8th and 10th edition, these too use this
> =E2=80=9Cstin=E2=80=9D file.
> >>
> >> All the other m68K compilers (based on pcc) that I found appear to
> derive from the V7/32V/SysIII lineage, not from the 8th edition lineage.
> >>
> >> A quick google did not yield much background or documentation on the
> STY format.
> >>
> >> Anybody on this list that can shed some light on the history of the ST=
Y
> table and on how to use it? Any surviving reports or memos that would be
> useful?
> >>
> >> Many thanks in advance
> >>
> >> Paul
> >>
>
>

--00000000000002b85205c0cf20c7
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_default" style=3D"font-family:arial,he=
lvetica,sans-serif">yes=C2=A0 i&#39;ll mail under separate=C2=A0cover a sca=
n</div></div><div hspace=3D"streak-pt-mark" style=3D"max-height:1px"><img a=
lt=3D"" style=3D"width:0px;max-height:0px;overflow:hidden" src=3D"https://m=
ailfoogae.appspot.com/t?sender=3DaY2xlbWNAY2NjLmNvbQ%3D%3D&amp;type=3Dzeroc=
ontent&amp;guid=3D6102a7fd-bed3-4ddc-b260-1e8b5201ab89"><font color=3D"#fff=
fff" size=3D"1">=E1=90=A7</font></div><br><div class=3D"gmail_quote"><div d=
ir=3D"ltr" class=3D"gmail_attr">On Sun, Apr 25, 2021 at 11:47 AM Paul Ruize=
ndaal &lt;<a href=3D"mailto:pnr@planet.nl">pnr@planet.nl</a>&gt; wrote:<br>=
</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;b=
order-left:1px solid rgb(204,204,204);padding-left:1ex">By now found some m=
ore clues, in particular this link:<br>
<a href=3D"http://computer-programming-forum.com/47-c-language/fab825b2dce1=
aa59.htm" rel=3D"noreferrer" target=3D"_blank">http://computer-programming-=
forum.com/47-c-language/fab825b2dce1aa59.htm</a><br>
<br>
Apparently I am talking about PCC and PCC2 in the below question.<br>
<br>
The first post mentions 4 papers. They can be found online, apart from the =
USENIX one:<br>
&quot;Four Generations of Portable C Compiler&quot; by D.M. Kristol (1986 S=
ummer USENIX Conference Proceedings)<br>
<br>
Anybody have that?<br>
<br>
The second post mentions official documentation:<br>
<br>
&quot;In porting QCC, a useful text is the &quot;Portable C Compiler - <br>
Version 2 (PCC2) Internals&quot;.=C2=A0 It includes documentation of <br>
stin file formats, PCC2 tree forms, debugging flags, and <br>
compiler #defines.=C2=A0 The manual is expensive so it&#39;s worth it <br>
most if you buy it before you figure it all out doing a <br>
port.=C2=A0 Since the manual is based on PCC2 (and hasn&#39;t been <br>
updated), it&#39;s a good starting point, but doesn&#39;t have the <br>
latest information.=E2=80=9D<br>
<br>
Anybody have that? (It is not on bitsavers)<br>
<br>
Paul<br>
<br>
&gt; On 25 Apr 2021, at 14:49, <a href=3D"mailto:arnold@skeeve.com" target=
=3D"_blank">arnold@skeeve.com</a> wrote:<br>
&gt; <br>
&gt; Not an answer to your questions, but you may want to take a look<br>
&gt; at the PCC Revived project.=C2=A0 It lives in CVS, but I have a git mi=
rror at<br>
&gt; git://<a href=3D"http://github.com/arnoldrobbins/pcc-revived" rel=3D"n=
oreferrer" target=3D"_blank">github.com/arnoldrobbins/pcc-revived</a><br>
&gt; <br>
&gt; HTH,<br>
&gt; <br>
&gt; Arnold<br>
&gt; <br>
&gt; Paul Ruizendaal &lt;<a href=3D"mailto:pnr@planet.nl" target=3D"_blank"=
>pnr@planet.nl</a>&gt; wrote:<br>
&gt; <br>
&gt;&gt; For clarity and ease of reference:<br>
&gt;&gt; <br>
&gt;&gt; - The =E2=80=9CTour of paper=E2=80=9D is for instance here: <a hre=
f=3D"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512" rel=
=3D"noreferrer" target=3D"_blank">http://citeseerx.ist.psu.edu/viewdoc/summ=
ary?doi=3D10.1.1.48.3512</a> &lt;<a href=3D"http://citeseerx.ist.psu.edu/vi=
ewdoc/summary?doi=3D10.1.1.48.3512" rel=3D"noreferrer" target=3D"_blank">ht=
tp://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512</a>&gt;<br>
&gt;&gt; <br>
&gt;&gt; - A machine description for the VAX that matches with that paper i=
s for instance in the SysIII source: <a href=3D"https://www.tuhs.org/cgi-bi=
n/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pcc/table.c" rel=3D"noreferrer"=
 target=3D"_blank">https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/=
src/cmd/cc/vax/pcc/table.c</a> &lt;<a href=3D"https://www.tuhs.org/cgi-bin/=
utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pcc/table.c" rel=3D"noreferrer" t=
arget=3D"_blank">https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/sr=
c/cmd/cc/vax/pcc/table.c</a>&gt;<br>
&gt;&gt; <br>
&gt;&gt; - The new style description in 8th edition is here: <a href=3D"htt=
ps://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin" rel=
=3D"noreferrer" target=3D"_blank">https://www.tuhs.org/cgi-bin/utree.pl?fil=
e=3DV8/usr/src/cmd/ccom/vax/stin</a> &lt;<a href=3D"https://www.tuhs.org/cg=
i-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin" rel=3D"noreferrer" targ=
et=3D"_blank">https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/c=
com/vax/stin</a>&gt;<br>
&gt;&gt; <br>
&gt;&gt; - The program that translates the =E2=80=9Cstin=E2=80=9D file to a=
 =E2=80=9Ctable.c=E2=80=9D file is here: <a href=3D"https://www.tuhs.org/cg=
i-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/sty.y" rel=3D"noreferrer" =
target=3D"_blank">https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/c=
md/ccom/common/sty.y</a> &lt;<a href=3D"https://www.tuhs.org/cgi-bin/utree.=
pl?file=3DV8/usr/src/cmd/ccom/common/sty.y" rel=3D"noreferrer" target=3D"_b=
lank">https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/comm=
on/sty.y</a>&gt;<br>
&gt;&gt; <br>
&gt;&gt; <br>
&gt;&gt; =3D=3D=3D=3D<br>
&gt;&gt; <br>
&gt;&gt; Sometimes one thing leads to another.<br>
&gt;&gt; <br>
&gt;&gt; Following the recent mention of some retro-brew 68K single board s=
ystems, I decided to build a CB030 board (in progress). I figure it is a ro=
ugh proxy for a 1980 VAX and would allow for some experimentation with the =
32V / SysIII / 8th edition code.<br>
&gt;&gt; <br>
&gt;&gt; My first thought was to use the M68K compiler that is included wit=
h the Blit sources (see THUS Archive for this), as I had used that before t=
o explore some of the Blit source. That compiler is LP32, not ILP32 - which=
 may be a source of trouble. Just changing the SZINT parameter yielded some=
 issues, so I started looking at the PCC source.<br>
&gt;&gt; <br>
&gt;&gt; This source does not have a =E2=80=9Ctable.c=E2=80=9D in the well =
known format as described in the =E2=80=9CA tour of the portable C compiler=
=E2=80=9D paper. Instead it uses a file =E2=80=9Cstin=E2=80=9D which appear=
s to be in a more compact format and is translated into a =E2=80=9Ctable.c=
=E2=80=9D file by a new pre-processor (&quot;sty.y=E2=80=9D). Then looking =
at the VAX compilers for 8th and 10th edition, these too use this =E2=80=9C=
stin=E2=80=9D file.<br>
&gt;&gt; <br>
&gt;&gt; All the other m68K compilers (based on pcc) that I found appear to=
 derive from the V7/32V/SysIII lineage, not from the 8th edition lineage.<b=
r>
&gt;&gt; <br>
&gt;&gt; A quick google did not yield much background or documentation on t=
he STY format.<br>
&gt;&gt; <br>
&gt;&gt; Anybody on this list that can shed some light on the history of th=
e STY table and on how to use it? Any surviving reports or memos that would=
 be useful?<br>
&gt;&gt; <br>
&gt;&gt; Many thanks in advance<br>
&gt;&gt; <br>
&gt;&gt; Paul<br>
&gt;&gt; <br>
<br>
</blockquote></div>

--00000000000002b85205c0cf20c7--
