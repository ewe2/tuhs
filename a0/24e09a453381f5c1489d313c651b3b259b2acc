X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=5.0 tests=MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE autolearn=ham autolearn_force=no version=3.4.4
Received: (qmail 5117 invoked from network); 23 Feb 2021 17:45:52 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 23 Feb 2021 17:45:52 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 8A46A9C7FF; Wed, 24 Feb 2021 03:45:50 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id EECAF9C6D0;
	Wed, 24 Feb 2021 03:45:13 +1000 (AEST)
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 26D399C6D0; Wed, 24 Feb 2021 03:45:08 +1000 (AEST)
Received: from central.weird.com (unknown [198.96.117.51])
 by minnie.tuhs.org (Postfix) with ESMTP id BAFA89C6CE
 for <tuhs@tuhs.org>; Wed, 24 Feb 2021 03:45:06 +1000 (AEST)
Received: from (invalid client hostname: bind: DNS error: DNS lookup for A for
 'more.local': Unknown host)more.local
 ((no PTR matching greeting name)d207-6-82-137.bchsia.telus.net[207.6.82.137]
 port=59120) by central.weird.com([198.96.117.51] port=587)
 via TCP with esmtp (6482 bytes) (sender: <woods@mail.weird.com>)
 (ident <nobody> using UNIX) id <m1lEbk9-00r7ODC@central.weird.com>
 for <tuhs@tuhs.org>; Tue, 23 Feb 2021 12:45:05 -0500 (EST)
 (Smail-3.2.0.122-Pre 2005-Nov-17 #78 built 2020-Mar-25)
Received: from (invalid client hostname: the DNS A record (with the targegt
 address [10.0.1.129]) for the hostname 'more.local' does not match the
 expected address [10.0.1.129])more.local
 ((no PTR matching greeting name)xentastic.local[10.0.1.140] port=64731)
 by more.local([10.0.1.129] port=25) via TCP with esmtp (5976 bytes)
 (sender: <woods@mail.weird.com>) id <m1lEbV3-0036x9C@more.local>
 for <tuhs@tuhs.org>; Tue, 23 Feb 2021 09:29:29 -0800 (PST)
 (Smail-3.2.0.122-Pre 2005-Nov-17 #1 built 2015-Feb-17)
Message-Id: <m1lEbV3-0036x9C@more.local>
Date: Tue, 23 Feb 2021 09:29:29 -0800
From: "Greg A. Woods" <woods@robohack.ca>
To: The Unix Heritage Society mailing list <tuhs@tuhs.org>
In-Reply-To: <CAD-qYGqmj98onsSJ-JrF6e9k1U-YvcFb_z0Oi=ZmBV5BsBDMew@mail.gmail.com>
References: <CAKH6PiXW80gL1Hy7nVTrZ1Wm-zbKZGUj8+T8Ui4cjWdW=vV1LA@mail.gmail.com>
 <alpine.BSF.2.21.9999.2102220924220.70858@aneurin.horsfall.org>
 <alpine.DEB.2.21.2102211758180.5567@sd-119843.dedibox.fr>
 <CAD-qYGqmj98onsSJ-JrF6e9k1U-YvcFb_z0Oi=ZmBV5BsBDMew@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM/1.14.9 (=?ISO-8859-4?Q?Goj=F2?=) APEL/10.8 EasyPG/1.0.0 Emacs/25.3
 (x86_64--netbsd) MULE/6.0 (HANACHIRUSATO)
X-Face: ; j3Eth2XV8h1Yfu<eXd9JL+"t;
 iT8?{X]Fjm`Qb]>*uL{<:dQ$#E[DB0gemGZJ"J#4fH*][
 lz; @-iwMv_u\6uIEKR0KY"=MzoQH#CrqBN`nG_5B@rrM8,f~Gr&h5a\=<t0loVf0$}bP=]i3OMh"n_
 _@m4/, ~2`V=(-9LyW.)'`@E_fE^<4y7)BIe`A''/j-Y#gDNZERh%CCij'q-NA4F<|yjznEhd7=l^xH
 2.qD3o0IanGHERTW+z$G
Organization: Planix, Inc.
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: multipart/signed;
 boundary="pgp-sign-Multipart_Tue_Feb_23_09:29:04_2021-1"; micalg=pgp-sha1;
 protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Subject: Re: [TUHS] /usr separation (was: Abstractions)
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Reply-To: The Unix Heritage Society mailing list <tuhs@tuhs.org>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

--pgp-sign-Multipart_Tue_Feb_23_09:29:04_2021-1
Content-Type: text/plain; charset=US-ASCII

At Mon, 22 Feb 2021 20:31:49 -0700, Andrew Warkentin <andreww591@gmail.com> wrote:
Subject: Re: [TUHS] Abstractions
>
> On 2/21/21, Steve Nickolas <usotsuki@buric.co> wrote:
> >
> > While I've been stuck regarding bringing up a kernel, C compiler and libc
> > all together, (keeping in mind my desire to avoid gcc and glibc for the
> > project) the conceptual distribution I've been working on for some time
> > uses more or less the same abstraction as the BSDs, with distinct /bin and
> > /sbin vs. /usr/bin and /usr/sbin as I personally believe it should be,
> > that the stuff in /bin should be enough to bring up and/or run diagnostics
> > on a system, and everything else go in /usr.
>
> I don't see much of a point in maintaining the separation these days.
> /bin and /usr/bin were originally separated because it wasn't possible
> to fit everything on one disk, and (AFAIK) the separation was mostly
> maintained after that to reduce the chance of filesystem corruption
> rendering the system unbootable (which is much less of a problem
> nowadays because of journalled and log-structured filesystems).

Maybe there isn't any impetus to _create_ a separate /usr these days of
large software but even larger disks.

However I think there are at least two good reasons to _maintain_ a
separate /usr.  At least for ostensibly POSIX and Unix compatible
systems, that is.

For one there's a huge amount of deeply embedded lore, human (finger and
brain) memory, actual code, documentation, and widespread practices that
use this separation and rely on it, effectively making it a requirement.

As Steve mentions above there's also the concept of knowing the minimum
requirements for bringing up a system capable of the most basic tasks.
Of course there's likely going to be some variance in what any given
person might define as "most basic tasks", but that's most a separate
issue.  However I will give one example of why this might be a good
thing to know and preserved:  it is highly useful for those creating
"embedded" systems, or application specific systems.  They can start
with just the minimal root filesystem, and then know exactly what they
have to add in order to meet their application's requirements precisely.
(and the reasons for doing that can be much wider than many might assume)

Also the basic idea of having a root filesystem that contains just and
only what's necessary for the system to boot and run, and putting
everything else that makes the system usable to users into /usr, is also
still a worthwhile concept even just on its own.

The maintenance of an illusion of a separate /usr can of course be
easily done with a farm of symlinks, thus preserving any dependencies in
anyone's memory, documentation, or code.

However the reality of maintaining a separate minimal toolset for system
bring-up is that it cannot be reliably done without constant and
pervasive testing; and the very best (and perhaps only) way to achieve
this, especially in any smaller open-source project, is for everyone to
use it that way as much of the time as possible.  I say this from
decades long experience of slowly moving systems to having just one
partition for both root and /usr and then on occasion testing with
separate root and /usr, and every time I do this testing I find
dependencies have crept in on something in /usr for basic booting.  (and
that's even when I base my system on a platform that still tries hard to
maintain this separation of root and /usr!)

BTW, I think it was Sun that first did some of this merging of root and
/usr a very long time ago.

--
					Greg A. Woods <gwoods@acm.org>

Kelowna, BC     +1 250 762-7675           RoboHack <woods@robohack.ca>
Planix, Inc. <woods@planix.com>     Avoncote Farms <woods@avoncote.ca>

--pgp-sign-Multipart_Tue_Feb_23_09:29:04_2021-1
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit
Content-Description: OpenPGP Digital Signature

-----BEGIN PGP SIGNATURE-----

iF0EABECAB0WIQTWEnAIIlcZX4oAawJie18UwlnHhQUCYDU7aQAKCRBie18UwlnH
hYdvAJ96YPUbV62KLPmCh4Nn9CDA1GLSpwCgsgtz44r9B/KtOCiD01abtOouEZM=
=oAIN
-----END PGP SIGNATURE-----

--pgp-sign-Multipart_Tue_Feb_23_09:29:04_2021-1--
