X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.8 required=5.0 tests=DKIM_INVALID,DKIM_SIGNED,
	HTML_MESSAGE,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE autolearn=ham
	autolearn_force=no version=3.4.4
Received: (qmail 31582 invoked from network); 25 Apr 2021 12:36:42 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 25 Apr 2021 12:36:42 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 485849BFDB; Sun, 25 Apr 2021 22:36:38 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 99AFA9BD71;
	Sun, 25 Apr 2021 22:35:54 +1000 (AEST)
Authentication-Results: minnie.tuhs.org;
	dkim=fail reason="signature verification failed" (1024-bit key; unprotected) header.d=planet.nl header.i=@planet.nl header.b="oR52QCin";
	dkim-atps=neutral
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 7031C9BD71; Sun, 25 Apr 2021 22:35:51 +1000 (AEST)
Received: from cpsmtpb-ews09.kpnxchange.com (cpsmtpb-ews09.kpnxchange.com
 [213.75.39.14]) by minnie.tuhs.org (Postfix) with ESMTP id D7A709BD6E
 for <tuhs@minnie.tuhs.org>; Sun, 25 Apr 2021 22:35:45 +1000 (AEST)
Received: from cpsps-ews09.kpnxchange.com ([10.94.84.176]) by
 cpsmtpb-ews09.kpnxchange.com with Microsoft SMTPSVC(8.5.9600.16384); 
 Sun, 25 Apr 2021 14:35:35 +0200
X-Brand: 7abm2Q==
X-KPN-SpamVerdict: e1=0;e2=0;e3=0;e4=;e6=(e1=10;e3=10;e2=11;e4=10;e6=1
 0);EVW:White;BM:NotScanned;FinalVerdict:Clean
X-CMAE-Analysis: v=2.4 cv=L+d+/8f8 c=1 sm=1 tr=0 ts=60856217
 cx=a_idp_e a=aIJzBKXFL4aO3PtWP49Erg==:117
 a=soxbC+bCkqwFbqeW/W/r+Q==:17 a=x1i13A_MHe4A:10 a=3YhXtTcJ-WEA:10
 a=UFTA8MH_AAAA:8 a=AoeSMSUmAAAA:8 a=ggnPShubo2MYvB-DV0YA:9
 a=QEXdDO2ut3YA:10 a=IA4qIw_M-6cA:10 a=lgzpUMLA-OhzG1HxVpAA:9
 a=fA_hoRv8zUPj7fiZ:21 a=_W_S_7VecoQA:10 a=2UY7SMgi64q-0UtCmZ5F:22
X-CM-AcctID: kpn@feedback.cloudmark.com
Received: from smtp.kpnmail.nl ([195.121.84.43]) by cpsps-ews09.kpnxchange.com
 over TLS secured channel with Microsoft SMTPSVC(8.5.9600.16384); 
 Sun, 25 Apr 2021 14:35:35 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=planet.nl; s=planet01;
 h=to:date:message-id:subject:mime-version:content-type:from;
 bh=9CgGDT5eL+3E9KbQIp3OMAM0CrF9LSpcpjiPKdb88ww=;
 b=oR52QCinlI4iwfVWxiXM6y1ivrY21JxoXr6AzlsB0B4kIqpeyrWVAXelg7RCHhRuiF9MVyOBrDc3r
 2Ij0zIReSIrwYRYjn9LXGV9j+fipnU3CsryFb2vgbsxJvfywODd1pP8iAyyL6AFUtkIjOoZBYoTJm7
 RC4gl+dnb8Eq5Fvk=
X-KPN-VerifiedSender: Yes
X-CMASSUN: 33|m4oTADBOB1gxM/pRND8lel5D3EIzOYWtK3Sv0i/fO6txArjl2WRdrBOA1YU0YV1
 mhv6E1wTLuReHMGHDtkKbNA==
X-Originating-IP: 80.101.112.122
Received: from mba1.fritz.box (sqlite.xs4all.nl [80.101.112.122])
 by smtp.kpnmail.nl (Halon) with ESMTPSA
 id bb442615-a5c2-11eb-b98e-005056ab1411;
 Sun, 25 Apr 2021 14:35:35 +0200 (CEST)
From: Paul Ruizendaal <pnr@planet.nl>
Content-Type: multipart/alternative;
 boundary="Apple-Mail=_70C9037A-7362-434F-A77B-43AAEF1A5F56"
Mime-Version: 1.0 (Mac OS X Mail 11.5 \(3445.9.7\))
Message-Id: <15D66A4F-D935-4313-93C8-CBB66039E0BD@planet.nl>
Date: Sun, 25 Apr 2021 14:35:34 +0200
To: TUHS main list <tuhs@minnie.tuhs.org>
X-Mailer: Apple Mail (2.3445.9.7)
X-OriginalArrivalTime: 25 Apr 2021 12:35:35.0316 (UTC)
 FILETIME=[7D413D40:01D739CF]
X-RcptDomain: minnie.tuhs.org
Subject: [TUHS] pcc in 8th edition
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>


--Apple-Mail=_70C9037A-7362-434F-A77B-43AAEF1A5F56
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

For clarity and ease of reference:

- The =E2=80=9CTour of paper=E2=80=9D is for instance here: =
http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512 =
<http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512>

- A machine description for the VAX that matches with that paper is for =
instance in the SysIII source: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pcc=
/table.c =
<https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pc=
c/table.c>

- The new style description in 8th edition is here: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin =
<https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin=
>

- The program that translates the =E2=80=9Cstin=E2=80=9D file to a =
=E2=80=9Ctable.c=E2=80=9D file is here: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/st=
y.y =
<https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/s=
ty.y>


=3D=3D=3D=3D

Sometimes one thing leads to another.

Following the recent mention of some retro-brew 68K single board =
systems, I decided to build a CB030 board (in progress). I figure it is =
a rough proxy for a 1980 VAX and would allow for some experimentation =
with the 32V / SysIII / 8th edition code.

My first thought was to use the M68K compiler that is included with the =
Blit sources (see THUS Archive for this), as I had used that before to =
explore some of the Blit source. That compiler is LP32, not ILP32 - =
which may be a source of trouble. Just changing the SZINT parameter =
yielded some issues, so I started looking at the PCC source.

This source does not have a =E2=80=9Ctable.c=E2=80=9D in the well known =
format as described in the =E2=80=9CA tour of the portable C compiler=E2=80=
=9D paper. Instead it uses a file =E2=80=9Cstin=E2=80=9D which appears =
to be in a more compact format and is translated into a =E2=80=9Ctable.c=E2=
=80=9D file by a new pre-processor ("sty.y=E2=80=9D). Then looking at =
the VAX compilers for 8th and 10th edition, these too use this =
=E2=80=9Cstin=E2=80=9D file.

All the other m68K compilers (based on pcc) that I found appear to =
derive from the V7/32V/SysIII lineage, not from the 8th edition lineage.

A quick google did not yield much background or documentation on the STY =
format.

Anybody on this list that can shed some light on the history of the STY =
table and on how to use it? Any surviving reports or memos that would be =
useful?

Many thanks in advance

Paul


--Apple-Mail=_70C9037A-7362-434F-A77B-43AAEF1A5F56
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html; =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; line-break: after-white-space;" =
class=3D""><div>For clarity and ease of reference:</div><div><br =
class=3D""></div><div>- The =E2=80=9CTour of paper=E2=80=9D is for =
instance here:&nbsp;<a =
href=3D"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512"=
 =
class=3D"">http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.35=
12</a></div><div><br class=3D""></div><div>- A machine description for =
the VAX that matches with that paper is for instance in the SysIII =
source:&nbsp;<a =
href=3D"https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc=
/vax/pcc/table.c" =
class=3D"">https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd=
/cc/vax/pcc/table.c</a></div><div><br class=3D""></div><div>- The new =
style description in 8th edition is here:&nbsp;<a =
href=3D"https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/v=
ax/stin" =
class=3D"">https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/cco=
m/vax/stin</a></div><div><br class=3D""></div><div>- The program that =
translates the =E2=80=9Cstin=E2=80=9D file to a =E2=80=9Ctable.c=E2=80=9D =
file is here:&nbsp;<a =
href=3D"https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/c=
ommon/sty.y" =
class=3D"">https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/cco=
m/common/sty.y</a></div><div><br class=3D""></div><div><br =
class=3D""></div><div>=3D=3D=3D=3D</div><div><br =
class=3D""></div><div>Sometimes one thing leads to another.<br =
class=3D""><br class=3D"">Following the recent mention of some =
retro-brew 68K single board systems, I decided to build a CB030 board =
(in progress). I figure it is a rough proxy for a 1980 VAX and would =
allow for some experimentation with the 32V / SysIII / 8th edition =
code.<br class=3D""><br class=3D"">My first thought was to use the M68K =
compiler that is included with the Blit sources (see THUS Archive for =
this), as I had used that before to explore some of the Blit source. =
That compiler is LP32, not ILP32 - which may be a source of trouble. =
Just changing the SZINT parameter yielded some issues, so I started =
looking at the PCC source.<br class=3D""><br class=3D"">This source does =
not have a =E2=80=9Ctable.c=E2=80=9D in the well known format as =
described in the =E2=80=9CA tour of the portable C compiler=E2=80=9D =
paper. Instead it uses a file =E2=80=9Cstin=E2=80=9D which appears to be =
in a more compact format and is translated into a =E2=80=9Ctable.c=E2=80=9D=
 file by a new pre-processor ("sty.y=E2=80=9D). Then looking at the VAX =
compilers for 8th and 10th edition, these too use this =E2=80=9Cstin=E2=80=
=9D file.<br class=3D""><br class=3D"">All the other m68K compilers =
(based on pcc) that I found appear to derive from the V7/32V/SysIII =
lineage, not from the 8th edition lineage.<br class=3D""><br class=3D"">A =
quick google did not yield much background or documentation on the STY =
format.<br class=3D""><br class=3D"">Anybody on this list that can shed =
some light on the history of the STY table and on how to use it? Any =
surviving reports or memos that would be useful?<br class=3D""><br =
class=3D"">Many thanks in advance<br class=3D""><br class=3D"">Paul<br =
class=3D""><br class=3D""></div></body></html>=

--Apple-Mail=_70C9037A-7362-434F-A77B-43AAEF1A5F56--
