From: sms@2BSD.COM (Steven M. Schultz)
Date: Sun, 3 Mar 2002 01:47:34 -0800 (PST)
Subject: [pups] missing space in 2.11_rp_unknown
Message-ID: <200203030947.g239lYx02183@moe.2bsd.com>

Howdy -

> From: Christian Groessler <cpg at aladdin.de>
> I just last week installed v6 from tape image. I have to admit, I like
> working boot images more :-) (Since I only have an emulator and not

	An emualtor of course would use an emulated tape image ;)   That's
	how I typically install.   There are instructions and sources to
	the program to create the 'virtual tape' from the dump and tar files.

> the real thing, I don't have the need to physically transfer the stuff.)

	I keep forgetting that not everyone has a SCSI<->Qbus adaptor :)

	(it was _expensive_ at the time but gosh, after 10 years the initial
	 $ pain is long long gone and I've gotten a lot of use out of it)

> Hmm, I just did this now, but I have to admit, I only browsed the
> instructions of most of them. I followed the instructions of 412/413
> because I feared I'd forget to update init before rebooting the new kernel.

	Yes, screwing up 'init' is, to put it mildly, catastrophic.   During
	the development and testing of that set of updates I did render my
	system unbootable.   Thankfully I had a spare OS installed on the
	SCSI Zip drive - I just booted from "DU 1" and put back a working
	'init' (turns out that a 100MB Zip disk can contain a *full* 2.11BSD
	system - not a lot of space left, but it includes all sources and
	will boot).

> But otherwise I applied all patches to 442, and then rebuilt the
> kernel, rebooted, and did "make build; make installsrc". Seemed to work.

	That's fantastic to hear!  

> I noticed 2 patches, which patched /usr/src/sys/GENERIC/Makefile, but
> this is a generated file I think. At least it wasn't present, because

	Yes and No.  YES - it is generated by running './config' in /sys/conf.
	NO - it's an integral part of the OS as distributed.

> I removed /usr/src/sys/GENERIC.

	You really didn't want to do that ;)

	The Make* files for custom kernels will (100% guaranteed) diverge
	from the defaults.   That's expected.   The GENERIC kernel is a special
	case though.  When changes are made to the Make* files (overlay sizes
	change for example) the patches will not attempt to find and "fix"
	any locally created kernels - but the guarantee has always been that
	the GENERIC kernel _will_ build, thus the patches presume that the
	/sys/GENERIC directory hasn't been removed.   Indeed the kernel patches
	usually suggest rebuilding GENERIC.

	It is a Good Idea (saved my system a couple times) to keep a known
	good working _non_networking kernel (i.e. GENERIC) in /genunix.   That
	way if you are tinkering around (or a bad patch ends up in /unix) you
	have something to boot.   Many is the time (during development, testing
	of course) that I've had to rely on a /genunix to get the system
	back alive.

	Glad to hear you're current and are not seeing 'df' weirdness.   You
	may want to upgrade P11 to 2.9 though - that would, I think, have 
	fixed that problem before you saw it ;)

	Cheers,
	Steven Schultz
	sms at 2bsd.com


