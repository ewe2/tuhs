X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
	DKIM_VALID_AU,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE autolearn=ham
	autolearn_force=no version=3.4.4
Received: (qmail 9738 invoked from network); 25 Apr 2021 14:05:29 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 25 Apr 2021 14:05:29 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 627EF9C091; Mon, 26 Apr 2021 00:05:24 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 33DDB9BD71;
	Mon, 26 Apr 2021 00:04:44 +1000 (AEST)
Authentication-Results: minnie.tuhs.org;
	dkim=pass (1024-bit key; unprotected) header.d=planet.nl header.i=@planet.nl header.b="dexX5+QN";
	dkim-atps=neutral
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id AFBBB9BD71; Mon, 26 Apr 2021 00:04:37 +1000 (AEST)
Received: from cpsmtpb-ews05.kpnxchange.com (cpsmtpb-ews05.kpnxchange.com
 [213.75.39.8]) by minnie.tuhs.org (Postfix) with ESMTP id D3B049BD6E
 for <tuhs@minnie.tuhs.org>; Mon, 26 Apr 2021 00:04:32 +1000 (AEST)
Received: from cpsps-ews09.kpnxchange.com ([10.94.84.176]) by
 cpsmtpb-ews05.kpnxchange.com with Microsoft SMTPSVC(8.5.9600.16384); 
 Sun, 25 Apr 2021 16:04:29 +0200
X-Brand: 7abm2Q==
X-KPN-SpamVerdict: e1=0;e2=0;e3=0;e4=;e6=(e1=10;e3=10;e2=11;e4=10;e6=1
 0);EVW:White;BM:NotScanned;FinalVerdict:Clean
X-CMAE-Analysis: v=2.4 cv=L+d+/8f8 c=1 sm=1 tr=0 ts=608576ed
 cx=a_idp_e a=dZ5u/0G9QtS9WKCcNUBnHQ==:117
 a=soxbC+bCkqwFbqeW/W/r+Q==:17 a=x1i13A_MHe4A:10 a=IkcTkHD0fZMA:10
 a=3YhXtTcJ-WEA:10 a=p8hWPCrPAAAA:8 a=bYUg5HSxAAAA:20 a=0CDJXS7TAAAA:8
 a=UFTA8MH_AAAA:8 a=AoeSMSUmAAAA:8 a=Rs4tPlcsjQ7l0JN3l7oA:9
 a=QEXdDO2ut3YA:10 a=IA4qIw_M-6cA:10 a=hdUzUiK6lsseaELp4_5Y:22
 a=2UY7SMgi64q-0UtCmZ5F:22
X-CM-AcctID: kpn@feedback.cloudmark.com
Received: from smtp.kpnmail.nl ([195.121.84.13]) by cpsps-ews09.kpnxchange.com
 over TLS secured channel with Microsoft SMTPSVC(8.5.9600.16384); 
 Sun, 25 Apr 2021 16:04:29 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=planet.nl; s=planet01;
 h=to:message-id:date:from:subject:mime-version:content-type;
 bh=OAcz6NTW6E85bWu8yKAGk0E1HpN8BLC5Zbbqo6KF918=;
 b=dexX5+QN41/Jxk+qcEz4NE3n5DDapmwGWhp+Pl/2DiOYlGgJ5NfuZlQVzqLirkk8FJDQBfvC+4fue
 wRNcwG33oDDholhWJKo1D13WDtt4eK/nZFfvCD6qMBEnm9EXjjfyokZillvXgfUm25b7AkHYeJJpER
 w3SePEBJVR13IsX4=
X-KPN-VerifiedSender: Yes
X-CMASSUN: 33|JMcHY2CGgnm235wXSeC5d2FzUKMEiYABKGJHSrtYhHoZwc0FT7XaNolIGDAMTBh
 rq3OTgwt7sqQlBjf/jUeKCg==
X-Originating-IP: 80.101.112.122
Received: from mba1.fritz.box (sqlite.xs4all.nl [80.101.112.122])
 by smtp.kpnmail.nl (Halon) with ESMTPSA
 id 267e5f49-a5cf-11eb-8208-005056998788;
 Sun, 25 Apr 2021 16:04:29 +0200 (CEST)
Content-Type: text/plain;
	charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 11.5 \(3445.9.7\))
From: Paul Ruizendaal <pnr@planet.nl>
In-Reply-To: <202104251249.13PCnaFV031741@freefriends.org>
Date: Sun, 25 Apr 2021 16:04:28 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <EDA24F4D-D472-4377-AE83-3FCCDBF33E8F@planet.nl>
References: <15D66A4F-D935-4313-93C8-CBB66039E0BD@planet.nl>
 <202104251249.13PCnaFV031741@freefriends.org>
To: TUHS main list <tuhs@minnie.tuhs.org>
X-Mailer: Apple Mail (2.3445.9.7)
X-OriginalArrivalTime: 25 Apr 2021 14:04:29.0349 (UTC)
 FILETIME=[E8961550:01D739DB]
X-RcptDomain: minnie.tuhs.org
Subject: Re: [TUHS] pcc in 8th edition
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

Thank you for the tip!

I had seen the revival when googling around. The M68K version looks like =
an interesting option for my intended project(s). Still, I also would =
like to work with the versions from the early 80=E2=80=99s, just to get =
a better feel for the history of it all and to start with something =
small (the revival is 2-3 times the size of the early 80=E2=80=99s code =
*).

On top of that, there is something magical about real-life machine =
descriptions that fit in 400 short lines.

Paul

*) On 32V the actual virtual address space for a process was limited to =
192KB, due to how the MMU was used.


> On Apr 25, 2021, at 2:49 PM, arnold@skeeve.com wrote:
>=20
> Not an answer to your questions, but you may want to take a look
> at the PCC Revived project.  It lives in CVS, but I have a git mirror =
at
> git://github.com/arnoldrobbins/pcc-revived
>=20
> HTH,
>=20
> Arnold
>=20
> Paul Ruizendaal <pnr@planet.nl> wrote:
>=20
>> For clarity and ease of reference:
>>=20
>> - The =E2=80=9CTour of paper=E2=80=9D is for instance here: =
http://citeseerx.ist.psu.edu/viewdoc/summary?doi=3D10.1.1.48.3512
>>=20
>> - A machine description for the VAX that matches with that paper is =
for instance in the SysIII source: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DSysIII/usr/src/cmd/cc/vax/pcc=
/table.c=20
>>=20
>> - The new style description in 8th edition is here: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/vax/stin=20=

>>=20
>> - The program that translates the =E2=80=9Cstin=E2=80=9D file to a =
=E2=80=9Ctable.c=E2=80=9D file is here: =
https://www.tuhs.org/cgi-bin/utree.pl?file=3DV8/usr/src/cmd/ccom/common/st=
y.y=20
>>=20
>>=20
>> =3D=3D=3D=3D
>>=20
>> Sometimes one thing leads to another.
>>=20
>> Following the recent mention of some retro-brew 68K single board =
systems, I decided to build a CB030 board (in progress). I figure it is =
a rough proxy for a 1980 VAX and would allow for some experimentation =
with the 32V / SysIII / 8th edition code.
>>=20
>> My first thought was to use the M68K compiler that is included with =
the Blit sources (see THUS Archive for this), as I had used that before =
to explore some of the Blit source. That compiler is LP32, not ILP32 - =
which may be a source of trouble. Just changing the SZINT parameter =
yielded some issues, so I started looking at the PCC source.
>>=20
>> This source does not have a =E2=80=9Ctable.c=E2=80=9D in the well =
known format as described in the =E2=80=9CA tour of the portable C =
compiler=E2=80=9D paper. Instead it uses a file =E2=80=9Cstin=E2=80=9D =
which appears to be in a more compact format and is translated into a =
=E2=80=9Ctable.c=E2=80=9D file by a new pre-processor ("sty.y=E2=80=9D). =
Then looking at the VAX compilers for 8th and 10th edition, these too =
use this =E2=80=9Cstin=E2=80=9D file.
>>=20
>> All the other m68K compilers (based on pcc) that I found appear to =
derive from the V7/32V/SysIII lineage, not from the 8th edition lineage.
>>=20
>> A quick google did not yield much background or documentation on the =
STY format.
>>=20
>> Anybody on this list that can shed some light on the history of the =
STY table and on how to use it? Any surviving reports or memos that =
would be useful?
>>=20
>> Many thanks in advance
>>=20
>> Paul
>>=20

