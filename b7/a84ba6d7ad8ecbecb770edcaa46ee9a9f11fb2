X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=5.0 tests=HTML_MESSAGE,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE autolearn=ham autolearn_force=no
	version=3.4.4
Received: (qmail 18398 invoked from network); 1 Jun 2020 16:59:28 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 1 Jun 2020 16:59:28 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 28B129C930; Tue,  2 Jun 2020 02:59:27 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 248A29C90B;
	Tue,  2 Jun 2020 02:58:54 +1000 (AEST)
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 69C0A9C90B; Tue,  2 Jun 2020 02:58:51 +1000 (AEST)
Received: from mail-pf1-f180.google.com (mail-pf1-f180.google.com
 [209.85.210.180])
 by minnie.tuhs.org (Postfix) with ESMTPS id 8FE7C93D46
 for <tuhs@minnie.tuhs.org>; Tue,  2 Jun 2020 02:58:48 +1000 (AEST)
Received: by mail-pf1-f180.google.com with SMTP id g5so3758618pfm.10
 for <tuhs@minnie.tuhs.org>; Mon, 01 Jun 2020 09:58:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:reply-to:subject:to:references:from:organization
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-language;
 bh=fxkUgrCZ4619anWu9+wq3OK9I8MY9jYFw0/MbDfOJWk=;
 b=ImbisKcb+9O+mpstBBWlzLil9Mg53C0BH7DabE/+jl2OHSFM0xChkmOjTd7GeqUYOz
 SlFrpjJ8h+CiGXxsYGcpCi6x8/EXxDJ2dy+8OmauhHkHJDGge6pcd5T8HdzWAI57kyEC
 DWQx35FeWWXnNLjVUIKi4JkbrCs86I2a0FmRsxnTp/6KKJwwUohvUcDaUIl1Xp3dJTS9
 8z/TnKu2SYb+HHoDW9bSRT8yvbz2iSrMCmEwwHZ/f+QobN5gTGxLMoDWPylehqHHQNk9
 eS5tCyRJ+lkjBbnuqXAkIETTEXGbtycCEsyp4OemFJbliRRQIEmp+6KeBb87RNJ1yBZ0
 cPWg==
X-Gm-Message-State: AOAM5324xk6UP9mNVsHrQwL90HGVLY3g90JXnhvVubfvneYVwi0lQAKU
 WbckUDqSZRNFm4pxjkvWkP0j2ls+AMM=
X-Google-Smtp-Source: ABdhPJz0ho53c01ghspAIgjJmqrA1GkCr04eztpjKm1OcWgNPqZKbBuZ+fJTLr7dwMy2KFgaV8Evxw==
X-Received: by 2002:a63:78b:: with SMTP id 133mr21055585pgh.161.1591030727697; 
 Mon, 01 Jun 2020 09:58:47 -0700 (PDT)
Received: from ?IPv6:2601:601:a000:cb0:fd26:cc19:faf:86cf?
 ([2601:601:a000:cb0:fd26:cc19:faf:86cf])
 by smtp.gmail.com with ESMTPSA id ds11sm34250pjb.0.2020.06.01.09.58.46
 for <tuhs@minnie.tuhs.org>
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 01 Jun 2020 09:58:46 -0700 (PDT)
To: tuhs@minnie.tuhs.org
References: <ADC32296-73FD-46D4-A3D6-4EA03A956103@planet.nl>
 <CAC20D2McV_i0d=m33McRVoPda8ZVLawaKJxndYDLbqAnHLE_Wg@mail.gmail.com>
 <CANCZdfrefhG42UEx=WXrVNvrxR0oBpT1u7oz6_PitjZDAbSALw@mail.gmail.com>
From: Heinz Lycklama <heinz@osta.com>
Organization: Open Systems Technology Associates
Message-ID: <6aaca54f-83da-515f-e5b0-e3baa4560c44@osta.com>
Date: Mon, 1 Jun 2020 09:58:47 -0700
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.8.1
MIME-Version: 1.0
In-Reply-To: <CANCZdfrefhG42UEx=WXrVNvrxR0oBpT1u7oz6_PitjZDAbSALw@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------3A6BAF7F6785A69808AA6E37"
Content-Language: en-US
Subject: Re: [TUHS] non-blocking IO
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Reply-To: heinz@osta.com
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

This is a multi-part message in MIME format.
--------------3A6BAF7F6785A69808AA6E37
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit

I did  add a few new features to LSX to deal with contiguous files
and to handle asynchronous read/write's for real time applications.
They are described in the LSX paper in the 1978 BSTJ on the
UNIX Time-Sharing System.

Heinz

On 5/31/2020 9:46 AM, Warner Losh wrote:
> Sorry to top post, but LSX or Miniunix had non blocking I/O as well. 
> It was in one of the documents that Clem scanned in the last year. It 
> specifically was an experiment into how to do it.
>
> Warner
>
> On Sun, May 31, 2020, 10:07 AM Clem Cole <clemc@ccc.com 
> <mailto:clemc@ccc.com>> wrote:
>
>
>
>     On Sun, May 31, 2020 at 7:10 AM Paul Ruizendaal <pnr@planet.nl
>     <mailto:pnr@planet.nl>> wrote:
>
>          This behaviour seems to have continued into SysVR1, I’m not
>         sure when EAGAIN came into use as a return value for this use
>         case in the SysV lineage. Maybe with SysVR3 networking?
>
>     Actually, I'm pretty sure that was a product of the POSIX
>     discussions.  BSD already had networking an EWOULDBLOCK.   We had
>     argued about EWOULDBLOCK a great deal, we also were arguing about
>     signal semantics. I've forgotten many of the details, Heinz may
>     remember more than I do.  EAGAIN was created as a compromise --
>     IIRC neither system had it yet.   SVR3 networking was where it
>     went into System V, although some of the AT&T representatives were
>     none too happy about it.
>
>
>         In the Research lineage, the above SysIII approach does not
>         seem to exist, although the V8 manual page for open() says
>         under BUGS "It should be possible [...] to optionally call
>         open without the possibility of hanging waiting for carrier on
>         communication lines.” In the same location for V10 it reads
>         "It should be possible to call open without waiting for
>         carrier on communication lines.”
>
>         The July 1981 design proposals for 4.2BSD note that SysIII
>         non-blocking files are a useful feature and should be included
>         in the new system. In Jan/Feb 1982 this appears to be coded
>         up, although not all affected files are under SCCS tracking at
>         that point in time. Non-blocking behaviour is changed from the
>         SysIII semantics, in that EWOULDBLOCK is returned instead of 0
>         when progress is not possible. The non-blocking behaviour is
>         extended beyond TTY’s and pipes to sockets, with additional
>         errors (such as EINPROGRESS). At this time EWOULDBLOCK is not
>         the same error number as EGAIN.
>
>     My memory is that Keith was the BSD (CSRG) person at the POSIX
>     meeting (he, Jim McGinness of DEC, and I created PAX at one point
>     as a compromise).   I wish I could remember all of the details,
>     but this was all argued at the POSIX meetings.
>
>     As I said before the folks from AT&T just wanted to take the SVID
>     and rubber stamp it at the specification.  Part of it the problem
>     was they wanted to be free to do what things/make choices that the
>     rest of us might or might not like (for instance, they did not
>     want the sockets interface).
>
>
>         It would seem that the differences between the BSD and SysV
>         lineages in this area persisted until around 2000 or so.
>
>     Yep - cause around then POSIX started to settle out and both
>     systems began to follow it.
>


--------------3A6BAF7F6785A69808AA6E37
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 8bit

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    I did  add a few new features to LSX to deal with contiguous files<br>
    and to handle asynchronous read/write's for real time applications.<br>
    They are described in the LSX paper in the 1978 BSTJ on the<br>
    UNIX Time-Sharing System.<br>
    <br>
    Heinz<br>
    <br>
    <div class="moz-cite-prefix">On 5/31/2020 9:46 AM, Warner Losh
      wrote:<br>
    </div>
    <blockquote type="cite"
cite="mid:CANCZdfrefhG42UEx=WXrVNvrxR0oBpT1u7oz6_PitjZDAbSALw@mail.gmail.com">
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <div dir="auto">Sorry to top post, but LSX or Miniunix had non
        blocking I/O as well. It was in one of the documents that Clem
        scanned in the last year. It specifically was an experiment into
        how to do it.
        <div dir="auto"><br>
        </div>
        <div dir="auto">Warner </div>
      </div>
      <br>
      <div class="gmail_quote">
        <div dir="ltr" class="gmail_attr">On Sun, May 31, 2020, 10:07 AM
          Clem Cole &lt;<a href="mailto:clemc@ccc.com"
            moz-do-not-send="true">clemc@ccc.com</a>&gt; wrote:<br>
        </div>
        <blockquote class="gmail_quote" style="margin:0 0 0
          .8ex;border-left:1px #ccc solid;padding-left:1ex">
          <div dir="ltr">
            <div dir="ltr">
              <div class="gmail_default"
                style="font-family:arial,helvetica,sans-serif"><br>
              </div>
            </div>
            <br>
            <div class="gmail_quote">
              <div dir="ltr" class="gmail_attr">On Sun, May 31, 2020 at
                7:10 AM Paul Ruizendaal &lt;<a
                  href="mailto:pnr@planet.nl" target="_blank"
                  rel="noreferrer" moz-do-not-send="true">pnr@planet.nl</a>&gt;
                wrote:<br>
              </div>
              <blockquote class="gmail_quote" style="margin:0px 0px 0px
                0.8ex;border-left:1px solid
                rgb(204,204,204);padding-left:1ex"> This behaviour seems
                to have continued into SysVR1, I’m not sure when EAGAIN
                came into use as a return value for this use case in the
                SysV lineage. Maybe with SysVR3 networking?</blockquote>
              <div>
                <div class="gmail_default"
                  style="font-family:arial,helvetica,sans-serif">Actually,
                  I'm pretty sure that was a product of the POSIX
                  discussions.  BSD already had networking an
                  EWOULDBLOCK.   We had argued about EWOULDBLOCK a great
                  deal, we also were arguing about signal semantics. 
                  I've forgotten many of the details, Heinz may remember
                  more than I do.  EAGAIN was created as a compromise --
                  IIRC neither system had it yet.   SVR3 networking was
                  where it went into System V, although some of the
                  AT&amp;T representatives were none too happy about it.</div>
                <br>
              </div>
              <div> </div>
              <blockquote class="gmail_quote" style="margin:0px 0px 0px
                0.8ex;border-left:1px solid
                rgb(204,204,204);padding-left:1ex">
                <br>
                In the Research lineage, the above SysIII approach does
                not seem to exist, although the V8 manual page for
                open() says under BUGS "It should be possible [...] to
                optionally call open without the possibility of hanging
                waiting for carrier on communication lines.” In the same
                location for V10 it reads "It should be possible to call
                open without waiting for carrier on communication
                lines.”<br>
                <br>
                The July 1981 design proposals for 4.2BSD note that
                SysIII non-blocking files are a useful feature and
                should be included in the new system. In Jan/Feb 1982
                this appears to be coded up, although not all affected
                files are under SCCS tracking at that point in time.
                Non-blocking behaviour is changed from the SysIII
                semantics, in that EWOULDBLOCK is returned instead of 0
                when progress is not possible. The non-blocking
                behaviour is extended beyond TTY’s and pipes to sockets,
                with additional errors (such as EINPROGRESS). At this
                time EWOULDBLOCK is not the same error number as EGAIN.<br>
              </blockquote>
              <div>
                <div class="gmail_default"
                  style="font-family:arial,helvetica,sans-serif">My
                  memory is that Keith was the BSD (CSRG) person at the
                  POSIX meeting (he, Jim McGinness of DEC, and I created
                  PAX at one point as a compromise).   I wish I could
                  remember all of the details, but this was all argued
                  at the POSIX meetings.</div>
                <div class="gmail_default"
                  style="font-family:arial,helvetica,sans-serif"><br>
                </div>
                <div class="gmail_default"
                  style="font-family:arial,helvetica,sans-serif">As I
                  said before the folks from AT&amp;T just wanted to
                  take the SVID and rubber stamp it at the
                  specification.  Part of it the problem was they wanted
                  to be free to do what things/make choices that the
                  rest of us might or might not like (for instance, they
                  did not want the sockets interface).</div>
                <br>
              </div>
              <div> </div>
              <blockquote class="gmail_quote" style="margin:0px 0px 0px
                0.8ex;border-left:1px solid
                rgb(204,204,204);padding-left:1ex">
                <br>
                It would seem that the differences between the BSD and
                SysV lineages in this area persisted until around 2000
                or so.<br>
              </blockquote>
              <div>
                <div class="gmail_default"
                  style="font-family:arial,helvetica,sans-serif">Yep -
                  cause around then POSIX started to settle out and both
                  systems began to follow it.</div>
                <br>
              </div>
              <div> </div>
            </div>
          </div>
        </blockquote>
      </div>
    </blockquote>
    <br>
  </body>
</html>

--------------3A6BAF7F6785A69808AA6E37--
