X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
	DKIM_VALID_AU,HTML_MESSAGE,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE
	autolearn=ham autolearn_force=no version=3.4.4
Received: (qmail 8678 invoked from network); 26 Jul 2020 15:36:42 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 26 Jul 2020 15:36:42 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 97F579C9DF; Mon, 27 Jul 2020 01:36:38 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id AF9F99BA4F;
	Mon, 27 Jul 2020 01:35:18 +1000 (AEST)
Authentication-Results: minnie.tuhs.org;
	dkim=pass (1024-bit key; unprotected) header.d=ccc.com header.i=@ccc.com header.b="a8tDrspf";
	dkim-atps=neutral
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 4509E9BA4E; Mon, 27 Jul 2020 01:33:53 +1000 (AEST)
Received: from mail-qt1-f172.google.com (mail-qt1-f172.google.com
 [209.85.160.172])
 by minnie.tuhs.org (Postfix) with ESMTPS id DD1AC9C9FA
 for <tuhs@minnie.tuhs.org>; Mon, 27 Jul 2020 01:33:51 +1000 (AEST)
Received: by mail-qt1-f172.google.com with SMTP id a32so10427206qtb.5
 for <tuhs@minnie.tuhs.org>; Sun, 26 Jul 2020 08:33:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ccc.com; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc; bh=zfHKfEc62jUFQGm/oeNZOPovkgvxGcv84ksGfWTAbQk=;
 b=a8tDrspfTmB6x10C60+axuGwIC75kljzgs5ZS9ZOgV1hUzCPhhT9DrY/Tv3CybaQO8
 ZvcqD3PHPDLdHMYrEFon84To8rZnrgqQCS05pYY004iB01CG5jF5jlIEqFkU2QwaJ9cl
 WzyUAZLjjHfwoTUyQYW43veuXFI9IyAy2xSs4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=zfHKfEc62jUFQGm/oeNZOPovkgvxGcv84ksGfWTAbQk=;
 b=QkDXDp3yQs+0QARj6yhZYE8Z+2vTIiwPrpfoS63ZsKmST26gUwUirpeALaTLNTirRE
 9UG4Cq2gm6JwPgQ9AMVc6amrETDHHRn45jgD84R1kdf32nqWMajiKTd6fnaKY27kDrVI
 P6VPdxb+gBq6aEQSPf9FtTN5AjCMm13IFXP8YcbpA/IE/bHeTFH7+a3nQVXEqQTxSFKd
 CGLEk7EPPO3rUG9oekdiQuxb/878YQjpyGYYZ42sbNUzmhn9FOAnO7Q5opkp8+zLPsSC
 tGw7irlOqV44ASrFnGqKTca4LyU8z5nZfuaI0PIM76NHm3U6urG57rCHzIzpvUU9y1UR
 /rvg==
X-Gm-Message-State: AOAM530mc4B4wXdaIkBG56oh44e0/J0wIbJB1CwhAi5CxM78VecnoqcV
 Kps4t5I67B9XzQZvIaEerOE8ondg161CyIQ2ZaNCrA==
X-Google-Smtp-Source: ABdhPJzuxB4tHMIMj50bAeFGqb9eFbAZu2puS3DVcs+9KAJhUvnEk8ZT5Sa/NkIYeXbLy5goeCngb7ySmw93fgujVMI=
X-Received: by 2002:ac8:6f7a:: with SMTP id u26mr18677101qtv.33.1595777630754; 
 Sun, 26 Jul 2020 08:33:50 -0700 (PDT)
MIME-Version: 1.0
References: <f90685ec-29fa-d7b6-5b4d-a71aaf19476b@gmail.com>
In-Reply-To: <f90685ec-29fa-d7b6-5b4d-a71aaf19476b@gmail.com>
From: Clem Cole <clemc@ccc.com>
Date: Sun, 26 Jul 2020 11:33:24 -0400
Message-ID: <CAC20D2P7gyLFQgDF_yn6rj9+bNZZ1E87ihEBLiiH0gZwskTMfw@mail.gmail.com>
To: Will Senn <will.senn@gmail.com>
Content-Type: multipart/alternative; boundary="000000000000d26cd005ab59ee1a"
Subject: Re: [TUHS] Troff to ps
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Cc: TUHS main list <tuhs@minnie.tuhs.org>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

--000000000000d26cd005ab59ee1a
Content-Type: text/plain; charset="UTF-8"

On Sun, Jul 26, 2020 at 10:58 AM Will Senn <will.senn@gmail.com> wrote:

> All,
>
> So... I've moved on from v7 to 2.11bsd - shucks, vi and tar and co. just
> work there and everything else seems to be similar enough for what I'm
> interested in anyway. So yay, I won't be pestering y'all about vi anymore
> :). One the other hand, now I'm interested in printing the docs.
>
Wimp .. ;-)  seriously at this step, it might be easier for you as a more
modern user.

>
> 2.11bsd comes with docs in, of all places, /usr/doc.
>
Well that is where is was in V7 ;-)



> In there are makefiles for making the docs - ok, make nroff will make
> ascii docs, and troff will make troff? docs using Ossana's 'original' troff.
>
yep



> So, after adding -t to it so it didn't complain about 'typesetter busy', I
> got no errors.
>
right...



> I mounted a tape, tar'ed my .out file and untar'ed it on my macbook (did
> it for the nroff and troff output). Then I hit the first snag, groff -Tps
> -ms troff.out > whatever.ps resulted in cannot adjust line and cannot
> break line errors and groff -Tps -ms nroff.out > whatever.ps resulted in
> a bunch of double vision. I seem to recall doing this in v6 and it working
> ok (at least for nroff).
>
Well let's just save -ms and troff itself were re-implemented and there are
likely to be some small differences.
At UCB, the command would have been: tbl < input_troff_text | eqn | troff
-t -ms | vcat

vcat(1) was the virtual CAT typesetter using a Versatec Plotter.

Adobe released a source-level product called transcript, that you
recompiled and ran on V7 or later (like the PDP-11s).  My memory it was ~
$1K back in the day.  Transcript 2.0  contained a number of tools.  One was
a CAT to PS converter. Another was the tables for the ditroff to spit out
PS so: ditroff -Tps worked as expected and a program called 'enscript' that
converted from txt to PS.

All of these tools have modern FOSS equivalents, but it may take some
hunting to find them.  I think sources to transcript 2.0 can be found if
you google around.  I'm not sure Adobe ever officially made is FOSS, but
after the modern equivalent showed up, I'm not aware of them minding that
people did not have the license since it sold more printers with
PostScript.    That should just recompile on V7 or later and 'just work.'
The modern equivalent might take some backporting.

BTW: Thinking about this, I believe I remember that there is a directory on
Kirk's CD's that have a copy from UCB.  Mount his disks and poke around.
I'll try to look myself but I'm supposed to be helping my wife get ready
for a socially distanced birthday party for our great-niece [we have the
big back yard, tent et al that can handle the 6 foot part requirements].



>
> My questions:
> 1. Is there a troff to postcript conversion utility present in a stock
> 2.11 system (or even patch level 4xx system)?
>
The word "present"t is the operative term.  Probably not.



> 2. Is there a way to build postscript directly on the system?
>
Yes, see above.

> 3. Is there an alternative modern way to get to ps or pdf output from the
> nroff/troff that 2.11 has?
>
Yep - Ghostscript based tools which is what the Transcript replacements
tend to use.

>
> I'm still digging into the nroff stuff as that may be just minor diffs
> between ancient nroff macros and "modern" macros or even just errors (.sp
> -2 rather than .sp or .sp -1, .in -2 instead of .in +2), etc.
>
Be careful - that's not quite the same.  Basically groff fixed a number of
long-standing issues that older troff/ditroff had worked around.  Usually,
the difference is that the original nroff/troff has some defaults that now
need to make explicit.  But most older *roff documents can go through
modern groff just fine.  The more typical error from old documents is a
site that did not have a Versatec or later an Apple Laserwriter and only
supported nroff.   A number of documents when created for nroff will look
ugly when you run them through any version of troff (old or new) as the
document authors never took the time to deal with the differences in the
output device.



> Although, the files display ok in 2.11bsd using nroff -ms nroff.out...
>
I would expect so. I bet they are fine with troff -t or if you can find
ditroff (which also maybe on Kirk's CD) and then run the output through
vcat or transcript.   Note if you used vcat you will get some printing
facsimiles that  were there back in the day.  The reason is when Tom Ferrin
wrote vcat, the only fonts he had were the old Hershey fonts (fonts have
gotten >>so<< much better since then).   So troff is using Wang CAT4
typesetter font rules and Tim is doing the best he can to map that to
Hershey.  The PS CAT simulator in Transcript has the same issue BTW.  It's
a little better since the PS fonts are better but they don't map the 100%.
However, if you use ditroff, Adobe supplied the rules in Transcript so that
ditroff did its calculations using the proper fonts (Adobe's not Wang's).

Clem

--000000000000d26cd005ab59ee1a
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div dir=3D"ltr"><div class=3D"gmail_default" style=3D"fon=
t-family:arial,helvetica,sans-serif"><br></div></div><br><div class=3D"gmai=
l_quote"><div dir=3D"ltr" class=3D"gmail_attr">On Sun, Jul 26, 2020 at 10:5=
8 AM Will Senn &lt;<a href=3D"mailto:will.senn@gmail.com">will.senn@gmail.c=
om</a>&gt; wrote:<br></div><blockquote class=3D"gmail_quote" style=3D"margi=
n:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex=
">
 =20

   =20
 =20
  <div>
    <font face=3D"Helvetica, Arial, sans-serif">All,<br>
      <br>
      So... I&#39;ve moved on from v7 to 2.11bsd - shucks, vi and tar and
      co. just work there and everything else seems to be similar enough
      for what I&#39;m interested in anyway. So yay, I won&#39;t be pesteri=
ng
      y&#39;all about vi anymore :). One the other hand, now I&#39;m intere=
sted
      in printing the docs.<br></font></div></blockquote><div><span class=
=3D"gmail_default" style=3D"font-family:arial,helvetica,sans-serif">Wimp ..=
 ;-)=C2=A0 seriously at this step, it might be easier for you as a more mod=
ern user.</span>=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"marg=
in:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1e=
x"><div><font face=3D"Helvetica, Arial, sans-serif">
      <br>
      2.11bsd comes with docs in, of all places, /usr/doc.</font></div></bl=
ockquote><div><div class=3D"gmail_default" style=3D"font-family:arial,helve=
tica,sans-serif">Well that is where is was in V7 ;-)</div><br></div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div><font fa=
ce=3D"Helvetica, Arial, sans-serif"> In there are
      makefiles for making the docs - ok, make nroff will make ascii
      docs, and troff will make troff? docs using Ossana&#39;s &#39;origina=
l&#39;
      troff.</font></div></blockquote><div><div class=3D"gmail_default" sty=
le=3D"font-family:arial,helvetica,sans-serif">yep</div><br></div><div>=C2=
=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8e=
x;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div><font face=
=3D"Helvetica, Arial, sans-serif"> So, after adding -t to it so it didn&#39=
;t complain about
      &#39;typesetter busy&#39;, I got no errors. </font></div></blockquote=
><div><div class=3D"gmail_default" style=3D"font-family:arial,helvetica,san=
s-serif">right...</div><br></div><div>=C2=A0</div><blockquote class=3D"gmai=
l_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,20=
4,204);padding-left:1ex"><div><font face=3D"Helvetica, Arial, sans-serif">I=
 mounted a tape, tar&#39;ed my
      .out file and untar&#39;ed it on my macbook (did it for the nroff and
      troff output). Then I hit the first snag, groff -Tps -ms troff.out
      &gt; <a href=3D"http://whatever.ps" target=3D"_blank">whatever.ps</a>=
 resulted in cannot adjust line and cannot break
      line errors and </font><font face=3D"Helvetica, Arial, sans-serif"><f=
ont face=3D"Helvetica, Arial, sans-serif">groff -Tps -ms nroff.out
        &gt; <a href=3D"http://whatever.ps" target=3D"_blank">whatever.ps</=
a> resulted in a bunch of double vision. I seem to
        recall doing this in v6 and it working ok (at least for nroff).<br>=
</font></font></div></blockquote><div><div class=3D"gmail_default" style=3D=
"font-family:arial,helvetica,sans-serif">Well let&#39;s just save -ms and t=
roff itself were re-implemented and there are likely to be some small diffe=
rences.</div><div class=3D"gmail_default" style=3D"font-family:arial,helvet=
ica,sans-serif">At UCB, the command would have been: tbl &lt; input_troff_t=
ext | eqn | troff -t -ms | vcat=C2=A0</div><div class=3D"gmail_default" sty=
le=3D"font-family:arial,helvetica,sans-serif"><br></div><div class=3D"gmail=
_default" style=3D"font-family:arial,helvetica,sans-serif">vcat(1) was the =
virtual CAT typesetter using a Versatec Plotter.</div><div class=3D"gmail_d=
efault" style=3D"font-family:arial,helvetica,sans-serif"><br></div><div cla=
ss=3D"gmail_default" style=3D"font-family:arial,helvetica,sans-serif">Adobe=
 released a source-level product called transcript, that you recompiled and=
 ran on V7 or later (like the PDP-11s).=C2=A0 My memory it=C2=A0was=C2=A0~ =
$1K back in the day.=C2=A0 Transcript 2.0=C2=A0 contained a number of tools=
.=C2=A0 One was a CAT to PS converter. Another was the tables for the ditro=
ff to spit out PS so: ditroff -Tps worked as expected and a program called =
&#39;enscript&#39; that converted from txt=C2=A0to PS.</div><div class=3D"g=
mail_default" style=3D"font-family:arial,helvetica,sans-serif"><br></div><d=
iv class=3D"gmail_default" style=3D"font-family:arial,helvetica,sans-serif"=
>All of these tools have modern FOSS equivalents, but it may take some hunt=
ing to find them.=C2=A0 I think sources to transcript 2.0 can be found if y=
ou google around.=C2=A0 I&#39;m not sure Adobe ever officially=C2=A0made is=
 FOSS, but after the modern equivalent showed up, I&#39;m not aware of them=
 minding that people did not have the license since it sold more printers w=
ith PostScript.=C2=A0 =C2=A0 That should just recompile on V7 or later and =
&#39;just work.&#39;=C2=A0 The modern equivalent might take some backportin=
g.</div><div class=3D"gmail_default" style=3D"font-family:arial,helvetica,s=
ans-serif"><br></div><div class=3D"gmail_default" style=3D"font-family:aria=
l,helvetica,sans-serif">BTW: Thinking about this, I believe I remember that=
 there is a directory on Kirk&#39;s CD&#39;s that have a copy from UCB.=C2=
=A0 Mount his disks and poke around.=C2=A0 I&#39;ll try to look myself but =
I&#39;m supposed to be helping=C2=A0my wife get ready for a socially distan=
ced birthday party for our great-niece [we have the big back yard, tent et =
al that can handle the=C2=A06 foot part requirements].</div><br></div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div><font fa=
ce=3D"Helvetica, Arial, sans-serif"><font face=3D"Helvetica, Arial, sans-se=
rif">
        <br>
        My questions:<br>
        1. Is there a troff to postcript conversion utility present in a
        stock 2.11 system (or even patch level 4xx system)?<br></font></fon=
t></div></blockquote><div><div class=3D"gmail_default" style=3D"font-family=
:arial,helvetica,sans-serif">The word &quot;present&quot;t is the operative=
 term.=C2=A0 Probably not.=C2=A0 </div><br></div><div>=C2=A0</div><blockquo=
te class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px =
solid rgb(204,204,204);padding-left:1ex"><div><font face=3D"Helvetica, Aria=
l, sans-serif"><font face=3D"Helvetica, Arial, sans-serif">
        2. Is there a way to build postscript directly on the system?<br></=
font></font></div></blockquote><div class=3D"gmail_default" style=3D"font-f=
amily:arial,helvetica,sans-serif">Yes, see above.</div><div class=3D"gmail_=
default" style=3D"font-family:arial,helvetica,sans-serif"></div><blockquote=
 class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px so=
lid rgb(204,204,204);padding-left:1ex"><div><font face=3D"Helvetica, Arial,=
 sans-serif"><font face=3D"Helvetica, Arial, sans-serif">
        3. Is there an alternative modern way to get to ps or pdf output
        from the nroff/troff that 2.11 has?<br></font></font></div></blockq=
uote><div><span class=3D"gmail_default" style=3D"font-family:arial,helvetic=
a,sans-serif">Yep - Ghostscript based tools which is what the Transcript re=
placements tend to use.</span>=C2=A0</div><blockquote class=3D"gmail_quote"=
 style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);p=
adding-left:1ex"><div><font face=3D"Helvetica, Arial, sans-serif"><font fac=
e=3D"Helvetica, Arial, sans-serif">
        <br>
        I&#39;m still digging into the nroff stuff as that may be just mino=
r
        diffs between ancient nroff macros and &quot;modern&quot; macros or=
 even
        just errors (.sp -2 rather than .sp or .sp -1, .in -2 instead of
        .in +2), etc.</font></font></div></blockquote><div><div class=3D"gm=
ail_default" style=3D"font-family:arial,helvetica,sans-serif">Be careful - =
that&#39;s not quite the same.=C2=A0 Basically groff fixed a number of long=
-standing issues that older troff/ditroff=C2=A0had worked around.=C2=A0 Usu=
ally, the difference is that the original nroff/troff has some defaults tha=
t now need to make explicit.=C2=A0 But most older *roff documents can go th=
rough modern groff just fine.=C2=A0 The more typical error from old documen=
ts is a site that did not have a Versatec or later an Apple Laserwriter and=
 only supported nroff.=C2=A0 =C2=A0A number of documents when created for n=
roff will look ugly when you run them through any version of troff (old or =
new) as the document authors never took the time to deal with the differenc=
es in the output device.</div><br></div><div>=C2=A0</div><blockquote class=
=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rg=
b(204,204,204);padding-left:1ex"><div><font face=3D"Helvetica, Arial, sans-=
serif"><font face=3D"Helvetica, Arial, sans-serif"> Although, the files dis=
play ok in 2.11bsd using
        nroff -ms nroff.out...<br></font></font></div></blockquote><div><sp=
an class=3D"gmail_default" style=3D"font-family:arial,helvetica,sans-serif"=
>I would expect so. I bet they are fine with troff -t or if you can find di=
troff (which also maybe on Kirk&#39;s CD) and then run the output through v=
cat or transcript.=C2=A0 =C2=A0Note if you used vcat you will get some prin=
ting facsimiles=C2=A0that </span>=C2=A0<span class=3D"gmail_default" style=
=3D"font-family:arial,helvetica,sans-serif">were there back in the day.=C2=
=A0 The reason is when Tom Ferrin wrote vcat, the only fonts he had were th=
e old Hershey fonts (fonts have gotten &gt;&gt;so&lt;&lt; much better since=
 then).=C2=A0 =C2=A0So troff is using Wang CAT4 typesetter font rules and T=
im is doing the best he can to map that to Hershey.=C2=A0 The PS CAT simula=
tor in Transcript has the same issue BTW.=C2=A0 It&#39;s a little better si=
nce the PS fonts are better but they don&#39;t map the 100%.=C2=A0 However,=
 if you use ditroff, Adobe supplied the rules in Transcript so that ditroff=
 did its calculations using the proper fonts (Adobe&#39;s not Wang&#39;s).<=
/span></div><div><span class=3D"gmail_default" style=3D"font-family:arial,h=
elvetica,sans-serif"><br></span></div><div><span class=3D"gmail_default" st=
yle=3D"font-family:arial,helvetica,sans-serif">Clem</span></div></div></div=
>

--000000000000d26cd005ab59ee1a--
