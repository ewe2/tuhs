From: jrvalverde@cnb.csic.es (Jose R. Valverde)
Date: Thu, 5 Jun 2008 17:07:30 +0200
Subject: [TUHS] Introduction
In-Reply-To: <20080604135729.4c50e178@veda.cnb.uam.es>
References: <20080604135729.4c50e178@veda.cnb.uam.es>
Message-ID: <20080605170730.35320095@veda.cnb.uam.es>

> so i created the following C code out of it:
> 
> u.u_count = (-u.u_segmts[NUSEGS-1].sg_limit+0x100)<<8;
> ...
> 
> done by having 256² - 256*x. This was great. With that information I wrote
> in C:
> 
> u.u_count = (256-u.u_segmts[NUSEGS-1].sg_limit)<<8;


What happens if you use instead

	u.u_count = (~(-u.u_segmts[NUSEGS-1].sg_limit))<<8;

That should mean the same, would avoid using a hard coded value and the
compiler may optimize it to the same assembly.

I hope you understand that any advice will probably be faulty as we can
not check the code generated by our suggestions as you do. As long as you
don't mind that, it's OK.

				j
-- 
	These opinions are mine and only mine. Hey man, I saw them first!

			    José R. Valverde

	De nada sirve la Inteligencia Artificial cuando falta la Natural


