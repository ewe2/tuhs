From: owner-pups@minnie.cs.adfa.edu.au (owner-pups@minnie.cs.adfa.edu.au)
Date: Mon, 2 Apr 2001 06:30:49 +1000 (EST)
Subject: No subject
Message-ID: <200104012030.GAA20880@minnie.cs.adfa.edu.au>


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id HAA21273
	for pups-liszt; Mon, 2 Apr 2001 07:57:37 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Date: Mon, 2 Apr 2001 07:57:37 +1000 (EST)
From: owner-pups@minnie.cs.adfa.edu.au
Message-Id: <200104012157.HAA21273 at minnie.cs.adfa.edu.au>
To: undisclosed-recipients:;


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id MAA27190
	for pups-liszt; Wed, 4 Apr 2001 12:48:08 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from femail19.sdc1.sfba.home.com (femail19.sdc1.sfba.home.com [24.0.95.128])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id MAA27186
	for <pups-digest at minnie.cs.adfa.edu.au>; Wed, 4 Apr 2001 12:48:04 +1000 (EST)
	(envelope-from cube1 at home.com)
Received: from ddjay.home.com ([65.3.254.22])
          by femail19.sdc1.sfba.home.com
          (InterMail vM.4.01.03.20 201-229-121-120-20010223) with ESMTP
          id <20010404024047.JAHJ21537.femail19.sdc1.sfba.home.com at ddjay.home.com>;
          Tue, 3 Apr 2001 19:40:47 -0700
Message-Id: <4.3.2.7.2.20010403213011.044d3da0 at cirithi>
X-Sender: cube1 at cirithi
X-Mailer: QUALCOMM Windows Eudora Version 4.3.2
Date: Tue, 03 Apr 2001 21:40:08 -0500
To: pups-digest at minnie.cs.adfa.edu.au
From: Jay Jaeger <cube1@home.com>
Subject: [pups] RL and RK Last Cylinder Warning (RE: VTServer)
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Something I thought is worth warning folks about.  For RL01, RL02, RK06 and 
RK07 (at least), the last cylinder is RESERVED for bad blocks and the pack 
serial number.

Except for maintaining the bad block list, software should not write there, 
and should at least preserve the serial number (and its mirror copies that 
are usually present) when doing so.

The current implementation of VTServer (in particular, the code in the "hk" 
driver in pdpvtstand) does not appear to take that into account.

The problem is that if you take a *full* pack image from a pack and then 
restore that *full* pack image to a different pack, you will wipe out the 
latter's bad block info (and perhaps write in some areas that are known not 
to be very good).

Traditionally, Unix variants dealt with this by insisting that you use 
error free (Suffix -EF in the DEC part number on the pack) disk 
packs.  However, if you are using real hardware you may no longer have 
those available.

Just a "heads up".

(PS:  FYI I am currently working on a flavor of the "vt" driver that will 
work over a DR11C.  With the proper cabling (it takes different cables for 
input and output) you can manage over 1MB per minute that way -- about 20 
times faster than a serial port.  The code is pretty simple and should work 
on any old "plain jane" parallel port.  (I do not know how it would behave 
on a modern serial port)).

I had this working a long time ago, and VTServer prompted me to dredge it 
up again and test it.  It still works with my PIII 350 under Win98 (it is 
old DOS code that accesses the old style parallel port directly).  Within a 
few weeks I expect to provide a "pt" device driver for pdpvtstand, and 
cabling information and some source code for the PC side (which would be an 
example only).  The protocol as I currently use it has no 
checksum.  However I plan to modify "copy" to provide that information so 
that the results can be checked after the transfer.

Jay Jaeger
---	
Jay R. Jaeger					The Computer Collection
cube1 at home.com			visit http://members.home.net/thecomputercollection


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id NAA27320
	for pups-liszt; Wed, 4 Apr 2001 13:11:21 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from henry.cs.adfa.edu.au (henry.cs.adfa.edu.au [131.236.21.158])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id NAA27316
	for <pups at minnie.cs.adfa.edu.au>; Wed, 4 Apr 2001 13:11:19 +1000 (EST)
	(envelope-from wkt at henry.cs.adfa.edu.au)
Received: (from wkt at localhost)
	by henry.cs.adfa.edu.au (8.11.2/8.9.3) id f3434A010297;
	Wed, 4 Apr 2001 13:04:10 +1000 (EST)
	(envelope-from wkt)
From: Warren Toomey <wkt@henry.cs.adfa.edu.au>
Message-Id: <200104040304.f3434A010297 at henry.cs.adfa.edu.au>
Subject: [pups] Re: RL and RK Last Cylinder Warning (RE: VTServer)
In-Reply-To: <4.3.2.7.2.20010403213011.044d3da0 at cirithi> from Jay Jaeger at "Apr
 3, 2001 09:40:08 pm"
To: Jay Jaeger <cube1 at home.com>
Date: Wed, 4 Apr 2001 13:04:10 +1000 (EST)
CC: PDP-11 Unix Preservation Society <pups at minnie.cs.adfa.edu.au>
Reply-To: wkt at cs.adfa.edu.au
X-Mailer: ELM [version 2.4ME+ PL68 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

In article by Jay Jaeger:
> Something I thought is worth warning folks about.  For RL01, RL02, RK06 and 
> RK07 (at least), the last cylinder is RESERVED for bad blocks and the pack 
> serial number.

Jay, I've added your warnings to the new version, vtserver2.3a-20010404.tar.gz,
which I just put out a few seconds ago. This also contains a patch to the
ODT download code from Charles H Dickman <chd_1 at nktelco.net>:

	I made some changes to the source to wait for the current memory
	value and trailing space to be echoed by ODT. I also had a bit
	of trouble if the output values were not padded with 0's. I think
	this is because any character other than a valid octal digit or
	a return or a ctrl-j is illegal in that context and causes an error.

ftp://minnie.cs.adfa.edu.au/pub/PDP-11/Vtserver/vtserver2.3a-20010404.tar.gz
 
> (PS:  FYI I am currently working on a flavor of the "vt" driver that will 
> work over a DR11C.  With the proper cabling (it takes different cables for 
> input and output) you can manage over 1MB per minute that way -- about 20 
> times faster than a serial port.  The code is pretty simple and should work 
> on any old "plain jane" parallel port.  (I do not know how it would behave 
> on a modern serial port)).
> 
> I had this working a long time ago, and VTServer prompted me to dredge it 
> up again and test it.  It still works with my PIII 350 under Win98 (it is 
> old DOS code that accesses the old style parallel port directly).  Within a 
> few weeks I expect to provide a "pt" device driver for pdpvtstand, and 
> cabling information and some source code for the PC side (which would be an 
> example only).  The protocol as I currently use it has no 
> checksum.  However I plan to modify "copy" to provide that information so 
> that the results can be checked after the transfer.
> Jay Jaeger

Jay, if you could write a ptboot.s bootstrapper and a pt.c driver
which speaks the same protocol [should be easy - just use vt.c and
rewrite vtgetc() and vtputc()], then I'll happily add it to the
next version.

Cheers,
	Warren

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id KAA33889
	for pups-liszt; Thu, 5 Apr 2001 10:11:17 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from henry.cs.adfa.edu.au (henry.cs.adfa.edu.au [131.236.21.158])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id KAA33880;
	Thu, 5 Apr 2001 10:11:13 +1000 (EST)
	(envelope-from wkt at henry.cs.adfa.edu.au)
Received: (from wkt at localhost)
	by henry.cs.adfa.edu.au (8.11.2/8.9.3) id f35042G12856;
	Thu, 5 Apr 2001 10:04:02 +1000 (EST)
	(envelope-from wkt)
From: Warren Toomey <wkt@henry.cs.adfa.edu.au>
Message-Id: <200104050004.f35042G12856 at henry.cs.adfa.edu.au>
Subject: [pups] Ancient Unix licenses? (fwd)
To: PDP-11 Unix Preservation Society <pups at minnie.cs.adfa.edu.au>,
        The Unix Heritage Society <tuhs at minnie.cs.adfa.edu.au>
Date: Thu, 5 Apr 2001 10:04:02 +1000 (EST)
Reply-To: wkt at cs.adfa.edu.au
X-Mailer: ELM [version 2.4ME+ PL68 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

All,
	I've received this e-mail from a student at NYU Law Department.
If any of you have copies of old Unix licenses, and your organisation
would be prepared to release copies to Greg, could you contact him.

Also, if you could send me copies of your licenses, that would be
great too. About 8 people have already done this, and I am happy to
act as a repository for this old information.

Cheers,
	Warren

----- Forwarded message from gmp216 at nyu.edu -----
 From gmp at zebware.com Thu Apr  5 09:49:39 2001
 To: wkt at cs.adfa.edu.au
 From: gmp216 at nyu.edu
 Subject: Ancient Unix licenses?
 Date: Wed, 04 Apr 2001 23:49:31 +0000
 Sender: gmp at zebware.com

Peter Salus identified you as the collector of old Unix versions, so I
thought you might be able to help me with a project I am working on.
I am studying the legal history of Unix for a colloquium at NYU, and I
would really love to see copies of the old Unix licenses that the various
universities signed. Do you happen to have access to any of these? All I
can find are the transcribed tape labels from your archive which say things
like "subject to the software agreement you have with Western Electric."
Thanks! And thank you also for pushing to make the source code available.
That has been an immeasurable help.

---
Greg Pomerantz
NYU Law, J.D. '02
----- End of forwarded message from gmp216 at nyu.edu -----

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id SAA36569
	for pups-liszt; Thu, 5 Apr 2001 18:36:58 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from mserv1e.vianw.co.uk (mserv1e.vianw.co.uk [195.102.240.97])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id SAA36564
	for <pups at minnie.cs.adfa.edu.au>; Thu, 5 Apr 2001 18:36:51 +1000 (EST)
	(envelope-from pete at dunnington.u-net.com)
Received: from p92.nas2.is5.u-net.net ([195.102.200.220] helo=indy.dunnington.u-net.com)
	by mserv1e.vianw.co.uk with smtp (Exim 3.22 #5)
	id 14l592-0006pL-00
	for pups at minnie.cs.adfa.edu.au; Thu, 05 Apr 2001 09:29:32 +0100
Received: by indy.dunnington.u-net.com (951211.SGI.8.6.12.PATCH1502/980207.PNT)
	for pups at minnie.cs.adfa.edu.au id HAA16568; Thu, 5 Apr 2001 07:43:42 GMT
Date: Thu, 5 Apr 2001 07:43:42 GMT
From: pete@dunnington.u-net.com (Pete Turnbull)
Message-Id: <10104050843.ZM16566 at indy.dunnington.u-net.com>
In-Reply-To: Warren Toomey <wkt at henry.cs.adfa.edu.au>
        "[pups] Ancient Unix licenses? (fwd)" (Apr  5, 10:04)
References: <200104050004.f35042G12856 at henry.cs.adfa.edu.au>
X-Mailer: Z-Mail (3.2.3 08feb96 MediaMail)
To: <pups at minnie.cs.adfa.edu.au>
Subject: Re: [pups] Ancient Unix licenses? (fwd)
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

On Apr 5, 10:04, Warren Toomey wrote:
> All,
> 	I've received this e-mail from a student at NYU Law Department.
> If any of you have copies of old Unix licenses, and your organisation
> would be prepared to release copies to Greg, could you contact him.
>
> Also, if you could send me copies of your licenses, that would be
> great too. About 8 people have already done this, and I am happy to
> act as a repository for this old information.

Warren, do you still have copies of mine, or do you want another set?

-- 

Pete						Peter Turnbull
						Network Manager
						Dept. of Computer Science
						University of York

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id WAA37756
	for pups-liszt; Thu, 5 Apr 2001 22:50:22 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from klamath.leguin.org.uk (pc250-oxf1.cable.ntl.com [62.254.132.250])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id WAA37752
	for <pups at minnie.cs.adfa.edu.au>; Thu, 5 Apr 2001 22:50:18 +1000 (EST)
	(envelope-from ejb at klamath.leguin.org.uk)
Received: from localhost (localhost [[UNIX: localhost]])
	by klamath.leguin.org.uk (8.9.3/8.9.3/Debian 8.9.3-21) id MAA27857
	for pups at minnie.cs.adfa.edu.au; Thu, 5 Apr 2001 12:42:59 GMT
Content-Type: text/plain;
  charset="iso-8859-1"
From: Edward Brocklesby <ejb@leguin.org.uk>
Organization: Leguin Network Services
To: pups at minnie.cs.adfa.edu.au
Subject: [pups] Public access 2.11BSD system
Date: Thu, 5 Apr 2001 12:42:53 +0000
X-Mailer: KMail [version 1.2]
MIME-Version: 1.0
Message-Id: <01040512425302.26560 at klamath.leguin.org.uk>
Content-Transfer-Encoding: 8bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi all,

I've set up a free public 2.11BSD system, for anyone who wants to try it..
To create an account, just telnet to klamath.ddts.net.

I'm not sure if this is the right place to post this, but it seems 
appropriate :>

	-larne-

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id GAA40397
	for pups-liszt; Fri, 6 Apr 2001 06:44:44 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from mail4.microsoft.com (mail4.microsoft.com [131.107.3.122])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with SMTP id GAA40393
	for <pups at minnie.cs.adfa.edu.au>; Fri, 6 Apr 2001 06:44:40 +1000 (EST)
	(envelope-from iking at microsoft.com)
Received: from 157.54.9.100 by mail4.microsoft.com (InterScan E-Mail VirusWall NT); Thu, 05 Apr 2001 12:36:57 -0700 (Pacific Daylight Time)
Received: from red-msg-06.redmond.corp.microsoft.com ([157.54.12.71]) by inet-imc-03.redmond.corp.microsoft.com with Microsoft SMTPSVC(5.0.2195.2883);
	 Thu, 5 Apr 2001 13:36:57 -0700
x-mimeole: Produced By Microsoft Exchange V6.0.4418.65
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Subject: [pups] LP on Unix 6th Ed?
Date: Thu, 5 Apr 2001 13:36:56 -0700
Message-ID: <8D25F244B8274141B5D313CA4823F39C0235D22F at red-msg-06.redmond.corp.microsoft.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: LP on Unix 6th Ed?
Thread-Index: AcC+EBtLbH33w5TmTniAo/EfTbQpZQ==
From: "Ian King" <iking@microsoft.com>
To: <pups at minnie.cs.adfa.edu.au>
X-OriginalArrivalTime: 05 Apr 2001 20:36:57.0563 (UTC) FILETIME=[288FA2B0:01C0BE10]
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by minnie.cs.adfa.edu.au id GAA40394
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

I've been scratching my head over how to set up the printer in 6th
Edition UNIX.  Any hints?  I tried mknod'ing /dev/lp with a variety of
major device numbers and then redirecting ls to it, with no success.
The printer interface is at the "usual" address on my PDP-11/34, and
works under another OS.  w

TIA -- Ian 

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id JAA41188
	for pups-liszt; Fri, 6 Apr 2001 09:28:21 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from psychwarp.psych.usyd.edu.au (psychwarp.psych.usyd.edu.au [129.78.83.26])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id JAA41184
	for <pups at minnie.cs.adfa.edu.au>; Fri, 6 Apr 2001 09:28:19 +1000 (EST)
	(envelope-from johnh at psychwarp.psych.usyd.edu.au)
Received: (from johnh at localhost)
	by psychwarp.psych.usyd.edu.au (8.9.1a/8.9.1) id JAA28539
	for pups at minnie.cs.adfa.edu.au; Fri, 6 Apr 2001 09:21:03 +1000 (EST)
Date: Fri, 6 Apr 2001 09:21:03 +1000 (EST)
From: John Holden <johnh@psych.usyd.edu.au>
Message-Id: <200104052321.JAA28539 at psychwarp.psych.usyd.edu.au>
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] LP on Unix 6th Ed?
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk


The lp driver usually had a major device number of 2, so 'mknod /dev/lp c 2 0'
should work, but the kernel may not have been built to support line printers.

Check in /usr/sys/conf/c.c for an entry in the 'cdevsw' table for the
'lp' entries (and the major device position). If there are null entries,
either edit c.c, compile it and relink the kernel, or edit the 'run' script
in /usr/sys/conf/ and add 'lp' after the 'mkconf' (but before the 'done')
and run the script to rebuilt the kernel.



Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id OAA42567
	for pups-liszt; Fri, 6 Apr 2001 14:19:22 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from mail.noos.fr (verlaine.noos.net [212.198.2.73])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id OAA42563
	for <pups at minnie.cs.adfa.edu.au>; Fri, 6 Apr 2001 14:19:18 +1000 (EST)
	(envelope-from clefevre at poboxes.com)
Received: (qmail 2474546 invoked by uid 0); 6 Apr 2001 04:12:01 -0000
Received: from d165.dhcp212-198-231.noos.fr (HELO gits.dyndns.org) ([212.198.231.165]) (envelope-sender <clefevre at poboxes.com>)
          by verlaine.noos.net (qmail-ldap-1.03) with DES-CBC3-SHA encrypted SMTP
          for <pups at minnie.cs.adfa.edu.au>; 6 Apr 2001 04:12:01 -0000
Received: (from root at localhost)
	by gits.dyndns.org (8.11.3/8.11.3) id f364BvC75545;
	Fri, 6 Apr 2001 06:11:57 +0200 (CEST)
	(envelope-from clefevre at poboxes.com)
To: Edward Brocklesby <ejb at leguin.org.uk>
Cc: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] Public access 2.11BSD system
References: <01040512425302.26560 at klamath.leguin.org.uk>
X-Face: V|+c;4!|B?E%BE^{E6);aI.[<<r#uCVjK"~Ke!@0vxS/.,wki/c|uVnNV!BA-_gY2sfoGc3
        f{#/$PT>97Zd*>^#%Y5Cxv;%Y[PT-LW3;A:fRrJ8+^k"e7 at +30g0YD0*^^3jgyShN7o?a]C
        la*Zv'5NA,=963bM%J^o]C
Reply-To: Cyrille Lefevre <clefevre at poboxes.com>
In-Reply-To: <01040512425302.26560 at klamath.leguin.org.uk>
Mail-Copies-To: never
Original-Sender: clefevre-lists at noos.fr
From: Cyrille Lefevre <clefevre-lists@noos.fr>
Date: 06 Apr 2001 06:11:56 +0200
Message-ID: <zodull9v.fsf at gits.dyndns.org>
Lines: 19
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.1 (Cuyahoga Valley)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Edward Brocklesby <ejb at leguin.org.uk> writes:

> I've set up a free public 2.11BSD system, for anyone who wants to try it..
> To create an account, just telnet to klamath.ddts.net.

would be interresting, but :

# telnet klamath.ddts.net
Trying 62.254.132.250...
telnet: connect to address 62.254.132.250: No route to host

my ip address is gits.dyndns.org (currently 212.198.231.165) and I
live in france.  are there any restrictions anywhere or the machine
is down ?

Cyrille.
--
home: mailto:clefevre at poboxes.com   UNIX is user-friendly; it's just particular
work: mailto:Cyrille.Lefevre at edf.fr   about who it chooses to be friends with.

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id UAA43967
	for pups-liszt; Fri, 6 Apr 2001 20:07:12 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from klamath.leguin.org.uk (pc250-oxf1.cable.ntl.com [62.254.132.250])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id UAA43963
	for <pups at minnie.cs.adfa.edu.au>; Fri, 6 Apr 2001 20:07:07 +1000 (EST)
	(envelope-from ejb at klamath.leguin.org.uk)
Received: from localhost (localhost [[UNIX: localhost]])
	by klamath.leguin.org.uk (8.9.3/8.9.3/Debian 8.9.3-21) id JAA03188
	for pups at minnie.cs.adfa.edu.au; Fri, 6 Apr 2001 09:59:36 GMT
Content-Type: text/plain;
  charset="iso-8859-1"
From: Edward Brocklesby <ejb@leguin.org.uk>
Organization: Leguin Network Services
To: pups at minnie.cs.adfa.edu.au
Subject: [pups] STYX and 2.11BSD licensing
Date: Fri, 6 Apr 2001 09:59:33 +0000
X-Mailer: KMail [version 1.2]
MIME-Version: 1.0
Message-Id: <01040609593307.26560 at klamath.leguin.org.uk>
Content-Transfer-Encoding: 8bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi all.

A couple of things..

First, sorry to post about this again so soon, but styx is moving to a new 
location, so any accounts created from now on will be removed later today
when it's moved.

Second, where do I stand on /usr/src/ permissions? Can I allow read access
to it, or is that effectively distributing 2.11BSD source, against SCO's 
license? Is there any way to verify who has obtained a license, and add them
to a src group?

Thanks,
	-larne-

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id DAA48500
	for pups-liszt; Sat, 7 Apr 2001 03:50:14 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from smtp.hccnet.nl (smtp.hccnet.nl [62.251.0.13])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id DAA48496
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 03:50:09 +1000 (EST)
	(envelope-from lars at fwn.rug.nl)
Received: from fwn.rug.nl by smtp.hccnet.nl
	via uds198-43.dial.hccnet.nl [62.251.43.198] with ESMTP for <pups at minnie.cs.adfa.edu.au>
	id TAA18614 (8.8.5/1.13); Fri, 6 Apr 2001 19:42:46 +0200 (MET DST)
Message-ID: <3ACE00BB.FE5D18F8 at fwn.rug.nl>
Date: Fri, 06 Apr 2001 19:45:31 +0200
From: "Lars J. Buitinck" <lars@fwn.rug.nl>
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: nl,nl-BE,en,en-US,en-GB,af,de-DE,de-AT,de-CH,fr,fr-FR,fr-BE,fr-CA
MIME-Version: 1.0
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
References: <01040609593307.26560 at klamath.leguin.org.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Couple of suggestions:

1.  Make a user account that automatically replies to email by sending a
user a copy of the SCO license and an automatically generated code,
which the user should then send back to be added to the src group.  I
could write a program for you.
2.  Make a program that checks whether a user is in the src group, if
not displays the SCO license, asks if the user accepts the license, if
so adds the user to the src group.  Problem is that this program should
be SUID...

I'll start working on the first suggested program rightaway.  Don't have
much else to do anyway ;-)

Edward Brocklesby wrote:
> 
> Hi all.
> 
> A couple of things..
> 
> First, sorry to post about this again so soon, but styx is moving to a new
> location, so any accounts created from now on will be removed later today
> when it's moved.
> 
> Second, where do I stand on /usr/src/ permissions? Can I allow read access
> to it, or is that effectively distributing 2.11BSD source, against SCO's
> license? Is there any way to verify who has obtained a license, and add them
> to a src group?
> 
> Thanks,
>         -larne-

-- 
If I traveled to the end of the rainbow
As Dame Fortune did intend,
Murphy would be there to tell me
The pot's at the other end.
                -- Bert Whitney

Lars J. Buitinck

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id GAA49251
	for pups-liszt; Sat, 7 Apr 2001 06:03:13 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from RVC1.Informatik.BA-Stuttgart.DE (isdn296.s.netic.de [212.9.163.40])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id GAA49247
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 06:03:08 +1000 (EST)
	(envelope-from helbig at Informatik.BA-Stuttgart.DE)
Received: (from helbig at localhost)
	by RVC1.Informatik.BA-Stuttgart.DE (8.11.2/8.9.3) id f36JxBq18211
	for pups at minnie.cs.adfa.edu.au; Fri, 6 Apr 2001 21:59:11 +0200 (CEST)
Date: Fri, 6 Apr 2001 21:59:11 +0200 (CEST)
From: Wolfgang Helbig <helbig@Informatik.BA-Stuttgart.DE>
Message-Id: <200104061959.f36JxBq18211 at RVC1.Informatik.BA-Stuttgart.DE>
To: pups at minnie.cs.adfa.edu.au
Subject: [pups] Enhancement of SIMH-V2.5a
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi,

As the subject says, I enhanced the PDP-11 simulator from Robert
Supnik(V2.5a). Please tell me, if the README sounds interesting to
you. In that case, maybe we could arrange to put the tar ball on
one of minnie's disks.

Wolfgang

Here is the README:

MAR-13-01

This directory contains Robert Supnik's simulator controller V2.5a
together with the PDP-11 simulator. I modified the PDP-11 simulator.
The other simulators from the original V2.5a distribution are not
included in this directory.

The details:
Physical Addresses 
------------------
The deposit and examine commands treated physical addresses as 22
bit addresses, even if the CPU was set to 18 bit addresses. Thus,
the I/O page was addressed from 17760000 to 17777776.  I changed
this.  Now, if the CPU is set to 18 bit, the I/O page is addressed
from 760000 to 770000.

Three additional KL11 terminal devices:
---------------------------------------
KL11 File Input (KLI0, KLI1, KLI2):
The KL11 file input (KLIx) units read from an attached file. They 
implement the same registers as the KL11 terminal input (TTI).
(cf. 5.2.3 in simh_doc.txt)

KL11 File Output (KLO0, KLO1, KLO2)
The KL11 file output (KLOx) units append to an attached file.  They
implement the same registers as the KL11 terminal output unit (TTI).
(cf. 5.2.4 in simh_doc.txt)

The added program ASR supplies a (host)-terminal interface to
the KLI/O attached files.
ASR is invoked as
	asr kli klo .
It polls the host terminal (stdin) and appends the polled bytes
to the file kli. Furthermore it polls the file klo and copies
the polled bytes to the host terminal (stdout).

To quit asr, enter ^E.

To build asr, enter:
	cc asr.c scp_tty.c
	cp a.out asr

Building the pdp11-simulator:
The source code is in pdp11_kl.c. So the installation instructions in
simh_doc.txt apply.

Both asr and pdp11_kl.c is only tested on NetBSD 1.5. It hopefully
works on other UNIX-like host operating systems as well.

Example of who to to connect the file-I/O KL-devices and asr:
Start the simulator.
Attach the file kli to KLI0 and the file klo to KLO0.
Enter
	asr kli klo
from another host terminal.
Now, whatever you type, goes to KLI0, and whatever is written by
KLO0 is typed onto your terminal.

Device numbers of the terminal devices in PDP11-UNIX V6:
UNIT		major/minor number
TTI/TTO		0/0	(/dev/tty8, the console)
KLI0/KLO0	0/1
KLI1/KLO1	0/2
KLI2/KLO2	0/3

Synchronization of the line clock to the host clock:
---------------------------------------------------
"SYNC" is an add-on to the PDP-11 line clock device. It tries to
synchronize the Line-time Clock (CLK, cf. 5.2.6 in simh_doc.txt)
with the host time. It only works if the unsynchronized CLK runs
too fast. On every tick of CLK, the simulator then sleeps until a
total of 1/60 seconds elapsed from the last tick.

Synchronization slows down the simulator and reduces the load of
the CPU.  It is turned on automatically through activation of
the CLK device.  The clock device is activated through a RESET.
You can turn off synchronization by depositing '1' into the newly
added "SYNCH"-register of the CLK-unit. To turn on synchronizing,
deposit '0' into it. If synchronizing is active, the SYNCH-register
shows the host time (number of seconds elapsed since Jan 1 1970
UTC).

Have fun,

Wolfgang Helbig <helbig at ba-stuttgart.de>

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id GAA49442
	for pups-liszt; Sat, 7 Apr 2001 06:55:26 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from klamath.leguin.org.uk (pc250-oxf1.cable.ntl.com [62.254.132.250])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id GAA49438
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 06:55:18 +1000 (EST)
	(envelope-from ejb at klamath.leguin.org.uk)
Received: from localhost (localhost [[UNIX: localhost]])
	by klamath.leguin.org.uk (8.9.3/8.9.3/Debian 8.9.3-21) id UAA00618
	for pups at minnie.cs.adfa.edu.au; Fri, 6 Apr 2001 20:47:58 GMT
Content-Type: text/plain;
  charset="iso-8859-1"
From: Edward Brocklesby <ejb@leguin.org.uk>
Organization: Leguin Network Services
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
Date: Fri, 6 Apr 2001 20:47:57 +0000
X-Mailer: KMail [version 1.2]
References: <01040609593307.26560 at klamath.leguin.org.uk> <3ACE00BB.FE5D18F8 at fwn.rug.nl>
In-Reply-To: <3ACE00BB.FE5D18F8 at fwn.rug.nl>
MIME-Version: 1.0
Message-Id: <01040620475700.00557 at klamath.leguin.org.uk>
Content-Transfer-Encoding: 8bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

On Friday 06 April 2001  5:45 pm, Lars J. Buitinck wrote:
> Couple of suggestions:
>
> 1.  Make a user account that automatically replies to email by sending a
> user a copy of the SCO license and an automatically generated code,
> which the user should then send back to be added to the src group.  I
> could write a program for you.

Hmm, yes.. would it just ask them to accept the license, or direct them to
SCO's site, and get them to send back SCO's license code?  I'm really not
sure of the legal issues surrounding this (or even how much it matters,
now that it only takes 5 minutes to obtain a license..)

> 2.  Make a program that checks whether a user is in the src group, if
> not displays the SCO license, asks if the user accepts the license, if
> so adds the user to the src group.  Problem is that this program should
> be SUID...

Locking the group file and securely updating it shouldn't be *too* hard, but
yes, I'd prefer not to have many setuid programs around (I've already done
a small audit of the code and fixed a couple of security bugs, and removed
setuid bits from as many programs as possible.. I really wouldn't want someone
to have root on it, simply because it would allow them to take any IP address
on the host's network).

> I'll start working on the first suggested program rightaway.  Don't have
> much else to do anyway ;-)

cheers :>

	-larne-

PS- styx is down right now, it's getting it's own (100% dedicated :) box, 
hosted at tele.dk.. this should be setup over the weekend, then it'll be
up and running again.

Also, if anyone wants my INET_RESTRICT kernel patch (which only allows users 
in INET_GROUP to call connect()) for 2.11BSD, I can put it online somewhere
(although it's really not that difficult to implement). Also if 2.11BSD is 
still being maintained, the setproctitle() vulnerability recently discovered 
in 4BSD derived ftpd is still present (trivial fix - change 
setproctitle(title) to setproctitle("%s", title)).  I'm still going through 
various 4BSD code security problems to determine which are present in 2BSD.

And lastly, if anyone wants source to the newuser program I used, I can put 
that online too.

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id JAA50238
	for pups-liszt; Sat, 7 Apr 2001 09:45:06 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from moe.2bsd.com (MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id JAA50234
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 09:45:00 +1000 (EST)
	(envelope-from sms at moe.2bsd.com)
Received: (from sms at localhost)
	by moe.2bsd.com (8.10.1/8.10.1) id f36NOJs03847
	for pups at minnie.cs.adfa.edu.au; Fri, 6 Apr 2001 16:24:19 -0700 (PDT)
Date: Fri, 6 Apr 2001 16:24:19 -0700 (PDT)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <200104062324.f36NOJs03847 at moe.2bsd.com>
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi --

> From: Edward Brocklesby <ejb at leguin.org.uk>
> (although it's really not that difficult to implement). Also if 2.11BSD is 
> still being maintained, the setproctitle() vulnerability recently discovered 
> in 4BSD derived ftpd is still present (trivial fix - change 
> setproctitle(title) to setproctitle("%s", title)).  I'm still going through 

	2.11's still maintained - I've been busy (and a bit "burned out") and
	haven't fired up the 11/73 as much as I should have or used to.  So
	many projects, so little time ...

	Sounds like it's time to at least get the FTPD bug fixed though ;)

	Steven Schultz
	sms at to.gd-es.com

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id VAA53356
	for pups-liszt; Sat, 7 Apr 2001 21:33:01 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from smtp.hccnet.nl (smtp.hccnet.nl [62.251.0.13])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id VAA53352
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 21:32:56 +1000 (EST)
	(envelope-from lars at fwn.rug.nl)
Received: from fwn.rug.nl by smtp.hccnet.nl
	via uds148-43.dial.hccnet.nl [62.251.43.148] with ESMTP
	id NAA14473 (8.8.5/1.13); Sat, 7 Apr 2001 13:25:24 +0200 (MET DST)
Message-ID: <3ACEF9C7.20A1328E at fwn.rug.nl>
Date: Sat, 07 Apr 2001 13:28:07 +0200
From: "Lars J. Buitinck" <lars@fwn.rug.nl>
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: nl,nl-BE,en,en-US,en-GB,af,de-DE,de-AT,de-CH,fr,fr-FR,fr-BE,fr-CA
MIME-Version: 1.0
To: Edward Brocklesby <ejb at leguin.org.uk>, pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
References: <01040609593307.26560 at klamath.leguin.org.uk> <3ACE00BB.FE5D18F8 at fwn.rug.nl> <01040620475700.00557 at klamath.leguin.org.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Edward Brocklesby wrote:
> 
> Hmm, yes.. would it just ask them to accept the license, or direct them to
> SCO's site, and get them to send back SCO's license code?  I'm really not
> sure of the legal issues surrounding this (or even how much it matters,
> now that it only takes 5 minutes to obtain a license..)

Less than 5 minutes.  I don't know when you got your license, but they
don't even give a code anymore - they just show the license, let you
click "ACCEPT" and you're in their archive.  Just show 'em the license.

> Locking the group file and securely updating it shouldn't be *too* hard, but
> yes, I'd prefer not to have many setuid programs around (I've already done
> a small audit of the code and fixed a couple of security bugs, and removed
> setuid bits from as many programs as possible.. I really wouldn't want someone
> to have root on it, simply because it would allow them to take any IP address
> on the host's network).

And I don't feel like being responsible for anything bad that happens to
your box by a bug in MFSRP - My First SUID Root Program :-)

-- 
If I traveled to the end of the rainbow
As Dame Fortune did intend,
Murphy would be there to tell me
The pot's at the other end.
                -- Bert Whitney

Lars J. Buitinck

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id XAA53804
	for pups-liszt; Sat, 7 Apr 2001 23:10:51 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from klamath.leguin.org.uk (pc174-oxf1.cable.ntl.com [62.254.132.174])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id XAA53800
	for <pups at minnie.cs.adfa.edu.au>; Sat, 7 Apr 2001 23:10:40 +1000 (EST)
	(envelope-from ejb at klamath.leguin.org.uk)
Received: from localhost (localhost [[UNIX: localhost]])
	by klamath.leguin.org.uk (8.9.3/8.9.3/Debian 8.9.3-21) id NAA00870;
	Sat, 7 Apr 2001 13:02:59 GMT
Content-Type: text/plain;
  charset="iso-8859-1"
From: Edward Brocklesby <ejb@leguin.org.uk>
Organization: Leguin Network Services
To: "Steven M. Schultz" <sms at moe.2bsd.com>, pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
Date: Sat, 7 Apr 2001 13:02:58 +0000
X-Mailer: KMail [version 1.2]
References: <200104062324.f36NOJs03847 at moe.2bsd.com>
In-Reply-To: <200104062324.f36NOJs03847 at moe.2bsd.com>
MIME-Version: 1.0
Message-Id: <01040713025800.00566 at klamath.leguin.org.uk>
Content-Transfer-Encoding: 8bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

On Friday 06 April 2001 11:24 pm, Steven M. Schultz wrote:
> 	2.11's still maintained - I've been busy (and a bit "burned out") and
> 	haven't fired up the 11/73 as much as I should have or used to.  So
> 	many projects, so little time ...

Hm, I saw the patch archive.. which patchlevel is the 2.11_rp_unknown image
on minnie at? 

There's a couple of things I'd be interested in adding to 2BSD, though I'm 
not sure if they'd make it into upstream.  One is the 4BSD timezones system, 
which is somewhat better than setting TIMEZONE in the kernel..

	-larne-

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id DAA55128
	for pups-liszt; Sun, 8 Apr 2001 03:15:07 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from moe.2bsd.com (MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id DAA55124
	for <pups at minnie.cs.adfa.edu.au>; Sun, 8 Apr 2001 03:15:03 +1000 (EST)
	(envelope-from sms at moe.2bsd.com)
Received: (from sms at localhost)
	by moe.2bsd.com (8.10.1/8.10.1) id f37H01815466
	for pups at minnie.cs.adfa.edu.au; Sat, 7 Apr 2001 10:00:01 -0700 (PDT)
Date: Sat, 7 Apr 2001 10:00:01 -0700 (PDT)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <200104071700.f37H01815466 at moe.2bsd.com>
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi -

> From: Edward Brocklesby <ejb at leguin.org.uk>
> Hm, I saw the patch archive.. which patchlevel is the 2.11_rp_unknown image
> on minnie at? 

	It's ancient.   Look at /VERSION - it should have the current rev
	level:

Current Patch Level: 436
Date: February 22, 2001

	Oh, I see I've number 436 almost ready to publish ;)

> There's a couple of things I'd be interested in adding to 2BSD, though I'm 
> not sure if they'd make it into upstream.  One is the 4BSD timezones system, 
> which is somewhat better than setting TIMEZONE in the kernel..

	The 4BSD timezone stuff is already there, at least in userland - see
	/usr/share/zoneinfo and 'tic' and so on.

	Since most PDP-11s do not have a "CMOS clock" to get the date and time
	from I'm not sure where the kernel would get its initial date/time
	from.   Some models (11/93) have a TOY clock that could be set to
	GMT, but the other models do not - so the user/admin would have to
	remember to set the date/time to GMT when booting the system.

	Steven Schultz
	moe.2bsd.com


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id IAA56444
	for pups-liszt; Sun, 8 Apr 2001 08:14:24 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from RVC1.Informatik.BA-Stuttgart.DE (isdn268.s.netic.de [212.9.163.12])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id IAA56440
	for <pups at minnie.cs.adfa.edu.au>; Sun, 8 Apr 2001 08:14:18 +1000 (EST)
	(envelope-from helbig at Informatik.BA-Stuttgart.DE)
Received: (from helbig at localhost)
	by RVC1.Informatik.BA-Stuttgart.DE (8.11.2/8.9.3) id f37MAFu20067;
	Sun, 8 Apr 2001 00:10:15 +0200 (CEST)
Date: Sun, 8 Apr 2001 00:10:15 +0200 (CEST)
From: Wolfgang Helbig <helbig@Informatik.BA-Stuttgart.DE>
Message-Id: <200104072210.f37MAFu20067 at RVC1.Informatik.BA-Stuttgart.DE>
To: pups at minnie.cs.adfa.edu.au, sms at moe.2bsd.com
Subject: Re: [pups] STYX and 2.11BSD licensing
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

	
> 	Since most PDP-11s do not have a "CMOS clock" to get the date and time
> 	from I'm not sure where the kernel would get its initial date/time
> 	from. [ ... ]

In UNIX V6/V7 the kernel reads the initial time from the superblock of the
root file system. The timestamp is written each time the superblock is updated
on disk.

> 	GMT, but the other models do not - so the user/admin would have to
> 	remember to set the date/time to GMT when booting the system.

The admin just has to remember that the date(1) command converts from
localtime to GMT when setting the date -- unless an 's' is appended to
the date string. (in V6 only, not mentioned in its man page)

BTW. in V6, the timezone offset was not coded into the kernel, but
in the C-library source ctime.c. If you happen to live outside
Eastern Timezone, you'll have to change it. Furthermore the daylight
saving time switch is hardcoded in localtime() -- last Sunday in
April and last Sunday in October, with different rules for 1974
(Jan 5 and last Sunday in November) and 1975 (last Sunday in February
and last Sunday in November).

So you in V6 don't have to rebuild the kernel to adopt the timezone
changes.  Instead you have to rebuild the C-Library (at least
replace ctime.c) and build all commands that depend on it. I've
found these:

	date find ls who cron dump mail pr restore

Putting the timezone offset into the kernel like in V7 seems to be
better, because you don't have to recompile all those commands.

Wolfgang

PS. I've patches to V6, that make it y2k ready and avoid some integer
overflows in ctime, which occure since 1998, so not related
to y2k.

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id JAA56796
	for pups-liszt; Sun, 8 Apr 2001 09:30:04 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from moe.2bsd.com (MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id JAA56792
	for <pups at minnie.cs.adfa.edu.au>; Sun, 8 Apr 2001 09:30:00 +1000 (EST)
	(envelope-from sms at moe.2bsd.com)
Received: (from sms at localhost)
	by moe.2bsd.com (8.10.1/8.10.1) id f37NHij19414
	for pups at minnie.cs.adfa.edu.au; Sat, 7 Apr 2001 16:17:44 -0700 (PDT)
Date: Sat, 7 Apr 2001 16:17:44 -0700 (PDT)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <200104072317.f37NHij19414 at moe.2bsd.com>
To: pups at minnie.cs.adfa.edu.au
Subject: Re: [pups] STYX and 2.11BSD licensing
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi -

> From: Wolfgang Helbig <helbig at Informatik.BA-Stuttgart.DE>
> In UNIX V6/V7 the kernel reads the initial time from the superblock of the
> root file system. The timestamp is written each time the superblock is updated
> on disk.
	
	2.11 (and as far as I can remember all of the 2BSD family) do the
	same thing.

	The trouble is that the initial time upon boot can be seriously wrong.

	For example I haven't booted my 11/73 in a month or two - the date and
	time will be sometime in Jan or Feb.

	In the "PC" world there's the CMOS clock (set to GMT on all the systems
	I have) and a battery - when the system boots it can read the 
	correct/current/GMT date/time from the hardware (as can a 11/93 with 
	a TOY clock).

> BTW. in V6, the timezone offset was not coded into the kernel, but
> in the C-library source ctime.c. If you happen to live outside

	Yep - I had hoped to never have to remember _that_ again ;)

> Putting the timezone offset into the kernel like in V7 seems to be
> better, because you don't have to recompile all those commands.

	Right.

	It is only one module in the kernel (param.c) that needs to
	be recompiled - just edit param.c and that's the only module that will
	be rebuilt.

	Another way is to use 'adb -w -k ...' and patch the kernel and/or
	memory.

	Steven Schultz
	sms at moe.2bsd.com

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id CAA61234
	for pups-liszt; Mon, 9 Apr 2001 02:18:54 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from mwnt5.microwalt.nl (mwnt5.microwalt.nl [195.86.89.38])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with ESMTP id CAA61230
	for <pups at minnie.cs.adfa.edu.au>; Mon, 9 Apr 2001 02:18:49 +1000 (EST)
	(envelope-from Fred.van.Kempen at microwalt.nl)
Received: from mwnt4.microwalt.nl (unverified) by mwnt5.microwalt.nl
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a005f2652cb7c5a20 at mwnt5.microwalt.nl>;
 Sun, 8 Apr 2001 18:07:22 +0100
Received: by mwnt4.microwalt.nl with Internet Mail Service (5.5.2650.21)
	id <2HH7NA3Y>; Sun, 8 Apr 2001 18:04:36 +0200
Message-ID: <6F63E31101C6D41196490008C7B2BFC3020ABB at mwnt4.microwalt.nl>
From: "Fred N. van Kempen" <Fred.van.Kempen@microwalt.nl>
To: "'Steven M. Schultz'" <sms at moe.2bsd.com>, pups at minnie.cs.adfa.edu.au
Subject: RE: [pups] STYX and 2.11BSD licensing
Date: Sun, 8 Apr 2001 18:04:34 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

All,

> 	Since most PDP-11s do not have a "CMOS clock" to get the date and
>	time from I'm not sure where the kernel would get its initial
>	date/time from.
Dunno about V6/V7/2BSD, but Ultrix-11 uses the "last modified" date-stamp
from the root file system (inode 1; /) to save/restore the last known
date.  Kinda works, and better than having a system run in 1970 initially :)
Still, TZ info is stored im the kernel.  Would be nice to have that in
user space, too...

--fred


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) id EAA86572
	for pups-liszt; Wed, 11 Apr 2001 04:45:21 +1000 (EST)
	(envelope-from owner-pups at minnie.cs.adfa.edu.au)
Received: from nose.cs.utoronto.ca (nose.cs.utoronto.ca [128.100.27.218])
	by minnie.cs.adfa.edu.au (8.9.3/8.9.3) with SMTP id EAA86568
	for <pups at minnie.cs.adfa.edu.au>; Wed, 11 Apr 2001 04:45:06 +1000 (EST)
	(envelope-from norman at nose.cs.utoronto.ca)
Message-Id: <200104101845.EAA86568 at minnie.cs.adfa.edu.au>
Subject: [pups] Sigma RDQ11-EC, ESDI disk wisdom needed
From: norman@nose.cs.utoronto.ca (Norman Wilson)
To: pups at minnie.cs.adfa.edu.au
Date: Tue, 10 Apr 2001 14:36:46 -0400
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

I am trying to get a Sigma RQD11-EC ESDI disk controller and Fujitsu
M2261E disk to work in a MicroVAX III, and am stumped.  I am quite
sure the current problem would show up in a Qbus PDP-11 as well, so
I thought I'd ask here.

Those who don't recognize the devices will probably find it boring to
read on, but for the sake of politeness, the RQD11-EC is a four-drive
Qbus ESDI disk controller that speaks MSCP to the host computer, and
the M2261E is a 320MB full-height 5.25-inch ESDI disk drive.  I picked
them both up (actually two of each) just short of someone's dumpster a
couple of years ago, but this is the first time I have tried to use them.
It was believed that they were working when last powered up, which was
several years before they came to me.  They didn't come with documentation.
I hope to get a copy of the controller manual from a geographically-distant
friend, who has already e-mailed me a list of switch settings and some
other key facts.  www.pc-disk.de has a spec-and-jumpers sheet for the
disk.

In a sentence, the trouble is that the controller cannot see the disk.

In more detail:

The RQD11 is configured at address 0160354 (I am testing in a system
that also has an RQDX3 at the standard address which I don't want to
disturb); bootstrap disabled; CPU type LSI-11 (the only other choice is
`none'); interrupts at BR4.  Except the address, these are the same
settings the board had when it was last in use.

There are many disk jumpers.  Among the settings are: drive select 1;
daisy-chain style signal gating; 590 bytes per sector, hard-sectored;
ATTN not set to READY at power-up.  Again these are believed to be the
settings when the drive was last used.

The A (wide) cable runs from the A connector on the disk to J5 (the only
34-pin connector) on the controller.  The drive has a terminator DIP in
place.  The B (narrow) cable runs from the B connector on the disk to
J1 on the controller.  The cables I am using happen to be missing the
keys normally found at the drive end; I have tried all four possible
cable orientations to no avail.

When fed power, the disk spins up and calibrates (the rattling head-dance
I'm familiar with from other Fuji disks of similar vintage).  At no point
have I seen any fault LEDs lit.  The READY LED on the front of the disk
comes on after calibration, and stays on.

The RQD11's CSR responds as it should on the Qbus, and the sequence
that is supposed to open communications with WOMBAT (the firmware command
interpreter) works fine:

  >>>d/p/w 20001f40 20
  >>>d/l 20088008 80000002
  >>>d/w 200000ec ac
  >>>s 400

  RQD11-EC   WOMBAT Version: 2.38
  Drive number:

According to my friend with the manual, before the drive number prompt
the firmware should list all the drives it sees, but I have yet to see
it list anything.  If I give it a drive number between 0 and 7, it reports
`no drv'; any other number yields `Illegal drive number'.

I have tried various experiments, including
- using J3 instead of J1 for the B cable
- different drive-select lines
- changing CHN7 15-16 to `set ATTN at power-up'
each with all four possible cable orientations.

As I say, I'm stumped.  Anybody got any suggestions?  Is there anything
I can do to get better diagnostic information out of either the disk or
the controller?

Thanks much for any advice,

Norman Wilson


