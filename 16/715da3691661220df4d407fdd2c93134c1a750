X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.8 required=5.0 tests=DKIM_ADSP_CUSTOM_MED,
	DKIM_INVALID,DKIM_SIGNED,FREEMAIL_FROM,HTML_MESSAGE,MAILING_LIST_MULTI,
	T_SCC_BODY_TEXT_LINE autolearn=ham autolearn_force=no version=3.4.4
Received: (qmail 13824 invoked from network); 11 Jul 2022 21:38:56 -0000
Received: from minnie.tuhs.org (50.116.15.146)
  by inbox.vuxu.org with ESMTPUTF8; 11 Jul 2022 21:38:56 -0000
Received: from minnie.tuhs.org (localhost [IPv6:::1])
	by minnie.tuhs.org (Postfix) with ESMTP id A583540B45;
	Tue, 12 Jul 2022 07:38:49 +1000 (AEST)
Received: from mail-wm1-f53.google.com (mail-wm1-f53.google.com [209.85.128.53])
	by minnie.tuhs.org (Postfix) with ESMTPS id E982440998
	for <tuhs@tuhs.org>; Tue, 12 Jul 2022 07:38:44 +1000 (AEST)
Received: by mail-wm1-f53.google.com with SMTP id i128-20020a1c3b86000000b003a2ce31b4f8so5709695wma.1
        for <tuhs@tuhs.org>; Mon, 11 Jul 2022 14:38:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=v9JB1Rv8tSbzy89fwR16k0v1Kocj1U6ePwFt1Iq6kGo=;
        b=kXeayINgVvjaQ1+1qNe+lE23W+jXLDwBt41kqrvAgHLpzoGfef53HXPa8qs04tFitF
         5yu2vuLiSRmIwN64eWKyU4IcVSBnvXZ1ojvd8hmspX/nsW3TU9duSzFlFdXEXXFREa1c
         IUxVIa1FcvhRaxx4wOF4A7J7cxWAbrcwrgptqsIEpBx++B5Jmp3bqk4oN/lMjZMqHabv
         rGDWLSy0j8H1tLOXS32ryxc57WeGEo/ia8o79ixMpb5cyMvq+yP17NmyOCm15ri5Hzg2
         0MgsKf/efTkoF+rCrp8jY1ZLhTgfyXScoRTOsg8auGWcfpuf4fuQyu4+K4qo0W2HKQoI
         WIIQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=v9JB1Rv8tSbzy89fwR16k0v1Kocj1U6ePwFt1Iq6kGo=;
        b=VtxDDosnHgMzDGiMLNG/21hsHE7acyx2/V5w/TChil1ZkilDe8vOqe32eGEVc9AT4t
         xgT169q6u3VMFfd19j1bNeBuFw9TxxLaCeNdLnM6e3/2iR6qW0WDwo3O5ZVS9OXgcqrH
         6WhLwE82AQd/IAMt466PPlCRYJLPqQa8gazekoxFbbEQxlzQqQTPt7BVojzaSg6OOTUX
         qmhduxKoNtyC3FA0goT/f8VXqk5mldCRtsqOOU5ZXu2aMXrYZq7pmMR9cJgGXWp94de4
         rIbOZDtAtgS2YsI6C+qKiqPbsmuDyCpYb4F1+4V8iCLSuKGf10wWp1MYAK52AggaGgVi
         uPjQ==
X-Gm-Message-State: AJIora/Ccbwj3i+ZNsXBR/BF8Yd21KYMD1cGtD8eY3oSfj08P1lFtHCA
	XOHWEImtDMMxi5u2oiNDmNcepQprBCD518qJyzIC24SnnkY=
X-Google-Smtp-Source: AGRyM1uoWTvEpf/OfIOz/Ps/9uTr8FzSJxoqm9t8KsuWNYKcOx4jGpp5hZNx8cQHdzE6X3aZ/EEVcAF/Th8X7S7JAAs=
X-Received: by 2002:a05:600c:2213:b0:3a2:e5a7:672d with SMTP id
 z19-20020a05600c221300b003a2e5a7672dmr362994wml.163.1657575463207; Mon, 11
 Jul 2022 14:37:43 -0700 (PDT)
MIME-Version: 1.0
References: <20220711212413.29B5618C097@mercury.lcs.mit.edu>
In-Reply-To: <20220711212413.29B5618C097@mercury.lcs.mit.edu>
From: Gavin Tersteeg <gctersteeg@gmail.com>
Date: Mon, 11 Jul 2022 16:37:32 -0500
Message-ID: <CA+99Do+SPV7xUMn_U18zyVEcUYao+_50p2MzSpta02HXVWaDnw@mail.gmail.com>
To: Noel Chiappa <jnc@mercury.lcs.mit.edu>
Content-Type: multipart/alternative; boundary="000000000000ac4a5d05e38e5c15"
Message-ID-Hash: CZYV3I3JCZQSEDPU2QD73UWJGE2MDJ2Q
X-Message-ID-Hash: CZYV3I3JCZQSEDPU2QD73UWJGE2MDJ2Q
X-MailFrom: gctersteeg@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; header-match-tuhs.tuhs.org-0; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: tuhs@tuhs.org
X-Mailman-Version: 3.3.6b1
Precedence: list
Subject: [TUHS] Re: LSX issues and musing
List-Id: The Unix Heritage Society mailing list <tuhs.tuhs.org>
Archived-At: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/message/CZYV3I3JCZQSEDPU2QD73UWJGE2MDJ2Q/>
List-Archive: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/>
List-Help: <mailto:tuhs-request@tuhs.org?subject=help>
List-Owner: <mailto:tuhs-owner@tuhs.org>
List-Post: <mailto:tuhs@tuhs.org>
List-Subscribe: <mailto:tuhs-join@tuhs.org>
List-Unsubscribe: <mailto:tuhs-leave@tuhs.org>

--000000000000ac4a5d05e38e5c15
Content-Type: text/plain; charset="UTF-8"

A lot of it was me just learning how V6 works in general. Getting V6 to
boot on a simulated 11/23 was pretty easy (I had some issues getting it to
compile at first, but it worked after I got that sorted out). Adding the
RL02 and RX02 drivers was a tiny bit more difficult. I would say that the
most difficult part was writing a RX02 boot program, trying to fit that
into 512 bytes with interleave code took a few days.

You were right about the source of the issue. I incorrectly assumed that
the EIS flag was only set in header.lsx.s, but it is also set in param.h.
The default param.h has the EIS symbol define commented out, while
header.lsx.s has it uncommented. By uncommenting the define in param.h and
recompiling decfd.c, it allows the kernel to be successfully linked. The
current kernel that builds is too big to be used with a 16K kernel size,
but I think I just need to recompile everything with the new param.h, and
maybe adjust a few other parameters.

I will look into getting an EIS chip. I'm probably going to move up to the
20K kernel size regardless, as I need the extra memory for changes that I
want to make to the kernel. I am betting that the "0: Missing temp file"
thing is due to some sort of file I/O issue, so I'll read into the compiler
source to see what is generating it.

On Mon, Jul 11, 2022 at 4:24 PM Noel Chiappa <jnc@mercury.lcs.mit.edu>
wrote:

>     > From: Gavin Tersteeg
>
>     > I spent a lot of time getting UNIX V6 working on my PDP-11/23 system.
>     > It took a lot of tinkering with the kernel and drivers to make it
> work
>     > in the way I wanted to
>
> You must have made a lot of changes for it to take "a lot of tinkering".
> Bringing V6 up on the /23 has been done several times, and when I did
> it, it only took about 2 dozen lines of code in about 2 files. What all
> did you wind up changing?
>
>
>     > From my research, it seems like there were two different UNIX
> variants
>     > that could run on a system like this. These variants were LSX and
>     > MINI-UNIX. MINI-UNIX seems to require a decent mass-storage device
> like
>     > a RK05 and some porting to work on an 11/03, while LSX is designed to
>     > work on exactly the hardware specs that I have on hand.
>
> Bringing up MINI-UNIX on the /03 has been done at least twice; once
> historically (now lost, AFAIK), and again recently:
>
>     http://ana-3.lcs.mit.edu/~jnc/tech/unix/Mini/Mini.html
>
> I'm not sure what you're basing the "MINI-UNIX seems to require a decent
> mass-storage device like a RK05" on - it should run as well on whatever
> you're running LSX on as LSX does.
>
> I haven't run LSX myself, but from what I've seen, the only significant
> difference between the two is that LSX will run with less main memory than
> MINI-UNIX (which really kind of needs 56KB; LSX you can probably get away
> with 40KB).That was a significant issue when the LSI-11 was originally
> released, but these days one has to really work to have a QBUS PDP-11 with
> less than 56KB.
>
>
>     > my EIS-less 11/03
>
> EIS chips can be found on eBait for not much money (I just bought a couple
> myself), and it's worth investing in one, so on can dispense with the
> emulator, which takes real memory for which a better use can be found.
>
>     > The first issue is that the C compiler will randomly spit out a "0:
>     > Missing temp file" when attempting to compile something. This is
>     > annoying, but circumventable by just running the same command over
> and
>     > over until it works.
>
> Schaeffer's Law (from Larry Niven): anything you don't understand
> might be dangerous. I'd track down why this is happening.
>
>         Noel
>

--000000000000ac4a5d05e38e5c15
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div dir=3D"ltr">A lot of it was me just learning how V6 w=
orks in general. Getting V6 to boot on a simulated 11/23 was pretty easy (I=
 had some issues getting it to compile at first, but it worked after I got =
that sorted out). Adding the RL02 and RX02 drivers was a tiny bit more diff=
icult. I would say that the most difficult part was writing a RX02 boot pro=
gram, trying to fit that into 512 bytes with interleave code took a few day=
s.</div><div><br></div><div>You were right about the source of the issue. I=
 incorrectly assumed that the EIS flag was only set in header.lsx.s, but it=
 is also set in param.h. The default param.h has the EIS symbol define comm=
ented out, while header.lsx.s has it uncommented. By uncommenting the defin=
e in param.h and recompiling decfd.c, it allows the kernel to be successful=
ly linked. The current kernel that builds is too big to be used with a 16K =
kernel size, but I think I just need to recompile everything with the new p=
aram.h, and maybe adjust a few other parameters.<br></div><div><br></div><d=
iv>I will look into getting an EIS chip. I&#39;m probably going to=C2=A0mov=
e up to the 20K kernel size regardless, as I need the extra memory for chan=
ges that I want to make to the kernel. I am betting that the &quot;0: Missi=
ng temp file&quot; thing is due to some sort of file I/O issue, so I&#39;ll=
 read into the compiler source to see what is generating it.</div><br><div =
class=3D"gmail_quote"><div dir=3D"ltr" class=3D"gmail_attr">On Mon, Jul 11,=
 2022 at 4:24 PM Noel Chiappa &lt;<a href=3D"mailto:jnc@mercury.lcs.mit.edu=
">jnc@mercury.lcs.mit.edu</a>&gt; wrote:<br></div><blockquote class=3D"gmai=
l_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,20=
4,204);padding-left:1ex">=C2=A0 =C2=A0 &gt; From: Gavin Tersteeg=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 <br>
<br>
=C2=A0 =C2=A0 &gt; I spent a lot of time getting UNIX V6 working on my PDP-=
11/23 system.<br>
=C2=A0 =C2=A0 &gt; It took a lot of tinkering with the kernel and drivers t=
o make it work<br>
=C2=A0 =C2=A0 &gt; in the way I wanted to<br>
<br>
You must have made a lot of changes for it to take &quot;a lot of tinkering=
&quot;.<br>
Bringing V6 up on the /23 has been done several times, and when I did<br>
it, it only took about 2 dozen lines of code in about 2 files. What all<br>
did you wind up changing?<br>
<br>
<br>
=C2=A0 =C2=A0 &gt; From my research, it seems like there were two different=
 UNIX variants<br>
=C2=A0 =C2=A0 &gt; that could run on a system like this. These variants wer=
e LSX and<br>
=C2=A0 =C2=A0 &gt; MINI-UNIX. MINI-UNIX seems to require a decent mass-stor=
age device like<br>
=C2=A0 =C2=A0 &gt; a RK05 and some porting to work on an 11/03, while LSX i=
s designed to<br>
=C2=A0 =C2=A0 &gt; work on exactly the hardware specs that I have on hand.<=
br>
<br>
Bringing up MINI-UNIX on the /03 has been done at least twice; once<br>
historically (now lost, AFAIK), and again recently:<br>
<br>
=C2=A0 =C2=A0 <a href=3D"http://ana-3.lcs.mit.edu/~jnc/tech/unix/Mini/Mini.=
html" rel=3D"noreferrer" target=3D"_blank">http://ana-3.lcs.mit.edu/~jnc/te=
ch/unix/Mini/Mini.html</a><br>
<br>
I&#39;m not sure what you&#39;re basing the &quot;MINI-UNIX seems to requir=
e a decent<br>
mass-storage device like a RK05&quot; on - it should run as well on whateve=
r<br>
you&#39;re running LSX on as LSX does.<br>
<br>
I haven&#39;t run LSX myself, but from what I&#39;ve seen, the only signifi=
cant<br>
difference between the two is that LSX will run with less main memory than<=
br>
MINI-UNIX (which really kind of needs 56KB; LSX you can probably get away<b=
r>
with 40KB).That was a significant issue when the LSI-11 was originally<br>
released, but these days one has to really work to have a QBUS PDP-11 with<=
br>
less than 56KB.<br>
<br>
<br>
=C2=A0 =C2=A0 &gt; my EIS-less 11/03<br>
<br>
EIS chips can be found on eBait for not much money (I just bought a couple<=
br>
myself), and it&#39;s worth investing in one, so on can dispense with the<b=
r>
emulator, which takes real memory for which a better use can be found.<br>
<br>
=C2=A0 =C2=A0 &gt; The first issue is that the C compiler will randomly spi=
t out a &quot;0:<br>
=C2=A0 =C2=A0 &gt; Missing temp file&quot; when attempting to compile somet=
hing. This is<br>
=C2=A0 =C2=A0 &gt; annoying, but circumventable by just running the same co=
mmand over and<br>
=C2=A0 =C2=A0 &gt; over until it works.<br>
<br>
Schaeffer&#39;s Law (from Larry Niven): anything you don&#39;t understand<b=
r>
might be dangerous. I&#39;d track down why this is happening.<br>
<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 Noel<br>
</blockquote></div></div>

--000000000000ac4a5d05e38e5c15--
