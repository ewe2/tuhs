From: erin@coffee.corliss.net (Erin W. Corliss)
Date: Tue, 29 Dec 1998 12:24:15 -0800 (PST)
Subject: rt11 and disk images
Message-ID: <Pine.LNX.3.96.981229120734.14487A-100000@coffee.corliss.net>


(writer bites his tongue to keep from ranting about paying $100 for an
operating system for a computer that cost $12 at a second-hand store...
8^)

So I went back to the junk store yesterday and found a TK25 tape drive,
which appears to work fine with my PDP-11/73.  It also uses the same
cartriges as my SCSI tape backup drive...  Is there a DOS, Linux, or
windows NT program that I can use to save files to tape so I can load them
on the PDP-11?  When I initialize a tape, is the format standard among
other computers, or is it specific to PDP's running RSTS?  

Is there any way to make Unix 7 use RD hard drives?

...and most importantly...

Everything for PDP's seems to be distributed on disk images for drives I
don't have.  I think I saw something somewhere about being able to mount a
.dsk file as a virtual drive under RT11...  Anyone know if this is true?


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id IAA14527
	for pups-liszt; Wed, 30 Dec 1998 08:09:29 +1100 (EST)
Received: from moe.2bsd.com (0 at MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id IAA14522
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 08:09:17 +1100 (EST)
Received: (from sms at localhost)
	by moe.2bsd.com (8.9.0/8.9.0) id NAA11417
	for pups at minnie.cs.adfa.oz.au; Tue, 29 Dec 1998 13:07:32 -0800 (PST)
Date: Tue, 29 Dec 1998 13:07:32 -0800 (PST)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <199812292107.NAA11417 at moe.2bsd.com>
To: pups at minnie.cs.adfa.oz.au
Subject: Re: rt11 and disk images
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi -

> From: "Erin W. Corliss" <erin at coffee.corliss.net>
> (writer bites his tongue to keep from ranting about paying $100 for an
> operating system for a computer that cost $12 at a second-hand store... 8^)

	If you think $100 for software is worthy of ranting I'd hate to see
	what $100k (what it used to cost for UNIX sources) worth of ranting 
	would sound like :) :) :)

> So I went back to the junk store yesterday and found a TK25 tape drive,
> which appears to work fine with my PDP-11/73.  It also uses the same
> cartriges as my SCSI tape backup drive...  Is there a DOS, Linux, or

	The TK25 (I have one also - worked the last time I checked some time
	ago) uses DC600A (the "A" is important) 60mb tapes.

	But there the similarity ends.

> windows NT program that I can use to save files to tape so I can load them
> on the PDP-11?  When I initialize a tape, is the format standard among
> other computers, or is it specific to PDP's running RSTS?  

	The TQK25 formats the tape in a 'variable' record mode format that
	is (as far as I know) peculiar to DEC (or who ever built the TK25
	for them).  This makes the TK25 look and feel like a 9-track drive
	(record boundaries are preserved) which is nice.

	Unfortunately most (all?) QIC drives in the "PC" world end up in a
	'fixed record' mode (which loses the concept of record size).   So
	while you might have a DC600A drive on a Linux system it will, odds are,
	only write in fixed record mode which the TQK25 probably won't like.
	Have to try it and see what happens.

> Is there any way to make Unix 7 use RD hard drives?

	Not easily.  MSCP devices weren't around or weren't supported at
	the time V7 came out.  You'd need a  development system running
	supported disks first (perhaps the work could be done via an
	emulator).  Then you could create "boot kits" (and adding RD/RA
	support would also entail writing bootblocks, standalone drivers,
	updating /boot, in additi0on to the mainline kernel 'ra.c' driver).

	2.11BSD supports the RD drives quite nicely - if you've an 11/73
	then perhaps using 2.11 instead of V7 might be worth considering.

> ...and most importantly...
> 
> Everything for PDP's seems to be distributed on disk images for drives I
> don't have.  I think I saw something somewhere about being able to mount a

	That's why I (even 6 years ago the older drive types were either
	too old or too bulky/powerhungry) bought an Emulex UC08 (MSCP->SCSI)
	and started using SCSI peripherals.  You should have heard the 
	ranting - but it was worth in the long haul.

	Steven Schultz
	sms at moe.2bsd.com

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id JAA14776
	for pups-liszt; Wed, 30 Dec 1998 09:37:12 +1100 (EST)
Received: from post.mail.demon.net (post-12.mail.demon.net [194.217.242.41])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id JAA14771
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 09:36:56 +1100 (EST)
Received: from [158.152.152.109] (helo=falstaf.demon.co.uk)
	by post.mail.demon.net with smtp (Exim 2.10 #2)
	id 0zv7ku-0003ce-00
	for pups at minnie.cs.adfa.oz.au; Tue, 29 Dec 1998 22:36:49 +0000
Message-ID: <7OIFxAA4hVi2EwHy at falstaf.demon.co.uk>
Date: Tue, 29 Dec 1998 22:32:24 +0000
To: pups at minnie.cs.adfa.oz.au
From: Robin Birch <robin@falstaf.demon.co.uk>
Subject: Bob Supnik's Emulator.
MIME-Version: 1.0
X-Mailer: Turnpike (32) Version 3.05 <YSkKJATYm0AxAbv6xUlJqScVOx>
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Dear All,
I've been struggling with Bob's emulator (version 2.3d).  The main
problem appears to be around the TM device driver.  I've been creating
boot programs and data on my 11/73 under 2.11 BSD.

To do this I've been using the makesimtape program.  This hasn't worked
very well.  I've had to make individual files for each of the standalone
utilities as I havn't been able to get the emulator to find files beyond
the first one.  For instance if I make a standalone file consisting of
the bootstrap, boot, disklabel, mkfs, restor and inode then I can boot
the processor and load and run disklabel but nothing beyond this.

Using separate bootstraps, boot and <program>, I have labeled and mkfs
an RP04.  I then tried restor.  Well, I can get restor to load and run
but it doesn't want to understand the dump file written with dd that is
created as part of the generation of a distribution set on the 11/73.

I suspect that there is some form of data conversion that I have to go
through before I can read the files on the emulator.

Has anybody installed 2.11 on the emulator from scratch.  If so, can
they offer any advice.

Regards

Robin

PS, the emulator is compiled with gcc on Solaris 2.6 running on a
sparc2.  It runs the rt11 and v7 disks available with the simulator with
no worries.
____________________________________________________________________
Robin Birch     robin at falstaf.demon.co.uk

M1ASU/2E0ARJ    Old computers and radios always welcome

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id JAA14831
	for pups-liszt; Wed, 30 Dec 1998 09:49:48 +1100 (EST)
Received: from henry.cs.adfa.oz.au (henry.cs.adfa.oz.au [131.236.21.158])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id JAA14826
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 09:49:40 +1100 (EST)
Received: (from wkt at localhost) by henry.cs.adfa.oz.au (8.7.5/8.7.3) id JAA23598; Wed, 30 Dec 1998 09:51:35 +1100 (EST)
From: Warren Toomey <wkt@henry.cs.adfa.oz.au>
Message-Id: <199812292251.JAA23598 at henry.cs.adfa.oz.au>
Subject: Re: Bob Supnik's Emulator.
To: robin at falstaf.demon.co.uk (Robin Birch)
Date: Wed, 30 Dec 1998 09:51:34 +1100 (EST)
Cc: pups at minnie.cs.adfa.oz.au (Unix Heritage Society)
In-Reply-To: <7OIFxAA4hVi2EwHy at falstaf.demon.co.uk> from Robin Birch at "Dec 29, 98 10:32:24 pm"
Reply-To: wkt at cs.adfa.oz.au
X-Mailer: ELM [version 2.4ME+ PL22 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

In article by Robin Birch:
> Dear All,
> I've been struggling with Bob's emulator (version 2.3d).  The main
> problem appears to be around the TM device driver.  I've been creating
> boot programs and data on my 11/73 under 2.11 BSD.
> 
> To do this I've been using the makesimtape program.  This hasn't worked
> very well.  I've had to make individual files for each of the standalone
> utilities as I havn't been able to get the emulator to find files beyond
> the first one.  For instance if I make a standalone file consisting of
> the bootstrap, boot, disklabel, mkfs, restor and inode then I can boot
> the processor and load and run disklabel but nothing beyond this.

The format of a tape image is described in simh_doc.txt in Appendix 1.3,
at roughly line 2,473 of the file. Perhaps the makesimtape program isn't
making the tape correctly. What arguments are you giving it?

On a silly note, if there is only a single thing on the tape you are trying
to restor, you could always save it without the record structure imposed
by makesimtape, attach it as RL00, and then restor it from /dev/rl00 :-)

Best of luck,
	Warren

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id JAA14858
	for pups-liszt; Wed, 30 Dec 1998 09:51:34 +1100 (EST)
Received: from caveman.geac.com.au (caveman.geac.com.au [203.30.73.2])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with SMTP id JAA14853
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 09:51:26 +1100 (EST)
Received: (qmail 11612 invoked from network); 29 Dec 1998 21:55:57 -0000
Received: from brane.geac.com.au (202.6.67.115)
  by caveman.geac.com.au with SMTP; 29 Dec 1998 21:55:57 -0000
Received: from fgh.geac.com.au by brane.geac.com.au with smtp\n	(Smail3.1.29.1 #3) id m0zv7vT-0003l1C; Wed, 30 Dec 98 09:47 AEDT
Received: from localhost (dave at localhost) 
    by fgh.geac.com.au (SMI-8.X/SVR4) with ESMTP id JAA22945; Wed, 30 Dec 1998 09:48:10 +1100
Date: Wed, 30 Dec 1998 09:48:10 +1100 (EST)
From: Dave Horsfall <dave@fgh.geac.com.au>
X-Sender: dave at fgh
To: Greg Lehey <grog at lemis.com>
cc: Unix Heritage Society <pups at minnie.cs.adfa.oz.au>
Subject: Re: Converting Sixth Edition man pages
In-Reply-To: <19981229184909.O32696 at freebie.lemis.com>
Message-ID: <Pine.GSO.4.03.9812300947020.22664-100000 at fgh>
X-No-Archive: Yes
X-Witty-Saying: "Tesseract - Enter at own risk"
X-Disclaimer: "Me, speak for us?"
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

On Tue, 29 Dec 1998, Greg Lehey wrote:

> In fact, I'm not sure that just viewing them *would* be easier.  From
> observation, the markup isn't too different from the -an macros.  A
> lot of the macros seem to be the same, just in a different case.  But
> there are enough differences that I wouldn't want to tackle it right
> now.

Do you have thee 6th Edition documentation to tell you what the macros
do?  I have them somewhere...

-- 
Dave Horsfall VK2KFU  dave at geac.com.au  Ph: +61 2 9978-7493 Fx: +61 2 9978-7422
Geac Computers P/L (FGH Division) 2/57 Christie St, St Leonards 2065, Australia


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id JAA14878
	for pups-liszt; Wed, 30 Dec 1998 09:55:19 +1100 (EST)
Received: from henry.cs.adfa.oz.au (henry.cs.adfa.oz.au [131.236.21.158])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id JAA14873
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 09:55:12 +1100 (EST)
Received: (from wkt at localhost) by henry.cs.adfa.oz.au (8.7.5/8.7.3) id JAA23633 for pups at minnie.cs.adfa.oz.au; Wed, 30 Dec 1998 09:57:15 +1100 (EST)
Received: from csadfa.cs.adfa.oz.au (csadfa-21.cs.adfa.oz.au [131.236.21.6]) by henry.cs.adfa.oz.au (8.7.5/8.7.3) with ESMTP id UAA23154 for <wkt at henry.cs.adfa.oz.au>; Tue, 29 Dec 1998 20:54:13 +1100 (EST)
From: norman@nose.cita.utoronto.ca
Received: from nose.cita.utoronto.ca (nose.cita.utoronto.ca [128.100.76.157])
	by csadfa.cs.adfa.oz.au (8.9.0/8.9.0) with SMTP id UAA13151
	for <wkt at cs.adfa.oz.au>; Tue, 29 Dec 1998 20:52:02 +1100 (EST)
Message-Id: <199812290952.UAA13151 at csadfa.cs.adfa.oz.au>
To: wkt at cs.adfa.oz.au
Date: Tue, 29 Dec 1998 04:51:20 -0500
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Stuff this in the archives somewhere: V6 man macros.
I can't remember where I dug it up, unfortunately.

# To unbundle, sh this file
echo tmac.an6 1>&2
sed 's/.//' >tmac.an6 <<'//GO.SYSIN DD tmac.an6'
-'''\"	Pwb Manual Entry Macros - Version 6 (@(#)an6.src	1.6)
-'''\"	Nroff/Troff Version	@(#)1.6
-.deTH
-.tmwrong version of man entry macros - use -man
-.ab
-..
-.rnbd Bd
-.rndt Dt
-.rnit il
-.nr}I 5n
-.nr}P 0 1
-.de}C
-.ev1
-.po0
-.lt7.5i
-.tl\-\-
-.lt
-.po
-.ev
-..
-.de}E
-.wh-1p }C
-..
-.ift .em }E
-.dei0
-.in\\n(}Iu
-.dt
-..
-.delp
-.tc
-.i0
-.ta\\$2n
-.in\\$1n
-.ti-\\$2n
-..
-.des1
-.sp1v
-.ne2
-..
-.des2
-.ift .sp .5v
-.ifn .sp 1v
-..
-.des3
-.ift .sp .5v
-.ifn .sp 1v
-.ne2
-..
-.de}F
-.ev1
-'ft1
-'ps10
-'sp.5i
-.tl- % -
-'ft
-'ps
-.ev
-'bp
-..
-.deth
-.de}X
-.ev1
-.ift .}C
-'ft1
-'ps10
-'sp.5i
-.tl''THIS MANUAL ENTRY NEEDS TO BE CONVERTED - SEE mancvt(1) and man(7)''
-.tl\\$1\|(\|\\$2\|)PWB/UNIX\| \\$3\\$1\|(\|\\$2\|)
-'ps
-'ft
-'sp.5i
-.ev
-\\..
-.wh-1i }F
-.wh0 }X
-.if\\n+(}P>1 .bp1
-.ft1
-.ft1
-.ps10
-.vs12p
-.ift .po .5i
-.in\\n(}Iu
-.fi
-.dt
-.mc
-.ad
-.ifn .na
-..
-.desh
-.s1
-.ift .ft 3
-.ps8
-.ti0
-\&\\$1
-.ift .ft
-.ps
-.br
-..
-.deit
-.ul
-.ie\\nV>1 _\\$1_
-.el\&\\$1
-..
-.debd
-.ift .ft 3
-.ifn .ul
-.ie\\nV>1 _\\$1_
-.el\&\\$1
-.ift .ft 
-..
-.debn
-.ift .ft 3
-.ifn .ul
-.ie\\nV>1 _\\$1_\t\&\c
-.el\&\\$1\t\&\c
-.ift .ft 
-..
-.dedt
-.ifn .ta 8n 16n 24n 32n 40n 48n 56n 64n 72n 80n
-.ift .ta .5i 1i 1.5i 2i 2.5i 3i 3.5i 4i 4.5i 5i 5.5i 6i 6.5i
-..
-'dsv \(bv
-'ds' \(aa
-'ds> \(->
-'dsX \(mu
-'ds_ _
-'ds- \-
-'dsG \(*G
-'dsg \(ga
-'dsp \(*p
-'dsa \(aa
-'dsb \(*b
-'dsr \(rg
-'ds| \|
-'dsu \(*m
-.if\nV=1 \{\
-.po4
-.ll80
-.lt80
-.ev1
-.ll80
-.lt80
-.ev\}
-.if\nV>1 \{\
-.ll82
-.lt82
-.ev1
-.ll82
-.lt82
-.ev
-.pl84
-.rmul\}
-.hy14
-.uf2
//GO.SYSIN DD tmac.an6


Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id KAA14989
	for pups-liszt; Wed, 30 Dec 1998 10:04:45 +1100 (EST)
Received: from moe.2bsd.com (0 at MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id KAA14984
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 10:04:35 +1100 (EST)
Received: (from sms at localhost)
	by moe.2bsd.com (8.9.0/8.9.0) id PAA12398
	for pups at minnie.cs.adfa.oz.au; Tue, 29 Dec 1998 15:03:53 -0800 (PST)
Date: Tue, 29 Dec 1998 15:03:53 -0800 (PST)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <199812292303.PAA12398 at moe.2bsd.com>
To: pups at minnie.cs.adfa.oz.au
Subject: Re: Bob Supnik's Emulator.
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Robin -

	Howdy.

> From: Robin Birch <robin at falstaf.demon.co.uk>
> I've been struggling with Bob's emulator (version 2.3d).  The main

	2.3d?  Hmmm, sounds like a little newer one than I've used in the
	past (I've updated selected modules so I'm probably running 2.3d
	but the directory is still called 2.3b ;))

> problem appears to be around the TM device driver.  I've been creating
> boot programs and data on my 11/73 under 2.11 BSD.

	I don't think that's the case - but read on and see if my new
	theory sounds plausible...

> Using separate bootstraps, boot and <program>, I have labeled and mkfs
> an RP04.  I then tried restor.  Well, I can get restor to load and run
> but it doesn't want to understand the dump file written with dd that is
> created as part of the generation of a distribution set on the 11/73.

	Umm, you can't use a 'dd'd image - you have to use 'makesimtape'
	(or a similar utility) to add the record/file/bytecount markers that
	the simulator expects to see.

> I suspect that there is some form of data conversion that I have to go
> through before I can read the files on the emulator.

	Yes, there is.  Not sure why it didn't occur to me earlier when you
	mentioned having problems.

	I assume you compiled and ran 'makesimtape' on the same system
	(Sparc) as the simulator is running.

	If so then it sounds to be like there's an endianness bug in
	makesimtape.  That wouldn't surprise me since all I have are 
	either little or pdp-11 endian systems and never tested makesimtape
	on a big endian machine.

	There are ifdefs around what I thought were the appropriate places
	for flipping bytes - what you'll need to do is get Bob's description
	of the simulated tape format (fairly simply and it's in the docs
	somewhere as I recall) and the makesimtape.c source and see where I
	"oops"d.

> Has anybody installed 2.11 on the emulator from scratch.  If so, can
> they offer any advice.
	
	Yes, I have.  But only on little endian systems.  The one time (ages
	ago) I tried the simulator on a Sparc the program dropped core because
	it wasn't bigendian capable.  That's been fixed but I've never tried
	it again.

	Steven

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id KAA15089
	for pups-liszt; Wed, 30 Dec 1998 10:21:23 +1100 (EST)
Received: from post.mail.demon.net (post-11.mail.demon.net [194.217.242.40])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id KAA15084
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 10:21:14 +1100 (EST)
Received: from [158.152.152.109] (helo=falstaf.demon.co.uk)
	by post.mail.demon.net with smtp (Exim 2.10 #2)
	id 0zv8Rf-0005cU-00; Tue, 29 Dec 1998 23:20:59 +0000
Message-ID: <Wta+ZIAyOWi2EwQ$@falstaf.demon.co.uk>
Date: Tue, 29 Dec 1998 23:20:18 +0000
To: "Steven M. Schultz" <sms at moe.2bsd.com>
Cc: pups at minnie.cs.adfa.oz.au
From: Robin Birch <robin@falstaf.demon.co.uk>
Subject: Re: Bob Supnik's Emulator.
In-Reply-To: <199812292303.PAA12398 at moe.2bsd.com>
MIME-Version: 1.0
X-Mailer: Turnpike (32) Version 3.05 <YSkKJATYm0AxAbv6xUlJqScVOx>
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

In message <199812292303.PAA12398 at moe.2bsd.com>, Steven M. Schultz
<sms at moe.2bsd.com> writes
>Robin -
>       I don't think that's the case - but read on and see if my new
>       theory sounds plausible...
>
I think that I've independantly come up with the same answer but by a
different logical root.
>> Using separate bootstraps, boot and <program>, I have labeled and mkfs
>> an RP04.  I then tried restor.  Well, I can get restor to load and run
>> but it doesn't want to understand the dump file written with dd that is
>> created as part of the generation of a distribution set on the 11/73.
>
>       Umm, you can't use a 'dd'd image - you have to use 'makesimtape'
>       (or a similar utility) to add the record/file/bytecount markers that
>       the simulator expects to see.
>
Now this is what I didn't realise at first.  All I thought makesimtape
was doing was packaging up the files, not writing some structure around
them.

>> I suspect that there is some form of data conversion that I have to go
>> through before I can read the files on the emulator.
>
>       Yes, there is.  Not sure why it didn't occur to me earlier when you
>       mentioned having problems.
>
>       I assume you compiled and ran 'makesimtape' on the same system
>       (Sparc) as the simulator is running.
>
This is the big one, no.  I had assumed that as the simulator was
emulating a PDP that it would accept files generated to look like boot
files etc built on a pdp so I'm running makesimtape in the standalone
direcctory of the 11/73.  Nieve maybe but at least it was logical :-).

>       If so then it sounds to be like there's an endianness bug in
>       makesimtape.  That wouldn't surprise me since all I have are 
>       either little or pdp-11 endian systems and never tested makesimtape
>       on a big endian machine.
>
What I'll do is build makesimtape on the sun and see what happens then.

>       There are ifdefs around what I thought were the appropriate places
>       for flipping bytes - what you'll need to do is get Bob's description
>       of the simulated tape format (fairly simply and it's in the docs
>       somewhere as I recall) and the makesimtape.c source and see where I
>       "oops"d.
Back in a mo.

Robin
____________________________________________________________________
Robin Birch     robin at falstaf.demon.co.uk

M1ASU/2E0ARJ    Old computers and radios always welcome

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id KAA15164
	for pups-liszt; Wed, 30 Dec 1998 10:34:30 +1100 (EST)
Received: from moe.2bsd.com (0 at MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id KAA15159
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 10:34:21 +1100 (EST)
Received: (from sms at localhost)
	by moe.2bsd.com (8.9.0/8.9.0) id PAA12655
	for pups at minnie.cs.adfa.oz.au; Tue, 29 Dec 1998 15:33:50 -0800 (PST)
Date: Tue, 29 Dec 1998 15:33:50 -0800 (PST)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <199812292333.PAA12655 at moe.2bsd.com>
To: pups at minnie.cs.adfa.oz.au
Subject: Re: Bob Supnik's Emulator.
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Robin -

> From robin at falstaf.demon.co.uk Tue Dec 29 15:21:08 1998
> >       Umm, you can't use a 'dd'd image - you have to use 'makesimtape'
> >       (or a similar utility) to add the record/file/bytecount markers that

> Now this is what I didn't realise at first.  All I thought makesimtape
> was doing was packaging up the files, not writing some structure around

	It's writing simulated bytecounts and simulated file and tape marks ;)

> >       I assume you compiled and ran 'makesimtape' on the same system
> >
> This is the big one, no.  I had assumed that as the simulator was

	Ah, ok - so you're running the makesimtape program on an 11.  That
	would tend to point the finger at the program not flipping the 
	'structure' bytes into correct big endian order.

> emulating a PDP that it would accept files generated to look like boot
> files etc built on a pdp so I'm running makesimtape in the standalone
> directory of the 11/73.  Nieve maybe but at least it was logical :-).

	The "data" is PDP-11 specific, but the "structure" bytes need to be
	in a canonical (big endian) form.

	I was pretty sure the endianness was ok but I guess not.  Another
	possibility is that there's an alignment disagreement.  The 11 might
	be putting something on a 2 byte bound where the Sun expects a 4 byte
	alignment.  

> >       There are ifdefs around what I thought were the appropriate places
> >       for flipping bytes - what you'll need to do is get Bob's description
> Back in a mo.

	If you find (and fix ;-)) it let me know and I'll integrate the
	changes into makesimtape.c in the 2.11 tree (and eventually in to
	the PUPS archive).

	Steve

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id KAA15193
	for pups-liszt; Wed, 30 Dec 1998 10:42:04 +1100 (EST)
Received: from henry.cs.adfa.oz.au (henry.cs.adfa.oz.au [131.236.21.158])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id KAA15188
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 10:41:57 +1100 (EST)
Received: (from wkt at localhost) by henry.cs.adfa.oz.au (8.7.5/8.7.3) id KAA23709; Wed, 30 Dec 1998 10:43:56 +1100 (EST)
From: Warren Toomey <wkt@henry.cs.adfa.oz.au>
Message-Id: <199812292343.KAA23709 at henry.cs.adfa.oz.au>
Subject: Re: Converting Sixth Edition man pages
To: grog at lemis.com (Greg Lehey)
Date: Wed, 30 Dec 1998 10:43:56 +1100 (EST)
Cc: pups at minnie.cs.adfa.oz.au
In-Reply-To: <19981229123952.B12346 at freebie.lemis.com> from Greg Lehey at "Dec 29, 98 12:39:52 pm"
Reply-To: wkt at cs.adfa.oz.au
X-Mailer: ELM [version 2.4ME+ PL22 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

In article by Greg Lehey:
> I have the Sixth Edition man pages on my machine, but I can't do much
> with them, since they use obsolete macros.  Is there any way to
> convert them to the Seventh Edition style?
> 
> Greg

Here's a quick hack which is a start. It's a Perl script called fix:

#!/usr/bin/perl
while (<>) {
        s/^\.br/.BR/;
        if (/^\.bd/) {
            if (/\"/) {
                s/^\.bd/.B/; print; $_=".br\n";
            } else {
                s/^\.bd/.B/;
            }
        }
        s/^\.bl/.BL/;
        s/^\.it/.I/;
        s/^\.sh/.SH/;
        s/^\.th/.TH/;
        s/^\.s3/.PP/;
        s/\\\*/\\/g;
        print;
}

I've run the V6 section 1 manuals through it, then nroffed them using
GNU nroff under FreeBSD 2.2.x, and I get only the following error messages:

# for i in *.1
> do  perl /tmp/fix $i | nroff -man > /dev/null
> done
<standard input>:428: can't set diversion trap when no current diversion
<standard input>:95: can't set diversion trap when no current diversion
<standard input>:77: can't set diversion trap when no current diversion
<standard input>:40: can't set diversion trap when no current diversion
<standard input>:119: can't set diversion trap when no current diversion
<standard input>:132: normal or special character expected (got a node)
<standard input>:137: a tab character  is not allowed in an escape name
<standard input>:83: cannot use a space as a starting delimiter
<standard input>:127: can't set diversion trap when no current diversion
<standard input>:93: can't set diversion trap when no current diversion
<standard input>:75: can't set diversion trap when no current diversion
<standard input>:64: can't set diversion trap when no current diversion
<standard input>:36: can't set diversion trap when no current diversion
<standard input>:154: a tab character is not allowed before an argument
<standard input>:182: a tab character is not allowed before an argument
<standard input>:182: error: end of file while ignoring input lines
<standard input>:95: can't set diversion trap when no current diversion
<standard input>:95: can't set diversion trap when no current diversion

I haven't eyeballed the output from them all, but ls(1), sh(1), db(1)
and roff(1) look ok.

Send in any improvements!!

	Warren

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id KAA15247
	for pups-liszt; Wed, 30 Dec 1998 10:59:06 +1100 (EST)
Received: from mpl.ucsd.edu (chiton.ucsd.edu [192.135.238.128])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id KAA15242
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 10:58:57 +1100 (EST)
Received: (from cdl at localhost)
	by mpl.ucsd.edu (8.8.8+Sun/8.8.8) id PAA16791;
	Tue, 29 Dec 1998 15:58:25 -0800 (PST)
Date: Tue, 29 Dec 1998 15:58:25 -0800 (PST)
From: Carl Lowenstein <cdl@mpl.ucsd.edu>
Message-Id: <199812292358.PAA16791 at mpl.ucsd.edu>
To: dave at fgh.geac.com.au, grog at lemis.com
Subject: Re: Converting Sixth Edition man pages
Cc: pups at minnie.cs.adfa.oz.au
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

> From owner-pups at minnie.cs.adfa.edu.au Tue Dec 29 15:07 PST 1998
> Date: Wed, 30 Dec 1998 09:48:10 +1100 (EST)
> From: Dave Horsfall <dave at fgh.geac.com.au>
> X-Sender: dave at fgh
> To: Greg Lehey <grog at lemis.com>
> cc: Unix Heritage Society <pups at minnie.cs.adfa.oz.au>
> 
> On Tue, 29 Dec 1998, Greg Lehey wrote:
> 
> > In fact, I'm not sure that just viewing them *would* be easier.  From
> > observation, the markup isn't too different from the -an macros.  A
> > lot of the macros seem to be the same, just in a different case.  But
> > there are enough differences that I wouldn't want to tackle it right
> > now.
> 
> Do you have thee 6th Edition documentation to tell you what the macros
> do?  I have them somewhere...
> 
> -- 

A quick check around some computers that I have on-line shows two sets
of v6 man macros, one for nroff and one for troff.  This is on a NeXT
running NeXTstep 3.3.  But I suspect that these same macros are
available on anything with a BSD 4.3 flavor.

/usr/lib/tmac/tmac.an6n
/usr/lib/tmac/tmac.an6t

About 200 lines total between them.

With the right macros, [ntg]roff should be able to do everything else.

    carl

        carl lowenstein         marine physical lab     u.c. san diego
                                                  clowenstein at ucsd.edu

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id LAA15274
	for pups-liszt; Wed, 30 Dec 1998 11:06:51 +1100 (EST)
Received: from moe.2bsd.com (0 at MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id LAA15267
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 11:06:42 +1100 (EST)
Received: (from sms at localhost)
	by moe.2bsd.com (8.9.0/8.9.0) id QAA12964
	for pups at minnie.cs.adfa.oz.au; Tue, 29 Dec 1998 16:06:30 -0800 (PST)
Date: Tue, 29 Dec 1998 16:06:30 -0800 (PST)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <199812300006.QAA12964 at moe.2bsd.com>
To: pups at minnie.cs.adfa.oz.au
Subject: Tape endianness in Bob's simulator
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Hi -

	In glancing thru Bob's simulator I spotted this:


* Endian independent binary I/O package

   For consistency, all binary data read and written by the simulator
   is stored in little endian data order.  That is, in a multi-byte
   data item, the bytes are written out right to left, low order byte
   to high order byte.  On a big endian host, data is read and written
   from high byte to low byte.  Consequently, data written on a little
   endian system must be byte reversed to be usable on a big endian
   system, and vice versa.


	Perhaps this sheds some light on why a Sparc can't read a pdp-11
	generated (via 'makesimtape') tape.

	I know I've read simulated tape files on an Intel system with no
	trouble - so it would appear that the endianness was correct.

	Good Luck Robin! ;)

	Steven

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id LAA15356
	for pups-liszt; Wed, 30 Dec 1998 11:53:44 +1100 (EST)
Received: from allegro.lemis.com (allegro.lemis.com [192.109.197.134])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id LAA15351
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 11:53:20 +1100 (EST)
Received: from freebie.lemis.com (freebie.lemis.com [192.109.197.137])
	by allegro.lemis.com (8.9.1/8.9.0) with ESMTP id LAA06005;
	Wed, 30 Dec 1998 11:21:44 +1030 (CST)
Received: (from grog at localhost)
	by freebie.lemis.com (8.9.1/8.9.0) id LAA35293;
	Wed, 30 Dec 1998 11:21:48 +1030 (CST)
Message-ID: <19981230112148.C32696 at freebie.lemis.com>
Date: Wed, 30 Dec 1998 11:21:48 +1030
From: Greg Lehey <grog@lemis.com>
To: "Steven M. Schultz" <sms at moe.2bsd.com>, pups at minnie.cs.adfa.oz.au
Subject: Re: rt11 and disk images
References: <199812292107.NAA11417 at moe.2bsd.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1i
In-Reply-To: <199812292107.NAA11417 at moe.2bsd.com>; from Steven M. Schultz on Tue, Dec 29, 1998 at 01:07:32PM -0800
WWW-Home-Page: http://www.lemis.com/~grog
Organization: LEMIS, PO Box 460, Echunga SA 5153, Australia
Phone: +61-8-8388-8286
Fax: +61-8-8388-8725
Mobile: +61-41-739-7062
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

On Tuesday, 29 December 1998 at 13:07:32 -0800, Steven M. Schultz wrote:
> 	The TQK25 formats the tape in a 'variable' record mode format that
> 	is (as far as I know) peculiar to DEC (or who ever built the TK25
> 	for them).  This makes the TK25 look and feel like a 9-track drive
> 	(record boundaries are preserved) which is nice.
>
> 	Unfortunately most (all?) QIC drives in the "PC" world end up in a
> 	'fixed record' mode (which loses the concept of record size).   So
> 	while you might have a DC600A drive on a Linux system it will, odds are,
> 	only write in fixed record mode which the TQK25 probably won't like.
> 	Have to try it and see what happens.

I believe the new CAM driver for FreeBSD 3.0 can do variable block
lengths on QIC drives.

Greg
--
See complete headers for address, home page and phone numbers
finger grog at lemis.com for PGP public key

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id XAA16818
	for pups-liszt; Wed, 30 Dec 1998 23:31:23 +1100 (EST)
Received: from post.mail.demon.net (post-11.mail.demon.net [194.217.242.40])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id XAA16813
	for <pups at minnie.cs.adfa.oz.au>; Wed, 30 Dec 1998 23:31:13 +1100 (EST)
Received: from [158.152.152.109] (helo=falstaf.demon.co.uk)
	by post.mail.demon.net with smtp (Exim 2.10 #2)
	id 0zvKmJ-0002Hl-00; Wed, 30 Dec 1998 12:31:07 +0000
Message-ID: <qKdBgFAvxhi2EwFc at falstaf.demon.co.uk>
Date: Wed, 30 Dec 1998 12:28:31 +0000
To: "Steven M. Schultz" <sms at moe.2bsd.com>
Cc: pups at minnie.cs.adfa.oz.au
From: Robin Birch <robin@falstaf.demon.co.uk>
Subject: Re: Tape endianness in Bob's simulator
In-Reply-To: <199812300006.QAA12964 at moe.2bsd.com>
MIME-Version: 1.0
X-Mailer: Turnpike (32) Version 3.05 <YSkKJATYm0AxAbv6xUlJqScVOx>
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

In message <199812300006.QAA12964 at moe.2bsd.com>, Steven M. Schultz
<sms at moe.2bsd.com> writes
>       I know I've read simulated tape files on an Intel system with no
>       trouble - so it would appear that the endianness was correct.
>
>       Good Luck Robin! ;)
>
>       Steven
Steven,
I now have a makesimtape that creates the bootstrap files correctly.  I
have found, I think, one bug and partly rewritten another bit just to
put my mind at rest about a couple of things.  I still can't create the
root correctly though.

What I have found:

1) Your endianness is correct, it took me a couple of sample programs
and rewrites to prove it.  In doing this I have replaced trl with
another bit of code that does the same thing but is easier to play
around with to change the byte orders.

2) There are two bugs in the use of writev.  These are:

2.1) When writing the headers and data you are writing a long to the
file where iovec only supports (I think) an unsigned short.
2.2) When writing the tape marks you are writing an integer as though it
was a long.

Of the two 2.2 is the most significant (I think).

After correcting both of these.  By changing zero from an int to a long
and by replacing the writevs with writes for the headers, data and
trailers I have a version of makesimtape that creates a bootstrap file
that works.

I can load and run all of the bootstrap programs as though I was looking
at a real pdp which I couldn't before. This makes me think that I have
probably got makesimtape about right.

Now for the bad bit.  I have created a root.dump then run it through
makesimtape with the command file:

/usr/root.dump 2
* 1

and it won't load from restor.  I get a succession of "missing address
(header) block" errors but I successfully detect the end of the tape and
restor stops running, as it is supposed to do.

So, am I doing something wrong in creating the root file? or is there
something still wrong with makesimtape?.  This is probably a red herring
but the distribution tapes are written with a blocksize of 20 for all of
the data after the bootstraps whilst makesimtape only writes multiples
of 512.

Advice please

Robin
____________________________________________________________________
Robin Birch     robin at falstaf.demon.co.uk

M1ASU/2E0ARJ    Old computers and radios always welcome

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id CAA17289
	for pups-liszt; Thu, 31 Dec 1998 02:53:20 +1100 (EST)
Received: from moe.2bsd.com (0 at MOE.2BSD.COM [206.139.202.200])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id CAA17284
	for <pups at minnie.cs.adfa.oz.au>; Thu, 31 Dec 1998 02:53:10 +1100 (EST)
Received: (from sms at localhost)
	by moe.2bsd.com (8.9.0/8.9.0) id HAA10714
	for pups at minnie.cs.adfa.oz.au; Wed, 30 Dec 1998 07:52:58 -0800 (PST)
Date: Wed, 30 Dec 1998 07:52:58 -0800 (PST)
From: "Steven M. Schultz" <sms@moe.2bsd.com>
Message-Id: <199812301552.HAA10714 at moe.2bsd.com>
To: pups at minnie.cs.adfa.oz.au
Subject: Re: Tape endianness in Bob's simulator
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

Robin -

> From robin at falstaf.demon.co.uk Wed Dec 30 04:31:15 1998
> What I have found:
> 
> 1) Your endianness is correct, it took me a couple of sample programs

	Whew - that's a relief.

> 2) There are two bugs in the use of writev.  These are:
> 
> 2.1) When writing the headers and data you are writing a long to the
> file where iovec only supports (I think) an unsigned short.

	iovec can write as much as it wants to.  To write a 'long' one
	simply stuffs the _address_ of the long variable into iov_base
	and "sizeof long" into iov_len.  I'm not sure what you mean by
	iovec only supporting a short.

> 2.2) When writing the tape marks you are writing an integer as though it
> was a long.

	It isn't?  Oops.

	On some systms (those where "sizeof long == sizeof int") 'zero' 
	would be a long.

	Sigh - I've been contaminated by machines where that assumption is
	true.

> Now for the bad bit.  I have created a root.dump then run it through
> makesimtape with the command file:
> 
> /usr/root.dump 2
> * 1
> 
> and it won't load from restor.  I get a succession of "missing address
> (header) block" errors but I successfully detect the end of the tape and
> restor stops running, as it is supposed to do.

> So, am I doing something wrong in creating the root file? or is there

	Uh, yes ;)

	'dump' tapes *must* consist of 10kb records.  'restore' is expecting
	10kb (or 20 sector) records and complaining about the shortness of
	what it is reading.

> something still wrong with makesimtape?.  This is probably a red herring
> but the distribution tapes are written with a blocksize of 20 for all of
> the data after the bootstraps whilst makesimtape only writes multiples
> of 512.

	Correct.  The bootblock+boot needs to be 512 byte records so the
	boot rom can deal with it.  The standalone programs are 1kb records
	(because that's the filesystem block size and to make the 'seeking'
	in the pseudo-stdio routines possible/simple).

	All the _data_ files are 10kb records because that's what 'tar' and
	'dump' use.

	Steven

Received: (from major at localhost)
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) id DAA17381
	for pups-liszt; Thu, 31 Dec 1998 03:15:43 +1100 (EST)
Received: from m4.c2.telstra-mm.net.au ([24.192.3.19])
	by minnie.cs.adfa.edu.au (8.9.1/8.9.1) with ESMTP id DAA17376
	for <pups at minnie.cs.adfa.oz.au>; Thu, 31 Dec 1998 03:15:36 +1100 (EST)
Received: from m5.c2.telstra-mm.net.au (m5.c2.telstra-mm.net.au [24.192.3.20])
	by m4.c2.telstra-mm.net.au (8.8.6 (PHNE_14041)/8.8.6) with ESMTP id DAA06722
	for <pups at minnie.cs.adfa.oz.au>; Thu, 31 Dec 1998 03:15:32 +1100 (EDT)
Received: from nsw.bigpond.net.au (UNKNOWN061179.rev.telstra-mm.net.au [24.192.61.179])
	by m5.c2.telstra-mm.net.au (8.8.6 (PHNE_14041)/8.8.6) with ESMTP id DAA17024
	for <pups at minnie.cs.adfa.oz.au>; Thu, 31 Dec 1998 03:15:31 +1100 (EDT)
Message-ID: <368A5145.BE11CED3 at nsw.bigpond.net.au>
Date: Thu, 31 Dec 1998 03:13:57 +1100
From: Michael Kraus <belfry@nsw.bigpond.net.au>
X-Mailer: Mozilla 4.5 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: pups at minnie.cs.adfa.oz.au
Subject: PDP Free to good home...
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-pups at minnie.cs.adfa.edu.au
Precedence: bulk

G'day all...

I've got a DEC Pro/350 machine (including Pro OS and manuals, etc), as
well as a serial printer for it.

I've been planning on putting UNIX on it, and tracking down a network
card for it.  However, I don't really have enough time or space to do
such.

It is a PDP (unsure if it is a PDP-11 or not... I did find out, but that
was a while ago). I'm pretty sure that you will be able to get it to run
UNIX (v6, I think).

Rather then let it sit useless in my hall, I thought one of you guys (or
girls, as the case may be) may appreciate it more than what I currently
am.

The only cost involved would be the cost of getting yourself here,
picking it up and taking it back home.  FYI, I live in Paddington (NSW).

Email me if you are interested.

Michael.

P.s. It is in my posssesion as my father is a doctor and it was in use
for many years in his practice.  (Its only recently that they upgraded
as it suited the purpose so well!)


