X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.8 required=5.0 tests=DKIM_INVALID,DKIM_SIGNED,
	FREEMAIL_FROM,MAILING_LIST_MULTI,T_SCC_BODY_TEXT_LINE autolearn=ham
	autolearn_force=no version=3.4.4
Received: (qmail 23712 invoked from network); 11 Aug 2022 09:01:49 -0000
Received: from minnie.tuhs.org (50.116.15.146)
  by inbox.vuxu.org with ESMTPUTF8; 11 Aug 2022 09:01:49 -0000
Received: from minnie.tuhs.org (localhost [IPv6:::1])
	by minnie.tuhs.org (Postfix) with ESMTP id 9C9AB404ED;
	Thu, 11 Aug 2022 19:01:26 +1000 (AEST)
Received: from mout.web.de (mout.web.de [217.72.192.78])
	by minnie.tuhs.org (Postfix) with ESMTPS id 5967E4001F
	for <tuhs@tuhs.org>; Thu, 11 Aug 2022 19:01:20 +1000 (AEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=web.de;
	s=dbaedf251592; t=1660208477;
	bh=69sZc2wGZgXNvQ2zDe3cNcpHrBwPcprg4dBiTC3EbVI=;
	h=X-UI-Sender-Class:Date:Subject:To:References:From:In-Reply-To;
	b=VFLqFxiLWLCnlHMaW6QOlStIkwzYbB0I4DxTETTEaf9CYlt8yPqUgYd3D17YKRpAW
	 F2/D/6OCSBOcSVppYkXevFf5YcWjLciqdFEhkzCk3NjRNmnAjOp8P113G9PNFhV6OG
	 gd/OgGTjsT/yM6pOoOoCbdl41cj2qOrJkejNq284=
X-UI-Sender-Class: c548c8c5-30a9-4db5-a2e7-cb6cb037b8f9
Received: from [192.168.178.54] ([46.80.67.117]) by smtp.web.de (mrweb106
 [213.165.67.124]) with ESMTPSA (Nemesis) id 1MQxo5-1nzjgY0ciN-00Nw2W; Thu, 11
 Aug 2022 11:01:17 +0200
Message-ID: <fa94fc3d-1046-8b8a-b679-71c7f7bf4db3@web.de>
Date: Thu, 11 Aug 2022 11:01:16 +0200
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101
 Thunderbird/91.8.0
To: Paul Ruizendaal <pnr@planet.nl>,
 The Eunuchs Hysterical Society <tuhs@tuhs.org>
References: <CF415BC3-1959-415A-9715-99AC7EB68E2E@planet.nl>
From: Holger Veit <hveit01@web.de>
In-Reply-To: <CF415BC3-1959-415A-9715-99AC7EB68E2E@planet.nl>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Provags-ID: V03:K1:Nw5FrXJtpRYeSBHX/5X19/yZ9Xd/ceU78bQkRczK/GiUJ6NZUjj
 h/Itc6ySFHTzNPUkU8TmJK3HwMf+76CKoY4NJTAmKMh8pQQI1+hINZH1vt+cRgIy4QyzMz5
 nzv4FliVNwHmp7UCofbiQSBY7TYOhr4TtHWK6yG3LoHqRHneR0DiJJnFclPak5qWpii9u34
 czrqYi3pqpO1C/383IIiw==
X-UI-Out-Filterresults: notjunk:1;V03:K0:H+VoK27aXXo=:QvHQdaHRQX7TLvub++wdGX
 a2Pny4gR4V9/AVu4AycSlzzsvUFUVWAI4OEvam6ELEHIK84yfNX/0Dqhj6ylOJ3HP1f6QESl+
 VDdgmAcceJ/ubBz0iYcnYst8PBQjM6PXfj76OvyYLI4CiNfXuuFxin6+qAJwDb7UPR8Z8rEOO
 svLbIbPzfi/5KdvnghKDs2WAKjSLi5VuJNqmNFvlh1PgwNJoAYJ5FVKMH23FSzTZm91HPTDKK
 AnVzcbBifA37wm1J0s5Sob94aiP7/8PifclqG5v0ZZqWz8zyEQDweOaIDnjBEmk1fwziymrZX
 yqKWf2XaKaOaM/12AnagTv1yTN056puzUJhDL10YQod9oVnP1UP4Bszu671N51qGyH4XU2zmb
 lo3A55zrP40ChGBqTSeAxGUhX4BrSDs0vw1eMPwisC5d5viCcnG/TBQeo5/yybcqoIg76JosC
 heZeZw9T/LdDOhhOiNFQ7iDxgIFdQSaeNQ6IIstAHHG1Pbylce/nWtp3xKMLY5QZetuuLslHm
 KMnxXKwZ7+ygVTxSs7Ki4wBcAH6LYFp96LtIdATtVFjSIBi8PVi9UqzhAXbaraNT4qPQ672Gt
 x71MzIvQGWzStIFmz39zOXnBZJINkgtVx+XRX5mEk+5EhBCdMhqdbwXHS4Oz5cCOGvzfkQDfH
 iIVTbhO+1Awkw1lYtP72dcMw3ptMQ9eulHvNbevf3LDa+h7VST1nDOv/NQ0KFXPpS1g0hyJod
 oVmj4Ra1VPoMlh+G9hLWvcekr6qiSbuDZNKloDYkxoDIocAWjkKPDraDP0oywbHcqQDoOvTFC
 8fFf/c8Qu1C6n3ojqsf+FHlq2d1SJpN2g3p7G5R7RuEykhDvjorUU5XgBgmJZXmyhOqoLfJj6
 HQWCYOV/N3hehiYtc/HQyWJ1qJS57XCwwdqAwEm7yaNstcC1vtVduI0u+xPcwBP+ESRyYbNJb
 kDP0v08NC+h4zudfqxKgKfKh8JE7b1U7yPxIjbUhi9yvLATW2XJHtoR4FETKvQ4j6HF0bl5uu
 0Ox2MHlTvbVjJKFe9IwOn6g8rRmGWeMYg5EPZH3Ob9w4c1+FXl5tQ6BjEoutO5ylfz7ipsSYo
 +hyVnPwuQoquAov+H7WDxQqJOZ1qdi+j9bCdz9tW4y2NmfLYThpZaYudA==
Message-ID-Hash: RN3GCS6IHBZGVQUDNPKV4B6IOTJASCZW
X-Message-ID-Hash: RN3GCS6IHBZGVQUDNPKV4B6IOTJASCZW
X-MailFrom: hveit01@web.de
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; header-match-tuhs.tuhs.org-0; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
X-Mailman-Version: 3.3.6b1
Precedence: list
Subject: [TUHS] Re: PCS Munix kernel source
List-Id: The Unix Heritage Society mailing list <tuhs.tuhs.org>
Archived-At: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/message/RN3GCS6IHBZGVQUDNPKV4B6IOTJASCZW/>
List-Archive: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/>
List-Help: <mailto:tuhs-request@tuhs.org?subject=help>
List-Owner: <mailto:tuhs-owner@tuhs.org>
List-Post: <mailto:tuhs@tuhs.org>
List-Subscribe: <mailto:tuhs-join@tuhs.org>
List-Unsubscribe: <mailto:tuhs-leave@tuhs.org>


Am 11.08.2022 um 08:04 schrieb Paul Ruizendaal:
> MUNIX was an AT&T SVR3.x implementation ...
> Are you sure? Could it perhaps be SVR2? (I don=E2=80=99t see any STREAMS=
 stuff that one would expect for R3).
It is a hybrid system. I found files and similarities in R1, R2 as well
as R3 - the C compiler (in my queue) for instance is likely derived (and
heavily modified) from a R1 origin, but in this version itself linked
with a C library where parts are newer, namely from a later released
version (in the update 3-3.1 in tape IS0463P) which I'll add in the
future. I am sure that the kernel libs will then reveal the missing
streams stuff.

I think it was a rolling release which also still contains parts of the
older 16 bit MUNIX for a 68010 with Motorolas FFP lib - the kernel still
contains an obsolete module named m68341 which emulates an incompatible
floating point lib. The 32 bit system here demands a 68020/68881
combination. There are also several QBUS I/O drivers which seem to stem
from the 16 bit systems which likely do no longer access real existing
hardware because the newer systems used a communication controller board
named ICC with an own 68010 processor and a highly stripped down
tailored UNIX (?) on it. This is also on my to-do list.

@readers of TUHS: can anyone say something about m68341? There are
Motorola FFP libs elsewhere on the net, but this appears to be a
complete copro emulation which intercepts the line-F interrupt which I
could not locate so far. Internally, it is pretty much optimized - I
doubt it was cooked at PCS itself, so it is likely a Motorola product.
And no, it has absolutely nothing to do with the embedded controller
MC68341.

Currently I am dissecting the also rather unique a68 assembler which is
a modified Trix/Mical assembler; after that, I'll look into the IS0463P
update.
>> The interesting feature of this kernel is the integration of the
>> Newcastle Connection network
> One of my interests is Unix (packet) networking 1975-1985 and that inclu=
des Newcastle Connection. I=E2=80=99ve so far not dived deep into this, bu=
t your work may be the trigger for some further investigation.
>
> My understanding so far (from reading the paper a few years ago) is that=
 Newcastle Connection works at the level of libc, substituting  system cal=
ls like open() and exec() with library routines that scan the path, and if=
 it is a network path invokes user mode routines that use remote procedure=
 calls to give the illusion of a networked kernel. I=E2=80=99ve briefly lo=
oked at the Git repo, but I do not see that structure in the code. Could y=
ou elaborate a bit more on how Newcastle Connection operates in this kerne=
l? Happy to communicate off-list if it goes in too much detail.
Maybe the original NC did so, but here there are numerous additions to
the kernel, including a new syscall uipacket() which is the gateway into
the MUNET/NC implementation. Stuff is in /usr/sys/munet, the low level
networking is in uipacket.c and uiswtch.c which will process RPC
open/close/read/write/exec etc. calls, as well support master and
diskless nodes). The OS code is full of "if (master) {...} else {...}'
code which then redirects detected access to remote paths to the network
handler.

>
> I note that the repo Readme says that the kernel only does some basic IP=
 networking as a carrier, but I also see some files in the tree that seem =
to implement a form of tcp (and that seem unrelated to the early Unix tcp/=
ip=E2=80=99s that I have seen so far). Or am I reading too much into these=
 files?
>
> =3D=3D=3D
>
> Re-reading the Newcastle Connection paper also brought up some citations=
 from Bell Labs work that seems to have been lost. There is a reference to=
 =E2=80=9CRIDE=E2=80=9D which appears to be a system similar to Newcastle =
Connection. The RIDE paper is from 1979 and it mentions that RIDE is a Dat=
akit re-implementation of earlier an earlier system that ran on Spider. An=
y recollections about these things among the TUHS readership?
>
> The other citation is for J. C. Kaufeld and D. L. Russell, "Distributed =
UNIX System", in Workshop on Fundamental Issues in Distributed Computing, =
ACM SIGOPS and SIGPLAN (15-17 Dec. 1980). It seems contemporaneous with th=
e Luderer/Marshall/Chu work on S/F-Unix. I could not find this paper so fa=
r. Here, too, any recollections about this distributed Unix among the TUHS=
 readership?
Good to mention this. I am interested in such stuff as well.

Regards
Holger
