X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-0.8 required=5.0 tests=DKIM_INVALID,DKIM_SIGNED,
	HTML_FONT_LOW_CONTRAST,HTML_MESSAGE,MAILING_LIST_MULTI autolearn=ham
	autolearn_force=no version=3.4.4
Received: (qmail 436 invoked from network); 10 Oct 2022 21:39:10 -0000
Received: from minnie.tuhs.org (50.116.15.146)
  by inbox.vuxu.org with ESMTPUTF8; 10 Oct 2022 21:39:10 -0000
Received: from minnie.tuhs.org (localhost [IPv6:::1])
	by minnie.tuhs.org (Postfix) with ESMTP id 4C21240EE6;
	Tue, 11 Oct 2022 07:38:35 +1000 (AEST)
Received: from mail-vs1-f46.google.com (mail-vs1-f46.google.com [209.85.217.46])
	by minnie.tuhs.org (Postfix) with ESMTPS id F1C7840EE5
	for <tuhs@tuhs.org>; Tue, 11 Oct 2022 07:38:29 +1000 (AEST)
Received: by mail-vs1-f46.google.com with SMTP id 128so6019755vsz.12
        for <tuhs@tuhs.org>; Mon, 10 Oct 2022 14:38:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=ccc.com; s=google;
        h=cc:to:subject:message-id:date:from:in-reply-to:references
         :mime-version:from:to:cc:subject:date:message-id:reply-to;
        bh=oxlnxn6ExvnUDALMRDmGfk75FZrkoQe+MAg8ABEzc/4=;
        b=OzvwU9Z9x5fgT+rHOGwGDSNuID9SCbIuznk/B1cUl/kb05qcjc7bzFA9QcbOrMBg5+
         UdvhcSc4kLgiV/1JKd8Js+zDz6MMTtkA7GjvoW4ryKFNIUWCvBjP5qYHxmUG3wttrM2r
         pIaMVmINzzNMDyxsLu1O554i1SX7iSUftCeAg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=cc:to:subject:message-id:date:from:in-reply-to:references
         :mime-version:x-gm-message-state:from:to:cc:subject:date:message-id
         :reply-to;
        bh=oxlnxn6ExvnUDALMRDmGfk75FZrkoQe+MAg8ABEzc/4=;
        b=SibYYK+6+eyyHyjOMljr3MJISmXZNlyvMsN7LGwWLMzyo+oAG4GSxa85BIyN8kaIMj
         RUiMtiAL+3YoDavAKjpspludw2o+fiwhwzSNzq+91QIctGmn53Cb9CRqqqXVquZxMQU/
         GgUwB0xXHBbP+hE+gJY2sOQI7LCb8EHu5Y+jaRdLSOeT2VbPfDRtA4ba912Ds3QmxJ6r
         uoQqgaoPePaD+pzTMkFaUiAlvsLMD2tt/qOOVxXI5bDQ2K01lA0AJJ/tM0EHIfnUJtHG
         Rrhv2tx56UDhpEdBIisx+tfzWInkDDVsZ59Sih9LvXHoFxPqrPZFXiL1RKoobi1J5fc8
         YShg==
X-Gm-Message-State: ACrzQf0ZbTcaftDUanpWCfWBgI/Y7uD1MjUEKS/10bEkE+1nCPNBmizD
	c1rJ01gIlHS81mY4zwW7b1OejRS9qK5pMTnAeC2wFAXRKC0=
X-Google-Smtp-Source: AMsMyM43Vm5NZtmsP+Olj2BAXDk/n4swUXSb8ecSNywI6x1EXbti4+fuoL7s1CIysE8tQ9/LG08AHYNwSnz0B67cDHU=
X-Received: by 2002:a67:a449:0:b0:39a:d4f5:f3f1 with SMTP id
 p9-20020a67a449000000b0039ad4f5f3f1mr9934378vsh.17.1665437848955; Mon, 10 Oct
 2022 14:37:28 -0700 (PDT)
MIME-Version: 1.0
References: <CAEMRDeG90fL81OWfFyNZNqVaC1ZHJGcNUTgvEDqcuR8yiLqrsQ@mail.gmail.com>
 <CAC20D2NjHjjizq8xixSGhcxPpA01Gs3V6C0qWDgXzE-Md4w6ag@mail.gmail.com> <CAEMRDeEFgu5P1f49Q6h9vR3cM62yH7XEjYn1ujOLR4E1Yfmbnw@mail.gmail.com>
In-Reply-To: <CAEMRDeEFgu5P1f49Q6h9vR3cM62yH7XEjYn1ujOLR4E1Yfmbnw@mail.gmail.com>
From: Clem Cole <clemc@ccc.com>
Date: Mon, 10 Oct 2022 17:37:00 -0400
Message-ID: <CAC20D2OUwYEBMDBk80Ngnojmb=on_ArHHF78m3tHe8tSd0XsAw@mail.gmail.com>
To: Michael Casadevall <michael@casadevall.pro>
Content-Type: multipart/alternative; boundary="00000000000062020b05eab4f77b"
Message-ID-Hash: PCPCMWBTTA4WF4ASYFSML7FM53NPWWJS
X-Message-ID-Hash: PCPCMWBTTA4WF4ASYFSML7FM53NPWWJS
X-MailFrom: clemc@ccc.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; header-match-tuhs.tuhs.org-0; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: tuhs@tuhs.org
X-Mailman-Version: 3.3.6b1
Precedence: list
Subject: [TUHS] Re: Attempting To Build NOSC and BBN UNIXs + ARPANET code
List-Id: The Unix Heritage Society mailing list <tuhs.tuhs.org>
Archived-At: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/message/PCPCMWBTTA4WF4ASYFSML7FM53NPWWJS/>
List-Archive: <https://www.tuhs.org/mailman3/hyperkitty/list/tuhs@tuhs.org/>
List-Help: <mailto:tuhs-request@tuhs.org?subject=help>
List-Owner: <mailto:tuhs-owner@tuhs.org>
List-Post: <mailto:tuhs@tuhs.org>
List-Subscribe: <mailto:tuhs-join@tuhs.org>
List-Unsubscribe: <mailto:tuhs-leave@tuhs.org>

--00000000000062020b05eab4f77b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

On Mon, Oct 10, 2022 at 4:49 PM Michael Casadevall <michael@casadevall.pro>
wrote:

>
> There are SCCS references in the code from 78/79, references to the V7 CC
> compiler and updates.
>
The 'V7 compiler' is 'Typesetter C' - it was released two compiler DWB on
V6.

SCCS had a interesting life.


> SCCS was introduced publicly with PWB,
>
Indeed.



> which is why I suspect it might have been used.
>
It might have been at MIT (it was a UCB and CMU BTW) - but I believe Al
Nemeth  - while it might have been a person disk, -- I'm pretty sure BBN
would have tried to kept those bits out of the building. - certainly out of
the mainstream of any project -- you see in the directories foo.c and
foo.c~ files -- this was typical of the day.  If you were using SCCS less
you would see a lot more evidence in the trees (again look at the UCB trees
- you can see once Ken brought it to UCB, wnj started to use it).




> The code also uses some C syntax the stock compiler dislikes
> (specifically, it was unhappy register in the function declaration).
>
As I said -- I suspect the typesetter compiler by then.  If userspace code
is using <stdio.h> and linking libS.a not Mike Lesk's portable I/O
library that's a huge clue also BTW.  But Dennis did a lot of work to the
compiler in the DWB timeframe.  A number of language features were added,
he changed the syntax of things like =3D+ to +=3D and the like.   This is w=
hy
code that targets the Typesetter C compiler has a very difficult time going
back to the V6 (or basic PWB 1.0) compilers.   As I said in the other
message, this was the compiler he and Brian describe in the book - also
note a couple of us here reviewed different editions of it.

I suspect what you need is the original DWB 1.0 release that includes the
'typesetter' compiler -- that will bootstrap on a V6 system and will create
a v6 compiler.  I'm not sure we have that in the archives.  I think we have
the later PWB 2.0 release - that comes without the compiler.

Beside the startup code (which is in mch.c and uses a preprocessor macro),
> is there anything specific gotchas in regards to models? I tried building
> CPU40 and CPU70, and configuring simh, just to eliminate that gotcha, but
> the only difference seems to be early initialization code ...
>
Quick glance is that BBN was running a 45 - so I'd build for that to
start.   45s and 70s's are more similar but not exactly the same.  Don't
build for a 40. They are quite different.
Set simh up as a 45 and see if that just works.

If not .... then I would drop back and pull everything out to as simple a
UNIX as possible...  since it's a v6 system without any of the networking
-- as much line Ken and Dennis as you can.  Configure that a 40 and follow
Dennis's and Ken's instructions (which for v6 is a a 40) -- get that to
boot and a simh based 40.    Then reconfigure as a simh based 45 and make
that work.  Then and only then turn on the BBN stuff.

Feel free to send me email off line and I can try to help a little.  Note:
I have not played with a 45 in years. But I ran V5, V6. and V7 on 40s, 45
and 70s back in the day.  I have a PiDP 11/70 behind me so modulo being way
to busy, I can try to help a little.
=E1=90=A7

--00000000000062020b05eab4f77b
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div dir=3D"ltr"><div class=3D"gmail_default" style=3D"fon=
t-family:arial,helvetica,sans-serif"><br></div></div><br><div class=3D"gmai=
l_quote"><div dir=3D"ltr" class=3D"gmail_attr">On Mon, Oct 10, 2022 at 4:49=
 PM Michael Casadevall &lt;<a href=3D"mailto:michael@casadevall.pro">michae=
l@casadevall.pro</a>&gt; wrote:</div><blockquote class=3D"gmail_quote" styl=
e=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);paddin=
g-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_quote"><div><br>There are =
SCCS references in the code from 78/79, references to the V7 CC compiler an=
d updates.</div></div></div></blockquote><div><div class=3D"gmail_default" =
style=3D"font-family:arial,helvetica,sans-serif"><font color=3D"#0000ff">Th=
e &#39;V7 compiler&#39; is &#39;Typesetter C&#39; - it was released two com=
piler DWB on V6.</font></div><div class=3D"gmail_default" style=3D"font-fam=
ily:arial,helvetica,sans-serif"><br></div><div class=3D"gmail_default" styl=
e=3D"font-family:arial,helvetica,sans-serif"><font color=3D"#0000ff">SCCS h=
ad a interesting life.</font></div></div><div>=C2=A0<br></div><blockquote c=
lass=3D"gmail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px soli=
d rgb(204,204,204);padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_q=
uote"><div>SCCS was introduced publicly with PWB, </div></div></div></block=
quote><div><div class=3D"gmail_default" style=3D"font-family:arial,helvetic=
a,sans-serif"><font color=3D"#0000ff">Indeed.</font></div><br></div><div>=
=C2=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0px 0px 0px 0=
.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir=3D"l=
tr"><div class=3D"gmail_quote"><div>which is why I suspect it might have be=
en used.</div></div></div></blockquote><div><span class=3D"gmail_default" s=
tyle=3D"font-family:arial,helvetica,sans-serif"><font color=3D"#0000ff">It =
might have been at MIT (it was a UCB and CMU BTW) - but I believe Al Nemeth=
=C2=A0 - while it might have been a person disk, -- I&#39;m pretty sure BBN=
 would have tried to kept those bits out of the building. - certainly out o=
f the mainstream of any project -- you=C2=A0</font></span><font color=3D"#0=
000ff"><span class=3D"gmail_default" style=3D"font-family:arial,helvetica,s=
ans-serif">see in the directories foo.c and foo.c~ files -- this was typica=
l of the day.=C2=A0 If you were using SCCS less you would see a lot more ev=
idence in the trees (again look at the UCB trees - you can see once Ken bro=
ught it to UCB, wnj started to use it).</span>=C2=A0</font></div><div><br><=
/div><div><br></div><div>=C2=A0</div><blockquote class=3D"gmail_quote" styl=
e=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);paddin=
g-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_quote"><div>The code also =
uses some C syntax the stock compiler dislikes (specifically, it was unhapp=
y=C2=A0register in the function declaration). </div></div></div></blockquot=
e><div><div class=3D"gmail_default" style=3D"font-family:arial,helvetica,sa=
ns-serif"><font color=3D"#0000ff">As I said -- I suspect the typesetter com=
piler by then.=C2=A0 If userspace code is using &lt;stdio.h&gt;=C2=A0and li=
nking libS.a not Mike Lesk&#39;s portable I/O library=C2=A0that&#39;s a hug=
e clue also BTW.=C2=A0 But Dennis did a lot of work to the compiler in the =
DWB timeframe.=C2=A0 A number of language features were added, he changed t=
he syntax of things like =3D+ to=C2=A0+=3D and the like.=C2=A0 =C2=A0This i=
s why code that targets the Typesetter C compiler has a very difficult time=
 going back to the V6 (or basic PWB 1.0) compilers.=C2=A0 =C2=A0As I said i=
n the other message, this was the compiler he and Brian describe in the boo=
k - also note a couple of us here reviewed different editions of it.</font>=
</div><div class=3D"gmail_default" style=3D"font-family:arial,helvetica,san=
s-serif"><font color=3D"#0000ff"><br></font></div><div class=3D"gmail_defau=
lt" style=3D"font-family:arial,helvetica,sans-serif"><font color=3D"#0000ff=
">I suspect what you need is the original DWB 1.0 release that includes the=
 &#39;typesetter&#39; compiler -- that will bootstrap on a V6 system and wi=
ll create a v6 compiler.=C2=A0 I&#39;m not sure we have that in the archive=
s.=C2=A0 I think we have the later PWB 2.0 release - that comes without the=
 compiler.</font></div><br></div><blockquote class=3D"gmail_quote" style=3D=
"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-le=
ft:1ex"><div dir=3D"ltr"><div class=3D"gmail_quote">Beside the startup code=
 (which is in mch.c and uses a preprocessor macro), is there anything speci=
fic gotchas in regards to models? I tried building CPU40 and CPU70, and con=
figuring simh, just to eliminate that gotcha, but the only difference seems=
 to be early initialization code ...<br></div></div></blockquote><div><span=
 class=3D"gmail_default" style=3D"font-family:arial,helvetica,sans-serif"><=
font color=3D"#0000ff">Quick glance is that BBN was running a 45 - so I&#39=
;d build for that to start.=C2=A0 =C2=A045s and 70s&#39;s are more similar =
but not exactly the same.=C2=A0 Don&#39;t build for a 40. They are quite di=
fferent.</font></span></div><div><span class=3D"gmail_default" style=3D"fon=
t-family:arial,helvetica,sans-serif"><font color=3D"#0000ff">Set simh up as=
 a 45 and see if that just works.</font></span></div><div><span class=3D"gm=
ail_default" style=3D"font-family:arial,helvetica,sans-serif"><font color=
=3D"#0000ff"><br></font></span></div><div><span class=3D"gmail_default" sty=
le=3D"font-family:arial,helvetica,sans-serif"><font color=3D"#0000ff">If no=
t .... then I would drop back and pull everything out to as simple a UNIX a=
s possible...=C2=A0 since it&#39;s a v6 system without any of the networkin=
g -- as much line Ken and Dennis as you can.=C2=A0 Configure that a 40 and =
follow Dennis&#39;s and Ken&#39;s instructions (which for v6 is a a=C2=A040=
) -- get that to boot and a simh based 40.=C2=A0 =C2=A0 Then reconfigure as=
 a simh based 45 and make that work.=C2=A0 Then and only then turn on the B=
BN stuff.</font></span></div><div><span class=3D"gmail_default" style=3D"fo=
nt-family:arial,helvetica,sans-serif"><font color=3D"#0000ff"><br></font></=
span></div><div><span class=3D"gmail_default" style=3D"font-family:arial,he=
lvetica,sans-serif"><font color=3D"#0000ff">Feel free to send me email off =
line=C2=A0and I can try to help a little.=C2=A0 Note: I have not played wit=
h a 45 in years. But I ran V5, V6. and V7 on 40s, 45 and 70s back in the da=
y.=C2=A0 I have a PiDP 11/70 behind me so modulo being way to busy, I can t=
ry to help a little.</font></span></div></div></div><div hspace=3D"streak-p=
t-mark" style=3D"max-height:1px"><img alt=3D"" style=3D"width:0px;max-heigh=
t:0px;overflow:hidden" src=3D"https://mailfoogae.appspot.com/t?sender=3DaY2=
xlbWNAY2NjLmNvbQ%3D%3D&amp;type=3Dzerocontent&amp;guid=3Dc495b545-ff34-4483=
-917f-80d38dcf633a"><font color=3D"#ffffff" size=3D"1">=E1=90=A7</font></di=
v>

--00000000000062020b05eab4f77b--
