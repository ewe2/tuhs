X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on inbox.vuxu.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=5.0 tests=LOTS_OF_MONEY,
	MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE autolearn=ham autolearn_force=no
	version=3.4.4
Received: (qmail 14796 invoked from network); 31 May 2020 19:38:41 -0000
Received: from minnie.tuhs.org (45.79.103.53)
  by inbox.vuxu.org with ESMTPUTF8; 31 May 2020 19:38:41 -0000
Received: by minnie.tuhs.org (Postfix, from userid 112)
	id 64DC89CA92; Mon,  1 Jun 2020 05:38:36 +1000 (AEST)
Received: from minnie.tuhs.org (localhost [127.0.0.1])
	by minnie.tuhs.org (Postfix) with ESMTP id 9339993D52;
	Mon,  1 Jun 2020 05:38:12 +1000 (AEST)
Received: by minnie.tuhs.org (Postfix, from userid 112)
 id 0782493D52; Mon,  1 Jun 2020 05:38:10 +1000 (AEST)
X-Greylist: delayed 2519 seconds by postgrey-1.36 at minnie.tuhs.org;
 Mon, 01 Jun 2020 05:38:09 AEST
Received: from knecht.neophilic.com (knecht.neophilic.com [70.36.157.234])
 by minnie.tuhs.org (Postfix) with ESMTPS id 5B4BF93D46
 for <tuhs@minnie.tuhs.org>; Mon,  1 Jun 2020 05:38:09 +1000 (AEST)
Received: from irma.neophilic.com (2-246.dhcp.neophilic.net [10.0.2.246])
 (authenticated bits=0)
 by knecht.neophilic.com (8.15.2/8.15.2) with ESMTPSA id 04VIu7Ej094487
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128 verify=NO)
 for <tuhs@minnie.tuhs.org>; Sun, 31 May 2020 11:56:08 -0700 (PDT)
 (envelope-from tuhs@eric.allman.name)
X-Authentication-Warning: knecht.neophilic.com: Host 2-246.dhcp.neophilic.net
 [10.0.2.246] claimed to be irma.neophilic.com
To: tuhs@minnie.tuhs.org
References: <1jeHk5-5LM-00@marmaro.de>
 <CAC20D2Pm9_u8BiExe+ELjt0jb4qnB-d-bUFbNCvpXJnDma68yQ@mail.gmail.com>
 <1jfNb2-7JV-00@marmaro.de>
 <CAC20D2P6_knffBX66XMb-SZf+om1AOooN36xaea+M0=Tb5weqg@mail.gmail.com>
 <bd93f90e-c613-3ebf-749e-3c4ed734d34c@mhorton.net>
From: Eric Allman <tuhs@eric.allman.name>
Openpgp: preference=signencrypt
Autocrypt: addr=tuhs@eric.allman.name; prefer-encrypt=mutual; keydata=
 mQENBFwoCwwBCADxJMPm0KuZkIvW3RxS0qVzFaRYuJkdJE00GhLgHIv3mFHAWT/EHoHGKkX1
 wFNHDW2GwslMowPy4HVA00cNC5Qy/8CsEhmfSFQEQXX/BPTseXMHWPcBbS+s7e+irrCUYJ9u
 faz5KdBD0XeKYqeOIx1oSiyooUY4Ucse5BwBCtyGXsDbFU9uTeBxb4+yDX7X/wyH0AZXGMIy
 ZKS/PQV2c8htu9pDATzvSVP3cLEjkvjoBDej0ZsG3JhriMOkrSzydjVlSQ+Ju0X1A8mC5HtK
 sE1iFUlNIWSU8lcMFr66x/u3S4RSiQ0sgiNBfx+a7lMKWK8fjk7v9TlH0aITlfUi43IbABEB
 AAG0I0VyaWMgUC4gQWxsbWFuIDxlcmljQG5lb3BoaWxpYy5jb20+iQFUBBMBCAA+FiEEOn4k
 LhdDoWlWiTE1pEphuxBg6N0FAlwoCwwCGwMFCQPCZwAFCwkIBwIGFQoJCAsCBBYCAwECHgEC
 F4AACgkQpEphuxBg6N2QGAf/V2OCKhLnRPfi9qHeXDbtwSagme1HU2h7d+DOnlzVS14YoUOM
 SPUEGFxWj26/16HLqZDlbqCt6iBgxRL/DF3M94iOIGz50byblrjcC/Ohw62dI8jobF3XSXAa
 YonpcEed2lQkk5lr6anLRKzGJdxSxSozOlwb4Cbi8Xc+O1idqclCqXYe1gHpYzYz5xgrhxDF
 wt+3t10DZPJfGcHjuq/BXGT/pp8uJPYqs7iKvd/RrbOG2ZjP0Wu+j+4kkwh+gD9feeSEuuMm
 DBkK9A0c1fYQTaFzKGhr8dd/n/tCaPax+QlE03xRMY3ZNFOi4+ns+qAtU4bhFx+D1kqpq5L8
 LWJrb7kBDQRcKAsMAQgAv2pP9idQ6tGdKRraqxCyyMsHTLd88OsN1PnBv3jsj8sNw49P5B7b
 pLR0Qlk1tbACRw9rGTncUdALSDTjLS8Lb6i1xdgb2ULGZLwWL0oRHbGl96tVt20K/C1/16Lo
 tTjnQBX6CZ7CmBAtAY6Ct7pyxntOfJs3LWPpnxYcmX5Lwomg8J7I2WzbU1M1jugi96wRS2Gi
 rvEG8tHZ9uYCPISFK7/zxij2qYm5GquELmxYyRtcdzuLTpNGqcx4JHEJA02fAZHChnM6/gEn
 b4UIkPGqtk2nEyH+jR7hRPgjLh+DC6+4iehMaPyUljoEdyqLsBLyPv7U0k3pMXAO/rUp+O33
 /wARAQABiQE8BBgBCAAmFiEEOn4kLhdDoWlWiTE1pEphuxBg6N0FAlwoCwwCGwwFCQPCZwAA
 CgkQpEphuxBg6N0sQQf/VfKZ0s1g6yGeg8aVanyIrXIJAbeoJrOpKP3C+7mFrtMemXz5O/ug
 b9IouLQNM9LRnS//E8HQ1UwdmB2SBGEViy+m7tp0E+I0B+qTI95wipXD7crW98icUC5hvSg3
 1OII+guZ+jzOCI68Nune2spb1qBkz0fKD4dzpyrz0yQ8FJMjBj5U8GdpHbQo93HC8rBtTwH+
 UutcKCnt765XSOmAwHbkqj9W8XTUYPBW69At+mFJ/wvZzOIdNPCrHANX4L4A/naj4PQmkeJc
 eyRRpZBT1FK9vB89yegP7odgPIycfs4CN07kl16r3lidfRiLPx4jOHQ6LMGHqIvDrEumhyjA UQ==
Message-ID: <7180f41c-39ea-4271-578e-184057d5a723@neophilic.com>
Date: Sun, 31 May 2020 11:56:07 -0700
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:60.0)
 Gecko/20100101 Thunderbird/60.9.1
MIME-Version: 1.0
In-Reply-To: <bd93f90e-c613-3ebf-749e-3c4ed734d34c@mhorton.net>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
Content-Language: en-US
Subject: Re: [TUHS] mh/hm, mmh
X-BeenThere: tuhs@minnie.tuhs.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: The Unix Heritage Society mailing list <tuhs.minnie.tuhs.org>
List-Unsubscribe: <https://minnie.tuhs.org/cgi-bin/mailman/options/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=unsubscribe>
List-Archive: <http://minnie.tuhs.org/pipermail/tuhs/>
List-Post: <mailto:tuhs@minnie.tuhs.org>
List-Help: <mailto:tuhs-request@minnie.tuhs.org?subject=help>
List-Subscribe: <https://minnie.tuhs.org/cgi-bin/mailman/listinfo/tuhs>,
 <mailto:tuhs-request@minnie.tuhs.org?subject=subscribe>
Errors-To: tuhs-bounces@minnie.tuhs.org
Sender: "TUHS" <tuhs-bounces@minnie.tuhs.org>

Ah, time for some "Email at Berkeley" history....

First the back story.  In the beginning, /bin/mail was the mail system. 
All mail was local to one machine so the distinction between MUA, MTA,
and MSA (Mail Storage Agent) didn't exist.  At this point there were no
options, at least at Berkeley, although I suspect that Bruce was working
on MH by then.

If my memory serves, networking at Berkeley started with BerkNET.  Clem
got it right: Eric Schmidt wrote it, and it was designed to be cheap. 
The main purpose was that Berkeley was getting more Unix machines and
carrying tapes was problematic.  It was purely batch (no interactive
sessions; file copy and email only) and ran over 9600 baud TTY lines. 
Eric hacked /bin/mail to do the appropriate calls if it saw a colon in
the address, so the flow of a typical message would be keyboard →
/bin/mail → BerkNET → /bin/mail → /var/mail.

In about 1976 the INGRES project at Berkeley got an ARPAnet connection. 
6th Edition was current then, and we got the software from (iirc) UC San
Diego.  It was kind of a mess, but it did work.  It was a VDH (Very
Distant Host) interface running at 9600 baud.  But the mail system it
included, MSG I think, was a world unto itself, and definitely did not
use /bin/mail.  So now we had two universes: to send something to both
someone on BerkNET and someone on ARPAnet you had to type the message
into two different MUAs.  But at first this was good enough.  But not
for long.

The problem was that to use the ARPAnet you had to be logged into our
PDP-11/70.  Back then the cool kids had "glass TTYs" (i.e., adm3a).  But
BerkNET didn't have interactive connections, so you had to actually have
a TTY line into our machine.  Two problems arose: first, INGRES was in a
different building (Cory Hall) than the rest of the department (Evans
Hall).  But that's OK, there were already wires running between the two
buildings that were probably inspired by BerkNET.  Second, our PDP-11
had a single DH-11 multiport interface with 16 ports.  Only two of those
ports were available, and new DH-11s cost on the order of $15,000, money
which we did not have.

But no problem.  At this point there was already a "plug board" in the
mail room in Evans that had ports to the half dozen or so machines that
were by then on campus and lines to each office.  To connect you would
plug in a wire between the machine you wanted to use and your office. 
Protocol was that you remove the cross connect after use, but that was
widely ignored.  Ing70 ports were quite frequently being pulled out
while in use and no one was happy.  Unfortunately since I was kind of
managing that machine, I was the one who got yelled at.

Also in that period Berkeley got connected into UUCP.  UUCP had also
done a hack to /bin/mail, so it was becoming quite the big mess.  I made
the observation that I could hack /bin/mail to forward messages with an
"@" sign in the address to our ARPAnet-connected machine, but at that
point the code was becoming unwieldy.  Enter delivermail, which was
essentially what we now call an MTA.  It was still a hack, but it was
easier to deal with because it didn't have MUA and MSA functionality.  I
changed /bin/mail to call delivermail unless it got a "-d" (deliver)
flag, so now the sequence for local mail was /bin/mail → delivermail →
/bin/mail -d → /var/mail.  And most importantly, I hacked the ARPAnet
code to use delivermail as well, so now Ing70 could forward mail from
BerkNET to ARPAnet and back again.  The fights over our two plug board
ports mostly dissipated and my life got better.

I'm pretty sure that at this point Kurt Schoens was working on Mail.  He
read /var/mail (at that point it had been migrated to /var/spool/mail)
directly, so there was no hiding of the mailbox format, so he had MUA +
a half of an MSA.  He converted Mail to use delivermail for outgoing
mail.  I don't recall the details of how MH got hooked in, but it did
have a separate program for sending (called "send" I think) that would
have been fairly easy to hack.  It still had "inc" (incorporate) to
bring mail from the /var/mail one-file-per-mailbox format into the MH
one-file-per-message format, so the three functions were not completely
broken out, but it was really the closest to that ideal model available
at the time, so far as I know.

That's the gist of that story.  Sendmail is a completely different
story, driven by the onset of the Internet, and I won't make this
already long message even longer by going into it here.

By the way, I have a 9-track tape sent to me by Marshall Rose containing
the November 1983 version of MH that UCI did (based on the Rand system),
complete with original versions of the documentation.  If anyone has any
way of reading it I'm happy to pass it on.

eric
